var QT=Object.defineProperty,YT=Object.defineProperties;var ZT=Object.getOwnPropertyDescriptors;var cy=Object.getOwnPropertySymbols;var JT=Object.prototype.hasOwnProperty,XT=Object.prototype.propertyIsEnumerable;var uy=(n,e,t)=>e in n?QT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})JT.call(e,t)&&uy(n,t,e[t]);if(cy)for(var t of cy(e))XT.call(e,t)&&uy(n,t,e[t]);return n},Ie=(n,e)=>YT(n,ZT(e));var S=(n,e,t)=>new Promise((r,i)=>{var s=u=>{try{c(t.next(u))}catch(d){i(d)}},o=u=>{try{c(t.throw(u))}catch(d){i(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((t=t.apply(n,e)).next())});var _l=null;var vl=1,ly=Symbol("SIGNAL");function ce(n){let e=_l;return _l=n,e}function dy(){return _l}var Il={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function eb(n){if(!(bl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===vl)){if(!n.producerMustRecompute(n)&&!El(n)){n.dirty=!1,n.lastCleanEpoch=vl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=vl}}function wl(n){return n&&(n.nextProducerIndex=0),ce(n)}function hy(n,e){if(ce(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(bl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Tl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function El(n){Cl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(eb(t),r!==t.version))return!0}return!1}function Dl(n){if(Cl(n),bl(n))for(let e=0;e<n.producerNode.length;e++)Tl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Tl(n,e){if(tb(n),n.liveConsumerNode.length===1&&nb(n))for(let r=0;r<n.producerNode.length;r++)Tl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Cl(i),i.producerIndexOfThis[r]=e}}function bl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Cl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function tb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function nb(n){return n.producerNode!==void 0}function rb(){throw new Error}var ib=rb;function fy(n){ib=n}function q(n){return typeof n=="function"}function Sr(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ia=Sr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Hn(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var De=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(s){e=s instanceof ia?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{py(s)}catch(o){e=e??[],o instanceof ia?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ia(e)}}add(e){var t;if(e&&e!==this)if(this.closed)py(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Hn(t,e)}remove(e){let{_finalizers:t}=this;t&&Hn(t,e),e instanceof n&&e._removeParent(this)}};De.EMPTY=(()=>{let n=new De;return n.closed=!0,n})();var Sl=De.EMPTY;function sa(n){return n instanceof De||n&&"closed"in n&&q(n.remove)&&q(n.add)&&q(n.unsubscribe)}function py(n){q(n)?n():n.unsubscribe()}var wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ar={setTimeout(n,e,...t){let{delegate:r}=Ar;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ar;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function oa(n){Ar.setTimeout(()=>{let{onUnhandledError:e}=wt;if(e)e(n);else throw n})}function ds(){}var gy=Al("C",void 0,void 0);function my(n){return Al("E",void 0,n)}function yy(n){return Al("N",n,void 0)}function Al(n,e,t){return{kind:n,value:e,error:t}}var qn=null;function Rr(n){if(wt.useDeprecatedSynchronousErrorHandling){let e=!qn;if(e&&(qn={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=qn;if(qn=null,t)throw r}}else n()}function vy(n){wt.useDeprecatedSynchronousErrorHandling&&qn&&(qn.errorThrown=!0,qn.error=n)}var zn=class extends De{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sa(e)&&e.add(this)):this.destination=ab}static create(e,t,r){return new Nr(e,t,r)}next(e){this.isStopped?Nl(yy(e),this):this._next(e)}error(e){this.isStopped?Nl(my(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nl(gy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sb=Function.prototype.bind;function Rl(n,e){return sb.call(n,e)}var Ml=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){aa(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){aa(r)}else aa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){aa(t)}}},Nr=class extends zn{constructor(e,t,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&wt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rl(e.next,s),error:e.error&&Rl(e.error,s),complete:e.complete&&Rl(e.complete,s)}):i=e}this.destination=new Ml(i)}};function aa(n){wt.useDeprecatedSynchronousErrorHandling?vy(n):oa(n)}function ob(n){throw n}function Nl(n,e){let{onStoppedNotification:t}=wt;t&&Ar.setTimeout(()=>t(n,e))}var ab={closed:!0,next:ds,error:ob,complete:ds};var Mr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rt(n){return n}function ca(...n){return xl(n)}function xl(n){return n.length===0?rt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var re=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=ub(t)?t:new Nr(t,r,i);return Rr(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=_y(r),new r((i,s)=>{let o=new Nr({next:c=>{try{t(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Mr](){return this}pipe(...t){return xl(t)(this)}toPromise(t){return t=_y(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function _y(n){var e;return(e=n??wt.Promise)!==null&&e!==void 0?e:Promise}function cb(n){return n&&q(n.next)&&q(n.error)&&q(n.complete)}function ub(n){return n&&n instanceof zn||cb(n)&&sa(n)}function Pl(n){return q(n?.lift)}function ie(n){return e=>{if(Pl(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(n,e,t,r,i){return new Ol(n,e,t,r,i)}var Ol=class extends zn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function xr(){return ie((n,e)=>{let t=null;n._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Pr=class extends re{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Pl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new De;let t=this.getSubject();e.add(this.source.subscribe(se(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=De.EMPTY)}return e}refCount(){return xr()(this)}};var Iy=Sr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ye=(()=>{class n extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ua(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Iy}next(t){Rr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Rr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Rr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Sl:(this.currentObservers=null,s.push(t),new De(()=>{this.currentObservers=null,Hn(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new re;return t.source=this,t}}return n.create=(e,t)=>new ua(e,t),n})(),ua=class extends Ye{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Sl}};var Ue=class extends Ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var kl={now(){return(kl.delegate||Date).now()},delegate:void 0};var la=class extends De{constructor(e,t){super()}schedule(e,t=0){return this}};var hs={setInterval(n,e,...t){let{delegate:r}=hs;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=hs;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Or=class extends la{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return hs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&hs.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Hn(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var kr=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};kr.now=kl.now;var Lr=class extends kr{constructor(e,t=kr.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ll=new Lr(Or);var da=class extends Or{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ha=class extends Lr{};var Fl=new ha(da);var it=new re(n=>n.complete());function wy(n){return n&&q(n.schedule)}function Ey(n){return n[n.length-1]}function Dy(n){return q(Ey(n))?n.pop():void 0}function gn(n){return wy(Ey(n))?n.pop():void 0}function Vl(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function by(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function c(f){try{d(r.next(f))}catch(g){o(g)}}function u(f){try{d(r.throw(f))}catch(g){o(g)}}function d(f){f.done?s(f.value):i(f.value).then(c,u)}d((r=r.apply(n,e||[])).next())})}function Ty(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gn(n){return this instanceof Gn?(this.v=n,this):new Gn(n)}function Cy(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(I){return function(A){return Promise.resolve(A).then(I,g)}}function c(I,A){r[I]&&(i[I]=function(N){return new Promise(function(R,F){s.push([I,N,R,F])>1||u(I,N)})},A&&(i[I]=A(i[I])))}function u(I,A){try{d(r[I](A))}catch(N){_(s[0][3],N)}}function d(I){I.value instanceof Gn?Promise.resolve(I.value.v).then(f,g):_(s[0][2],I)}function f(I){u("next",I)}function g(I){u("throw",I)}function _(I,A){I(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Sy(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Ty=="function"?Ty(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(c,u){o=n[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(d){s({value:d,done:c})},o)}}var fa=n=>n&&typeof n.length=="number"&&typeof n!="function";function pa(n){return q(n?.then)}function ga(n){return q(n[Mr])}function ma(n){return Symbol.asyncIterator&&q(n?.[Symbol.asyncIterator])}function ya(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function lb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var va=lb();function _a(n){return q(n?.[va])}function Ia(n){return Cy(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Gn(t.read());if(i)return yield Gn(void 0);yield yield Gn(r)}}finally{t.releaseLock()}})}function wa(n){return q(n?.getReader)}function Oe(n){if(n instanceof re)return n;if(n!=null){if(ga(n))return db(n);if(fa(n))return hb(n);if(pa(n))return fb(n);if(ma(n))return Ay(n);if(_a(n))return pb(n);if(wa(n))return gb(n)}throw ya(n)}function db(n){return new re(e=>{let t=n[Mr]();if(q(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function hb(n){return new re(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function fb(n){return new re(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,oa)})}function pb(n){return new re(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Ay(n){return new re(e=>{mb(n,e).catch(t=>e.error(t))})}function gb(n){return Ay(Ia(n))}function mb(n,e){var t,r,i,s;return by(this,void 0,void 0,function*(){try{for(t=Sy(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function et(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function mn(n,e=0){return ie((t,r)=>{t.subscribe(se(r,i=>et(r,n,()=>r.next(i),e),()=>et(r,n,()=>r.complete(),e),i=>et(r,n,()=>r.error(i),e)))})}function yn(n,e=0){return ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Ry(n,e){return Oe(n).pipe(yn(e),mn(e))}function Ny(n,e){return Oe(n).pipe(yn(e),mn(e))}function My(n,e){return new re(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function xy(n,e){return new re(t=>{let r;return et(t,e,()=>{r=n[va](),et(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function Ea(n,e){if(!n)throw new Error("Iterable cannot be null");return new re(t=>{et(t,e,()=>{let r=n[Symbol.asyncIterator]();et(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Py(n,e){return Ea(Ia(n),e)}function Oy(n,e){if(n!=null){if(ga(n))return Ry(n,e);if(fa(n))return My(n,e);if(pa(n))return Ny(n,e);if(ma(n))return Ea(n,e);if(_a(n))return xy(n,e);if(wa(n))return Py(n,e)}throw ya(n)}function Se(n,e){return e?Oy(n,e):Oe(n)}function G(...n){let e=gn(n);return Se(n,e)}function Fr(n,e){let t=q(n)?n:()=>n,r=i=>i.error(t());return new re(e?i=>e.schedule(r,0,i):r)}function Ul(n){return!!n&&(n instanceof re||q(n.lift)&&q(n.subscribe))}var Gt=Sr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ee(n,e){return ie((t,r)=>{let i=0;t.subscribe(se(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:yb}=Array;function vb(n,e){return yb(e)?n(...e):n(e)}function ky(n){return ee(e=>vb(n,e))}var{isArray:_b}=Array,{getPrototypeOf:Ib,prototype:wb,keys:Eb}=Object;function Ly(n){if(n.length===1){let e=n[0];if(_b(e))return{args:e,keys:null};if(Db(e)){let t=Eb(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Db(n){return n&&typeof n=="object"&&Ib(n)===wb}function Fy(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Da(...n){let e=gn(n),t=Dy(n),{args:r,keys:i}=Ly(n);if(r.length===0)return Se([],e);let s=new re(Tb(r,e,i?o=>Fy(i,o):rt));return t?s.pipe(ky(t)):s}function Tb(n,e,t=rt){return r=>{Vy(e,()=>{let{length:i}=n,s=new Array(i),o=i,c=i;for(let u=0;u<i;u++)Vy(e,()=>{let d=Se(n[u],e),f=!1;d.subscribe(se(r,g=>{s[u]=g,f||(f=!0,c--),c||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Vy(n,e,t){n?et(t,n,e):e()}function Uy(n,e,t,r,i,s,o,c){let u=[],d=0,f=0,g=!1,_=()=>{g&&!u.length&&!d&&e.complete()},I=N=>d<r?A(N):u.push(N),A=N=>{s&&e.next(N),d++;let R=!1;Oe(t(N,f++)).subscribe(se(e,F=>{i?.(F),s?I(F):e.next(F)},()=>{R=!0},void 0,()=>{if(R)try{for(d--;u.length&&d<r;){let F=u.shift();o?et(e,o,()=>A(F)):A(F)}_()}catch(F){e.error(F)}}))};return n.subscribe(se(e,I,()=>{g=!0,_()})),()=>{c?.()}}function Me(n,e,t=1/0){return q(e)?Me((r,i)=>ee((s,o)=>e(r,s,i,o))(Oe(n(r,i))),t):(typeof e=="number"&&(t=e),ie((r,i)=>Uy(r,i,n,t)))}function jl(n=1/0){return Me(rt,n)}function jy(){return jl(1)}function Vr(...n){return jy()(Se(n,gn(n)))}function Ta(n){return new re(e=>{Oe(n()).subscribe(e)})}function ut(n,e){return ie((t,r)=>{let i=0;t.subscribe(se(r,s=>n.call(e,s,i++)&&r.next(s)))})}function vn(n){return ie((e,t)=>{let r=null,i=!1,s;r=e.subscribe(se(t,void 0,void 0,o=>{s=Oe(n(o,vn(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function By(n,e,t,r,i){return(s,o)=>{let c=t,u=e,d=0;s.subscribe(se(o,f=>{let g=d++;u=c?n(u,f,g):(c=!0,f),r&&o.next(u)},i&&(()=>{c&&o.next(u),o.complete()})))}}function Ur(n,e){return q(e)?Me(n,e,1):Me(n,1)}function _n(n){return ie((e,t)=>{let r=!1;e.subscribe(se(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Wt(n){return n<=0?()=>it:ie((e,t)=>{let r=0;e.subscribe(se(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Bl(n){return ee(()=>n)}function ba(n=bb){return ie((e,t)=>{let r=!1;e.subscribe(se(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function bb(){return new Gt}function fs(n){return ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function xt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,s)=>n(i,s,r)):rt,Wt(1),t?_n(e):ba(()=>new Gt))}function jr(n){return n<=0?()=>it:ie((e,t)=>{let r=[];e.subscribe(se(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function $l(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,s)=>n(i,s,r)):rt,jr(1),t?_n(e):ba(()=>new Gt))}function Ca(n,e){return ie(By(n,e,arguments.length>=2,!0))}function Sa(...n){let e=gn(n);return ie((t,r)=>{(e?Vr(n,t,e):Vr(n,t)).subscribe(r)})}function Et(n,e){return ie((t,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();t.subscribe(se(r,u=>{i?.unsubscribe();let d=0,f=s++;Oe(n(u,f)).subscribe(i=se(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function Hl(n){return ie((e,t)=>{Oe(n).subscribe(se(t,()=>t.complete(),ds)),!t.closed&&e.subscribe(t)})}function xe(n,e,t){let r=q(n)||e||t?{next:n,error:e,complete:t}:n;return r?ie((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(se(s,u=>{var d;(d=r.next)===null||d===void 0||d.call(r,u),s.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var d;c=!1,(d=r.error)===null||d===void 0||d.call(r,u),s.error(u)},()=>{var u,d;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):rt}var U=class extends Error{constructor(e,t){super(Fd(e,t)),this.code=e}};function Fd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function nc(n){return{toString:n}.toString()}var Aa="__parameters__";function Cb(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Sb(n,e,t){return nc(()=>{let r=Cb(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(u,d,f){let g=u.hasOwnProperty(Aa)?u[Aa]:Object.defineProperty(u,Aa,{value:[]})[Aa];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function ye(n){for(let e in n)if(n[e]===ye)return e;throw Error("Could not find renamed property on target object.")}function st(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(st).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function $y(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Ab=ye({__forward_ref__:ye});function Tv(n){return n.__forward_ref__=Tv,n.toString=function(){return st(this())},n}function lt(n){return bv(n)?n():n}function bv(n){return typeof n=="function"&&n.hasOwnProperty(Ab)&&n.__forward_ref__===Tv}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function rc(n){return Hy(n,Sv)||Hy(n,Av)}function Cv(n){return rc(n)!==null}function Hy(n,e){return n.hasOwnProperty(e)?n[e]:null}function Rb(n){let e=n&&(n[Sv]||n[Av]);return e||null}function qy(n){return n&&(n.hasOwnProperty(zy)||n.hasOwnProperty(Nb))?n[zy]:null}var Sv=ye({\u0275prov:ye}),zy=ye({\u0275inj:ye}),Av=ye({ngInjectableDef:ye}),Nb=ye({ngInjectorDef:ye}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Rv(n){return n&&!!n.\u0275providers}var Mb=ye({\u0275cmp:ye}),xb=ye({\u0275dir:ye}),Pb=ye({\u0275pipe:ye}),Ob=ye({\u0275mod:ye}),ka=ye({\u0275fac:ye}),ms=ye({__NG_ELEMENT_ID__:ye}),Gy=ye({__NG_ENV_ID__:ye});function Nv(n){return typeof n=="string"?n:n==null?"":String(n)}function kb(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Nv(n)}function Lb(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new U(-200,n)}function Vd(n,e){throw new U(-201,!1)}var Z=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Z||{}),Xl;function Mv(){return Xl}function tt(n){let e=Xl;return Xl=n,e}function xv(n,e,t){let r=rc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Z.Optional)return null;if(e!==void 0)return e;Vd(n,"Injector")}var Fb={},ys=Fb,ed="__NG_DI_FLAG__",La="ngTempTokenPath",Vb="ngTokenPath",Ub=/\n/gm,jb="\u0275",Wy="__source",qr;function Bb(){return qr}function In(n){let e=qr;return qr=n,e}function $b(n,e=Z.Default){if(qr===void 0)throw new U(-203,!1);return qr===null?xv(n,void 0,e):qr.get(n,e&Z.Optional?null:void 0,e)}function te(n,e=Z.Default){return(Mv()||$b)(lt(n),e)}function O(n,e=Z.Default){return te(n,ic(e))}function ic(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function td(n){let e=[];for(let t=0;t<n.length;t++){let r=lt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,s=Z.Default;for(let o=0;o<r.length;o++){let c=r[o],u=qb(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push(te(i,s))}else e.push(te(r))}return e}function Hb(n,e){return n[ed]=e,n.prototype[ed]=e,n}function qb(n){return n[ed]}function zb(n,e,t,r){let i=n[La];throw e[Wy]&&i.unshift(e[Wy]),n.message=Gb(`
`+n.message,i,t,r),n[Vb]=i,n[La]=null,n}function Gb(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==jb?n.slice(2):n;let i=st(e);if(Array.isArray(e))i=e.map(st).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let c=e[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):st(c)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Ub,`
  `)}`}var kt=Hb(Sb("Optional"),8);function Qn(n,e){let t=n.hasOwnProperty(ka);return t?n[ka]:null}function Ud(n,e){n.forEach(t=>Array.isArray(t)?Ud(t,e):e(t))}function Pv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Fa(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var vs={},Gr=[],Wr=new H(""),Ov=new H("",-1),kv=new H(""),Va=class{get(e,t=ys){if(t===ys){let r=new Error(`NullInjectorError: No provider for ${st(e)}!`);throw r.name="NullInjectorError",r}return t}},Lv=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Lv||{}),Ot=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ot||{}),Dn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Dn||{});function Wb(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function nd(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],c=t[r++];n.setAttribute(e,o,c,s)}else{let s=i,o=t[++r];Qb(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Kb(n){return n===3||n===4||n===6}function Qb(n){return n.charCodeAt(0)===64}function jd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Ky(n,t,i,null,e[++r]):Ky(n,t,i,null,null))}}return n}function Ky(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let c=n[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<n.length;){let c=n[s];if(typeof c=="number")break;if(c===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var Fv="ng-template";function Yb(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Wb(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Bd(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Bd(n){return n.type===4&&n.value!==Fv}function Zb(n,e,t){let r=n.type===4&&!t?Fv:n.value;return e===r}function Jb(n,e,t){let r=4,i=n.attrs,s=i!==null?tC(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!Dt(r)&&!Dt(u))return!1;if(o&&Dt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!Zb(n,u,t)||u===""&&e.length===1){if(Dt(r))return!1;o=!0}}else if(r&8){if(i===null||!Yb(n,i,u,t)){if(Dt(r))return!1;o=!0}}else{let d=e[++c],f=Xb(u,i,Bd(n),t);if(f===-1){if(Dt(r))return!1;o=!0;continue}if(d!==""){let g;if(f>s?g="":g=i[f+1].toLowerCase(),r&2&&d!==g){if(Dt(r))return!1;o=!0}}}}return Dt(r)||o}function Dt(n){return(n&1)===0}function Xb(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return nC(e,n)}function eC(n,e,t=!1){for(let r=0;r<e.length;r++)if(Jb(n,e[r],t))return!0;return!1}function tC(n){for(let e=0;e<n.length;e++){let t=n[e];if(Kb(t))return e}return n.length}function nC(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Qy(n,e){return n?":not("+e.trim()+")":e}function rC(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let c=n[++t];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Dt(o)&&(e+=Qy(s,i),i=""),r=o,s=s||!Dt(r);t++}return i!==""&&(e+=Qy(s,i)),e}function iC(n){return n.map(rC).join(",")}function sC(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Dt(i))break;i=s}r++}return{attrs:e,classes:t}}function sc(n){return nc(()=>{let e=Hv(n),t=Ie(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Lv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ot.Emulated,styles:n.styles||Gr,_:null,schemas:n.schemas||null,tView:null,id:""});qv(t);let r=n.dependencies;return t.directiveDefs=Zy(r,!1),t.pipeDefs=Zy(r,!0),t.id=cC(t),t})}function oC(n){return Yn(n)||Uv(n)}function aC(n){return n!==null}function Yy(n,e){if(n==null)return vs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,c=Dn.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=c!==Dn.None?[r,c]:r,e[s]=o):t[s]=r}return t}function $d(n){return nc(()=>{let e=Hv(n);return qv(e),e})}function Vv(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Yn(n){return n[Mb]||null}function Uv(n){return n[xb]||null}function jv(n){return n[Pb]||null}function Bv(n){let e=Yn(n)||Uv(n)||jv(n);return e!==null?e.standalone:!1}function $v(n,e){let t=n[Ob]||null;if(!t&&e===!0)throw new Error(`Type ${st(n)} does not have '\u0275mod' property.`);return t}function Hv(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||vs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Gr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Yy(n.inputs,e),outputs:Yy(n.outputs),debugInfo:null}}function qv(n){n.features?.forEach(e=>e(n))}function Zy(n,e){if(!n)return null;let t=e?jv:oC;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(aC)}function cC(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Cn(n){return{\u0275providers:n}}function uC(...n){return{\u0275providers:zv(!0,n),\u0275fromNgModule:!0}}function zv(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Ud(e,o=>{let c=o;rd(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&Gv(i,s),t}function Gv(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Hd(i,s=>{e(s,r)})}}function rd(n,e,t,r){if(n=lt(n),!n)return!1;let i=null,s=qy(n),o=!s&&Yn(n);if(!s&&!o){let u=n.ngModule;if(s=qy(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=n}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of u)rd(d,e,t,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let d;try{Ud(s.imports,f=>{rd(f,e,t,r)&&(d||=[],d.push(f))})}finally{}d!==void 0&&Gv(d,e)}if(!c){let d=Qn(i)||(()=>new i);e({provide:i,useFactory:d,deps:Gr},i),e({provide:kv,useValue:i,multi:!0},i),e({provide:Wr,useValue:()=>te(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let d=n;Hd(u,f=>{e(f,d)})}}else return!1;return i!==n&&n.providers!==void 0}function Hd(n,e){for(let t of n)Rv(t)&&(t=t.\u0275providers),Array.isArray(t)?Hd(t,e):e(t)}var lC=ye({provide:String,useValue:ye});function Wv(n){return n!==null&&typeof n=="object"&&lC in n}function dC(n){return!!(n&&n.useExisting)}function hC(n){return!!(n&&n.useFactory)}function id(n){return typeof n=="function"}var oc=new H(""),Na={},fC={},ql;function qd(){return ql===void 0&&(ql=new Va),ql}var ft=class{},_s=class extends ft{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,od(e,o=>this.processProvider(o)),this.records.set(Ov,Br(void 0,this)),i.has("environment")&&this.records.set(ft,Br(void 0,this));let s=this.records.get(oc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(kv,Gr,Z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=In(this),r=tt(void 0),i;try{return e()}finally{In(t),tt(r)}}get(e,t=ys,r=Z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Gy))return e[Gy](this);r=ic(r);let i,s=In(this),o=tt(void 0);try{if(!(r&Z.SkipSelf)){let u=this.records.get(e);if(u===void 0){let d=_C(e)&&rc(e);d&&this.injectableDefInScope(d)?u=Br(sd(e),Na):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&Z.Self?qd():this.parent;return t=r&Z.Optional&&t===ys?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[La]=c[La]||[]).unshift(st(e)),s)throw c;return zb(c,e,"R3InjectorError",this.source)}else throw c}finally{tt(o),In(s)}}resolveInjectorInitializers(){let e=ce(null),t=In(this),r=tt(void 0),i;try{let s=this.get(Wr,Gr,Z.Self);for(let o of s)o()}finally{In(t),tt(r),ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(st(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new U(205,!1)}processProvider(e){e=lt(e);let t=id(e)?e:lt(e&&e.provide),r=gC(e);if(!id(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Br(void 0,Na,!0),i.factory=()=>td(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ce(null);try{return t.value===Na&&(t.value=fC,t.value=t.factory()),typeof t.value=="object"&&t.value&&vC(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=lt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function sd(n){let e=rc(n),t=e!==null?e.factory:Qn(n);if(t!==null)return t;if(n instanceof H)throw new U(204,!1);if(n instanceof Function)return pC(n);throw new U(204,!1)}function pC(n){if(n.length>0)throw new U(204,!1);let t=Rb(n);return t!==null?()=>t.factory(n):()=>new n}function gC(n){if(Wv(n))return Br(void 0,n.useValue);{let e=mC(n);return Br(e,Na)}}function mC(n,e,t){let r;if(id(n)){let i=lt(n);return Qn(i)||sd(i)}else if(Wv(n))r=()=>lt(n.useValue);else if(hC(n))r=()=>n.useFactory(...td(n.deps||[]));else if(dC(n))r=()=>te(lt(n.useExisting));else{let i=lt(n&&(n.useClass||n.provide));if(yC(n))r=()=>new i(...td(n.deps));else return Qn(i)||sd(i)}return r}function Br(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function yC(n){return!!n.deps}function vC(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function _C(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function od(n,e){for(let t of n)Array.isArray(t)?od(t,e):t&&Rv(t)?od(t.\u0275providers,e):e(t)}function Zt(n,e){n instanceof _s&&n.assertNotDestroyed();let t,r=In(n),i=tt(void 0);try{return e()}finally{In(r),tt(i)}}function IC(){return Mv()!==void 0||Bb()!=null}function wC(n){return typeof n=="function"}var Jt=0,J=1,z=2,Xe=3,Tt=4,At=5,Is=6,Jy=7,dt=8,Kr=9,Kt=10,pt=11,ws=12,Xy=13,As=14,bt=15,Qr=16,$r=17,Yr=18,ac=19,Kv=20,En=21,zl=22,ht=23,Ct=25,Qv=1;var Zn=7,Ua=8,ja=9,Je=10,Ba=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ba||{});function Wn(n){return Array.isArray(n)&&typeof n[Qv]=="object"}function Xt(n){return Array.isArray(n)&&n[Qv]===!0}function Yv(n){return(n.flags&4)!==0}function zd(n){return n.componentOffset>-1}function Zv(n){return(n.flags&1)===1}function Rs(n){return!!n.template}function ad(n){return(n[z]&512)!==0}var cd=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Jv(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function cc(){return Xv}function Xv(n){return n.type.prototype.ngOnChanges&&(n.setInput=DC),EC}cc.ngInherit=!0;function EC(){let n=t_(this),e=n?.current;if(e){let t=n.previous;if(t===vs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function DC(n,e,t,r,i){let s=this.declaredInputs[r],o=t_(n)||TC(n,{previous:vs,current:null}),c=o.current||(o.current={}),u=o.previous,d=u[s];c[s]=new cd(d&&d.currentValue,t,u===vs),Jv(n,e,i,t)}var e_="__ngSimpleChanges__";function t_(n){return n[e_]||null}function TC(n,e){return n[e_]=e}var ev=null;var wn=function(n,e,t){ev?.(n,e,t)},bC="svg",CC="math";function Qt(n){for(;Array.isArray(n);)n=n[Jt];return n}function SC(n,e){return Qt(e[n])}function en(n,e){return Qt(e[n.index])}function n_(n,e){return n.data[e]}function AC(n,e){return n[e]}function Ns(n,e){let t=e[n];return Wn(t)?t:t[Jt]}function Gd(n){return(n[z]&128)===128}function RC(n){return Xt(n[Xe])}function Es(n,e){return e==null?null:n[e]}function r_(n){n[$r]=0}function i_(n){n[z]&1024||(n[z]|=1024,Gd(n)&&lc(n))}function uc(n){return!!(n[z]&9216||n[ht]?.dirty)}function ud(n){n[Kt].changeDetectionScheduler?.notify(8),n[z]&64&&(n[z]|=1024),uc(n)&&lc(n)}function lc(n){n[Kt].changeDetectionScheduler?.notify(0);let e=Jn(n);for(;e!==null&&!(e[z]&8192||(e[z]|=8192,!Gd(e)));)e=Jn(e)}function s_(n,e){if((n[z]&256)===256)throw new U(911,!1);n[En]===null&&(n[En]=[]),n[En].push(e)}function NC(n,e){if(n[En]===null)return;let t=n[En].indexOf(e);t!==-1&&n[En].splice(t,1)}function Jn(n){let e=n[Xe];return Xt(e)?e[Xe]:e}var pe={lFrame:g_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var o_=!1;function MC(){return pe.lFrame.elementDepthCount}function xC(){pe.lFrame.elementDepthCount++}function PC(){pe.lFrame.elementDepthCount--}function a_(){return pe.bindingsEnabled}function OC(){return pe.skipHydrationRootTNode!==null}function kC(n){return pe.skipHydrationRootTNode===n}function LC(){pe.skipHydrationRootTNode=null}function ke(){return pe.lFrame.lView}function ti(){return pe.lFrame.tView}function tn(){let n=c_();for(;n!==null&&n.type===64;)n=n.parent;return n}function c_(){return pe.lFrame.currentTNode}function FC(){let n=pe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ms(n,e){let t=pe.lFrame;t.currentTNode=n,t.isParent=e}function u_(){return pe.lFrame.isParent}function VC(){pe.lFrame.isParent=!1}function l_(){return o_}function tv(n){o_=n}function UC(){let n=pe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function jC(n){return pe.lFrame.bindingIndex=n}function d_(){return pe.lFrame.bindingIndex++}function BC(){return pe.lFrame.inI18n}function $C(n,e){let t=pe.lFrame;t.bindingIndex=t.bindingRootIndex=n,ld(e)}function HC(){return pe.lFrame.currentDirectiveIndex}function ld(n){pe.lFrame.currentDirectiveIndex=n}function h_(n){pe.lFrame.currentQueryIndex=n}function qC(n){let e=n[J];return e.type===2?e.declTNode:e.type===1?n[At]:null}function f_(n,e,t){if(t&Z.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Z.Host);)if(i=qC(s),i===null||(s=s[As],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=pe.lFrame=p_();return r.currentTNode=e,r.lView=n,!0}function Wd(n){let e=p_(),t=n[J];pe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function p_(){let n=pe.lFrame,e=n===null?null:n.child;return e===null?g_(n):e}function g_(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function m_(){let n=pe.lFrame;return pe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var y_=m_;function Kd(){let n=m_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function dc(){return pe.lFrame.selectedIndex}function Xn(n){pe.lFrame.selectedIndex=n}function zC(){return pe.lFrame.currentNamespace}var v_=!0;function Qd(){return v_}function Yd(n){v_=n}function GC(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Xv(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Zd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function Ma(n,e,t){__(n,e,3,t)}function xa(n,e,t,r){(n[z]&3)===t&&__(n,e,t,r)}function Gl(n,e){let t=n[z];(t&3)===e&&(t&=16383,t+=1,n[z]=t)}function __(n,e,t,r){let i=r!==void 0?n[$r]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[$r]+=65536),(c<s||s==-1)&&(WC(n,t,e,u),n[$r]=(n[$r]&4294901760)+u+2),u++}function nv(n,e){wn(4,n,e);let t=ce(null);try{e.call(n)}finally{ce(t),wn(5,n,e)}}function WC(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],c=n[o];i?n[z]>>14<n[$r]>>16&&(n[z]&3)===e&&(n[z]+=16384,nv(c,s)):nv(c,s)}var zr=-1,Ds=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function KC(n){return n instanceof Ds}function QC(n){return(n.flags&8)!==0}function YC(n){return(n.flags&16)!==0}var Wl={},dd=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ic(r);let i=this.injector.get(e,Wl,r);return i!==Wl||t===Wl?i:this.parentInjector.get(e,t,r)}};function I_(n){return n!==zr}function $a(n){return n&32767}function ZC(n){return n>>16}function Ha(n,e){let t=ZC(n),r=e;for(;t>0;)r=r[As],t--;return r}var hd=!0;function qa(n){let e=hd;return hd=n,e}var JC=256,w_=JC-1,E_=5,XC=0,Pt={};function eS(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ms)&&(r=t[ms]),r==null&&(r=t[ms]=XC++);let i=r&w_,s=1<<i;e.data[n+(i>>E_)]|=s}function D_(n,e){let t=T_(n,e);if(t!==-1)return t;let r=e[J];r.firstCreatePass&&(n.injectorIndex=e.length,Kl(r.data,n),Kl(e,null),Kl(r.blueprint,null));let i=Jd(n,e),s=n.injectorIndex;if(I_(i)){let o=$a(i),c=Ha(i,e),u=c[J].data;for(let d=0;d<8;d++)e[s+d]=c[o+d]|u[o+d]}return e[s+8]=i,s}function Kl(n,e){n.push(0,0,0,0,0,0,0,0,e)}function T_(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Jd(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=R_(i),r===null)return zr;if(t++,i=i[As],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return zr}function tS(n,e,t){eS(n,e,t)}function b_(n,e,t){if(t&Z.Optional||n!==void 0)return n;Vd(e,"NodeInjector")}function C_(n,e,t,r){if(t&Z.Optional&&r===void 0&&(r=null),!(t&(Z.Self|Z.Host))){let i=n[Kr],s=tt(void 0);try{return i?i.get(e,r,t&Z.Optional):xv(e,r,t&Z.Optional)}finally{tt(s)}}return b_(r,e,t)}function S_(n,e,t,r=Z.Default,i){if(n!==null){if(e[z]&2048&&!(r&Z.Self)){let o=oS(n,e,t,r,Pt);if(o!==Pt)return o}let s=A_(n,e,t,r,Pt);if(s!==Pt)return s}return C_(e,t,r,i)}function A_(n,e,t,r,i){let s=iS(t);if(typeof s=="function"){if(!f_(e,n,r))return r&Z.Host?b_(i,t,r):C_(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Z.Optional))Vd(t);else return o}finally{y_()}}else if(typeof s=="number"){let o=null,c=T_(n,e),u=zr,d=r&Z.Host?e[bt][At]:null;for((c===-1||r&Z.SkipSelf)&&(u=c===-1?Jd(n,e):e[c+8],u===zr||!iv(r,!1)?c=-1:(o=e[J],c=$a(u),e=Ha(u,e)));c!==-1;){let f=e[J];if(rv(s,c,f.data)){let g=nS(c,e,t,o,r,d);if(g!==Pt)return g}u=e[c+8],u!==zr&&iv(r,e[J].data[c+8]===d)&&rv(s,c,e)?(o=f,c=$a(u),e=Ha(u,e)):c=-1}}return i}function nS(n,e,t,r,i,s){let o=e[J],c=o.data[n+8],u=r==null?zd(c)&&hd:r!=o&&(c.type&3)!==0,d=i&Z.Host&&s===c,f=rS(c,o,t,u,d);return f!==null?Ts(e,o,f,c):Pt}function rS(n,e,t,r,i){let s=n.providerIndexes,o=e.data,c=s&1048575,u=n.directiveStart,d=n.directiveEnd,f=s>>20,g=r?c:c+f,_=i?c+f:d;for(let I=g;I<_;I++){let A=o[I];if(I<u&&t===A||I>=u&&A.type===t)return I}if(i){let I=o[u];if(I&&Rs(I)&&I.type===t)return u}return null}function Ts(n,e,t,r){let i=n[t],s=e.data;if(KC(i)){let o=i;o.resolving&&Lb(kb(s[t]));let c=qa(o.canSeeViewProviders);o.resolving=!0;let u,d=o.injectImpl?tt(o.injectImpl):null,f=f_(n,r,Z.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&GC(t,s[t],e)}finally{d!==null&&tt(d),qa(c),o.resolving=!1,y_()}}return i}function iS(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ms)?n[ms]:void 0;return typeof e=="number"?e>=0?e&w_:sS:e}function rv(n,e,t){let r=1<<n;return!!(t[e+(n>>E_)]&r)}function iv(n,e){return!(n&Z.Self)&&!(n&Z.Host&&e)}var Kn=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return S_(this._tNode,this._lView,e,ic(r),t)}};function sS(){return new Kn(tn(),ke())}function Xd(n){return nc(()=>{let e=n.prototype.constructor,t=e[ka]||fd(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[ka]||fd(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function fd(n){return bv(n)?()=>{let e=fd(lt(n));return e&&e()}:Qn(n)}function oS(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[z]&2048&&!(o[z]&512);){let c=A_(s,o,t,r|Z.Self,Pt);if(c!==Pt)return c;let u=s.parent;if(!u){let d=o[Kv];if(d){let f=d.get(t,Pt,r);if(f!==Pt)return f}u=R_(o),o=o[As]}s=u}return i}function R_(n){let e=n[J],t=e.type;return t===2?e.declTNode:t===1?n[At]:null}function sv(n,e=null,t=null,r){let i=N_(n,e,t,r);return i.resolveInjectorInitializers(),i}function N_(n,e=null,t=null,r,i=new Set){let s=[t||Gr,uC(n)];return r=r||(typeof n=="object"?void 0:st(n)),new _s(s,e||qd(),r||null,i)}var St=class n{static{this.THROW_IF_NOT_FOUND=ys}static{this.NULL=new Va}static create(e,t){if(Array.isArray(e))return sv({name:""},t,e,"");{let r=e.name??"";return sv({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=$({token:n,providedIn:"any",factory:()=>te(Ov)})}static{this.__NG_ELEMENT_ID__=-1}};var aS=new H("");aS.__NG_ELEMENT_ID__=n=>{let e=tn();if(e===null)throw new U(204,!1);if(e.type&2)return e.value;if(n&Z.Optional)return null;throw new U(204,!1)};var cS="ngOriginalError";function Ql(n){return n[cS]}var M_=!0,x_=(()=>{class n{static{this.__NG_ELEMENT_ID__=uS}static{this.__NG_ENV_ID__=t=>t}}return n})(),pd=class extends x_{constructor(e){super(),this._lView=e}onDestroy(e){return s_(this._lView,e),()=>NC(this._lView,e)}};function uS(){return new pd(ke())}var ni=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ue(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}}return n})();var gd=class extends Ye{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,IC()&&(this.destroyRef=O(x_,{optional:!0})??void 0,this.pendingTasks=O(ni,{optional:!0})??void 0)}emit(e){let t=ce(null);try{super.next(e)}finally{ce(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof De&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ze=gd;function za(...n){}function P_(n){let e,t;function r(){n=za;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ov(n){return queueMicrotask(()=>n()),()=>{n=za}}var eh="isAngularZone",Ga=eh+"_ID",lS=0,ve=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ze(!1),this.onMicrotaskEmpty=new Ze(!1),this.onStable=new Ze(!1),this.onError=new Ze(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=M_}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,fS(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(eh)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new U(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,dS,za,za);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},dS={};function th(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function hS(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){P_(()=>{n.callbackScheduled=!1,md(n),n.isCheckStableRunning=!0,th(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),md(n)}function fS(n){let e=()=>{hS(n)},t=lS++;n._inner=n._inner.fork({name:"angular",properties:{[eh]:!0,[Ga]:t,[Ga+t]:!0},onInvokeTask:(r,i,s,o,c,u)=>{if(pS(u))return r.invokeTask(s,o,c,u);try{return av(n),r.invokeTask(s,o,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),cv(n)}},onInvoke:(r,i,s,o,c,u,d)=>{try{return av(n),r.invoke(s,o,c,u,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!gS(u)&&e(),cv(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,md(n),th(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function md(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function av(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function cv(n){n._nesting--,th(n)}var yd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ze,this.onMicrotaskEmpty=new Ze,this.onStable=new Ze,this.onError=new Ze}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function pS(n){return O_(n,"__ignore_ng_zone__")}function gS(n){return O_(n,"__scheduler_tick__")}function O_(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Yt=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ql(e);for(;t&&Ql(t);)t=Ql(t);return t||null}},mS=new H("",{providedIn:"root",factory:()=>{let n=O(ve),e=O(Yt);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function yS(){return nh(tn(),ke())}function nh(n,e){return new hc(en(n,e))}var hc=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=yS}}return n})();function k_(n){return(n.flags&128)===128}var L_=new Map,vS=0;function _S(){return vS++}function IS(n){L_.set(n[ac],n)}function vd(n){L_.delete(n[ac])}var uv="__ngContext__";function er(n,e){Wn(e)?(n[uv]=e[ac],IS(e)):n[uv]=e}function F_(n){return U_(n[ws])}function V_(n){return U_(n[Tt])}function U_(n){for(;n!==null&&!Xt(n);)n=n[Tt];return n}var _d;function j_(n){_d=n}function wS(){if(_d!==void 0)return _d;if(typeof document<"u")return document;throw new U(210,!1)}var rh=new H("",{providedIn:"root",factory:()=>ES}),ES="ng",ih=new H(""),Sn=new H("",{providedIn:"platform",factory:()=>"unknown"});var sh=new H("",{providedIn:"root",factory:()=>wS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var DS="h",TS="b";var bS=()=>null;function oh(n,e,t=!1){return bS(n,e,t)}var B_=!1,CS=new H("",{providedIn:"root",factory:()=>B_});function $_(n){return n instanceof Function?n():n}var tr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(tr||{}),SS;function ah(n,e){return SS(n,e)}function Hr(n,e,t,r,i){if(r!=null){let s,o=!1;Xt(r)?s=r:Wn(r)&&(o=!0,r=r[Jt]);let c=Qt(r);n===0&&t!==null?i==null?G_(e,t,c):Wa(e,t,c,i||null,!0):n===1&&t!==null?Wa(e,t,c,i||null,!0):n===2?$S(e,c,o):n===3&&e.destroyNode(c),s!=null&&qS(e,n,s,t,i)}}function AS(n,e){return n.createText(e)}function RS(n,e,t){n.setValue(e,t)}function H_(n,e,t){return n.createElement(e,t)}function NS(n,e){q_(n,e),e[Jt]=null,e[At]=null}function MS(n,e,t,r,i,s){r[Jt]=i,r[At]=e,pc(n,r,t,1,i,s)}function q_(n,e){e[Kt].changeDetectionScheduler?.notify(9),pc(n,e,e[pt],2,null,null)}function xS(n){let e=n[ws];if(!e)return Yl(n[J],n);for(;e;){let t=null;if(Wn(e))t=e[ws];else{let r=e[Je];r&&(t=r)}if(!t){for(;e&&!e[Tt]&&e!==n;)Wn(e)&&Yl(e[J],e),e=e[Xe];e===null&&(e=n),Wn(e)&&Yl(e[J],e),t=e&&e[Tt]}e=t}}function PS(n,e,t,r){let i=Je+r,s=t.length;r>0&&(t[i-1][Tt]=e),r<s-Je?(e[Tt]=t[i],Pv(t,Je+r,e)):(t.push(e),e[Tt]=null),e[Xe]=t;let o=e[Qr];o!==null&&t!==o&&z_(o,e);let c=e[Yr];c!==null&&c.insertView(n),ud(e),e[z]|=128}function z_(n,e){let t=n[ja],r=e[Xe];if(Wn(r))n[z]|=Ba.HasTransplantedViews;else{let i=r[Xe][bt];e[bt]!==i&&(n[z]|=Ba.HasTransplantedViews)}t===null?n[ja]=[e]:t.push(e)}function ch(n,e){let t=n[ja],r=t.indexOf(e);t.splice(r,1)}function bs(n,e){if(n.length<=Je)return;let t=Je+e,r=n[t];if(r){let i=r[Qr];i!==null&&i!==n&&ch(i,r),e>0&&(n[t-1][Tt]=r[Tt]);let s=Fa(n,Je+e);NS(r[J],r);let o=s[Yr];o!==null&&o.detachView(s[J]),r[Xe]=null,r[Tt]=null,r[z]&=-129}return r}function fc(n,e){if(!(e[z]&256)){let t=e[pt];t.destroyNode&&pc(n,e,t,3,null,null),xS(e)}}function Yl(n,e){if(e[z]&256)return;let t=ce(null);try{e[z]&=-129,e[z]|=256,e[ht]&&Dl(e[ht]),kS(n,e),OS(n,e),e[J].type===1&&e[pt].destroy();let r=e[Qr];if(r!==null&&Xt(e[Xe])){r!==e[Xe]&&ch(r,e);let i=e[Yr];i!==null&&i.detachView(n)}vd(e)}finally{ce(t)}}function OS(n,e){let t=n.cleanup,r=e[Jy];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Jy]=null);let i=e[En];if(i!==null){e[En]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function kS(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ds)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];wn(4,c,u);try{u.call(c)}finally{wn(5,c,u)}}else{wn(4,i,s);try{s.call(i)}finally{wn(5,i,s)}}}}}function LS(n,e,t){return FS(n,e.parent,t)}function FS(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Jt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Ot.None||s===Ot.Emulated)return null}return en(r,t)}}function Wa(n,e,t,r,i){n.insertBefore(e,t,r,i)}function G_(n,e,t){n.appendChild(e,t)}function lv(n,e,t,r,i){r!==null?Wa(n,e,t,r,i):G_(n,e,t)}function W_(n,e){return n.parentNode(e)}function VS(n,e){return n.nextSibling(e)}function US(n,e,t){return BS(n,e,t)}function jS(n,e,t){return n.type&40?en(n,t):null}var BS=jS,dv;function uh(n,e,t,r){let i=LS(n,r,e),s=e[pt],o=r.parent||e[At],c=US(o,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)lv(s,i,t[u],c,!1);else lv(s,i,t,c,!1);dv!==void 0&&dv(s,r,e,t,i)}function ps(n,e){if(e!==null){let t=e.type;if(t&3)return en(e,n);if(t&4)return Id(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ps(n,r);{let i=n[e.index];return Xt(i)?Id(-1,i):Qt(i)}}else{if(t&128)return ps(n,e.next);if(t&32)return ah(e,n)()||Qt(n[e.index]);{let r=K_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Jn(n[bt]);return ps(i,r)}else return ps(n,e.next)}}}return null}function K_(n,e){if(e!==null){let r=n[bt][At],i=e.projection;return r.projection[i]}return null}function Id(n,e){let t=Je+n+1;if(t<e.length){let r=e[t],i=r[J].firstChild;if(i!==null)return ps(r,i)}return e[Zn]}function $S(n,e,t){n.removeChild(null,e,t)}function lh(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(o&&e===0&&(c&&er(Qt(c),r),t.flags|=2),(t.flags&32)!==32)if(u&8)lh(n,e,t.child,r,i,s,!1),Hr(e,n,i,c,s);else if(u&32){let d=ah(t,r),f;for(;f=d();)Hr(e,n,i,f,s);Hr(e,n,i,c,s)}else u&16?HS(n,e,r,t,i,s):Hr(e,n,i,c,s);t=o?t.projectionNext:t.next}}function pc(n,e,t,r,i,s){lh(t,r,n.firstChild,e,i,s,!1)}function HS(n,e,t,r,i,s){let o=t[bt],u=o[At].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let f=u[d];Hr(e,n,i,f,s)}else{let d=u,f=o[Xe];k_(r)&&(d.flags|=128),lh(n,e,d,f,i,s,!0)}}function qS(n,e,t,r,i){let s=t[Zn],o=Qt(t);s!==o&&Hr(e,n,r,s,i);for(let c=Je;c<t.length;c++){let u=t[c];pc(u[J],u,n,e,r,s)}}function zS(n,e,t){n.setAttribute(e,"style",t)}function Q_(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Y_(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&nd(n,e,r),i!==null&&Q_(n,e,i),s!==null&&zS(n,e,s)}var xs={};function dh(n=1){Z_(ti(),ke(),dc()+n,!1)}function Z_(n,e,t,r){if(!r)if((e[z]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Ma(e,s,t)}else{let s=n.preOrderHooks;s!==null&&xa(e,s,0,t)}Xn(t)}function Ps(n,e=Z.Default){let t=ke();if(t===null)return te(n,e);let r=tn();return S_(r,t,lt(n),e)}function J_(n,e,t,r,i,s){let o=ce(null);try{let c=null;i&Dn.SignalBased&&(c=e[r][ly]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&Dn.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,c,s,t,r):Jv(e,c,r,s)}finally{ce(o)}}function GS(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Xn(~i);else{let s=i,o=t[++r],c=t[++r];$C(o,s);let u=e[s];c(2,u)}}}finally{Xn(-1)}}function gc(n,e,t,r,i,s,o,c,u,d,f){let g=e.blueprint.slice();return g[Jt]=i,g[z]=r|4|128|8|64,(d!==null||n&&n[z]&2048)&&(g[z]|=2048),r_(g),g[Xe]=g[As]=n,g[dt]=t,g[Kt]=o||n&&n[Kt],g[pt]=c||n&&n[pt],g[Kr]=u||n&&n[Kr]||null,g[At]=s,g[ac]=_S(),g[Is]=f,g[Kv]=d,g[bt]=e.type==2?n[bt]:g,g}function mc(n,e,t,r,i){let s=n.data[e];if(s===null)s=WS(n,e,t,r,i),BC()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=FC();s.injectorIndex=o===null?-1:o.injectorIndex}return Ms(s,!0),s}function WS(n,e,t,r,i){let s=c_(),o=u_(),c=o?s:s&&s.parent,u=n.data[e]=JS(n,c,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function X_(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function eI(n,e,t,r,i){let s=dc(),o=r&2;try{Xn(-1),o&&e.length>Ct&&Z_(n,e,Ct,!1),wn(o?2:0,i),t(r,i)}finally{Xn(s),wn(o?3:1,i)}}function tI(n,e,t){if(Yv(e)){let r=ce(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=n.data[o];if(c.contentQueries){let u=t[o];c.contentQueries(1,u,o)}}}finally{ce(r)}}}function nI(n,e,t){a_()&&(n0(n,e,t,en(t,e)),(t.flags&64)===64&&aI(n,e,t))}function rI(n,e,t=en){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?t(e,n):n[o];n[i++]=c}}}function iI(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=hh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function hh(n,e,t,r,i,s,o,c,u,d,f){let g=Ct+r,_=g+i,I=KS(g,_),A=typeof d=="function"?d():d;return I[J]={type:n,blueprint:I,template:t,queries:null,viewQuery:c,declTNode:e,data:I.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:f}}function KS(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:xs);return t}function QS(n,e,t,r){let s=r.get(CS,B_)||t===Ot.ShadowDom,o=n.selectRootElement(e,s);return YS(o),o}function YS(n){ZS(n)}var ZS=()=>null;function JS(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,c=0;return OC()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function hv(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let c,u=Dn.None;Array.isArray(o)?(c=o[0],u=o[1]):c=o;let d=s;if(i!==null){if(!i.hasOwnProperty(s))continue;d=i[s]}n===0?fv(r,t,d,c,u):fv(r,t,d,c)}return r}function fv(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function XS(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,c=[],u=null,d=null;for(let f=r;f<i;f++){let g=s[f],_=t?t.get(g):null,I=_?_.inputs:null,A=_?_.outputs:null;u=hv(0,g.inputs,f,u,I),d=hv(1,g.outputs,f,d,A);let N=u!==null&&o!==null&&!Bd(e)?d0(u,f,o):null;c.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=d}function sI(n,e,t,r){if(a_()){let i=r===null?null:{"":-1},s=i0(n,t),o,c;s===null?o=c=null:[o,c]=s,o!==null&&oI(n,e,t,o,i,c),i&&s0(t,r,i)}t.mergedAttrs=jd(t.mergedAttrs,t.attrs)}function oI(n,e,t,r,i,s){for(let d=0;d<r.length;d++)tS(D_(t,e),n,r[d].type);a0(t,n.data.length,r.length);for(let d=0;d<r.length;d++){let f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,c=!1,u=X_(n,e,r.length,null);for(let d=0;d<r.length;d++){let f=r[d];t.mergedAttrs=jd(t.mergedAttrs,f.hostAttrs),c0(n,t,e,u,f),o0(u,f,i),f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!c&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),c=!0),u++}XS(n,t,s)}function e0(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let c=~e.index;t0(o)!=c&&o.push(c),o.push(t,r,s)}}function t0(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function n0(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;zd(t)&&u0(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||D_(t,e),er(r,e);let o=t.initialInputs;for(let c=i;c<s;c++){let u=n.data[c],d=Ts(e,n,c,t);if(er(d,e),o!==null&&l0(e,c-i,d,u,t,o),Rs(u)){let f=Ns(t.index,e);f[dt]=Ts(e,n,c,t)}}}function aI(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=HC();try{Xn(s);for(let c=r;c<i;c++){let u=n.data[c],d=e[c];ld(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&r0(u,d)}}finally{Xn(-1),ld(o)}}function r0(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function i0(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(eC(e,o.selectors,!1))if(r||(r=[]),Rs(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let u=c.length;wd(n,e,u)}else r.unshift(o),wd(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function wd(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function s0(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new U(-301,!1);r.push(e[i],s)}}}function o0(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Rs(e)&&(t[""]=n)}}function a0(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function c0(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Qn(i.type,!0)),o=new Ds(s,Rs(i),Ps);n.blueprint[r]=o,t[r]=o,e0(n,e,r,X_(n,t,i.hostVars,xs),i)}function u0(n,e,t){let r=en(e,n),i=iI(t),s=n[Kt].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let c=yc(n,gc(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=c}function l0(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;){let u=o[c++],d=o[c++],f=o[c++],g=o[c++];J_(r,t,u,d,f,g)}}function d0(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let c=0;c<o.length;c+=3)if(o[c]===e){r.push(s,o[c+1],o[c+2],t[i+1]);break}}i+=2}return r}function cI(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function uI(n,e){let t=n.contentQueries;if(t!==null){let r=ce(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let c=n.data[o];h_(s),c.contentQueries(2,e[o],o)}}}finally{ce(r)}}}function yc(n,e){return n[ws]?n[Xy][Tt]=e:n[ws]=e,n[Xy]=e,e}function Ed(n,e,t){h_(0);let r=ce(null);try{e(n,t)}finally{ce(r)}}function h0(n,e){let t=n[Kr],r=t?t.get(Yt,null):null;r&&r.handleError(e)}function lI(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],c=t[s++],u=t[s++],d=e[o],f=n.data[o];J_(f,d,r,c,u,i)}}function f0(n,e,t){let r=SC(e,n);RS(n[pt],r,t)}function p0(n,e){let t=Ns(e,n),r=t[J];g0(r,t);let i=t[Jt];i!==null&&t[Is]===null&&(t[Is]=oh(i,t[Kr])),fh(r,t,t[dt])}function g0(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function fh(n,e,t){Wd(e);try{let r=n.viewQuery;r!==null&&Ed(1,r,t);let i=n.template;i!==null&&eI(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Yr]?.finishViewCreation(n),n.staticContentQueries&&uI(n,e),n.staticViewQueries&&Ed(2,n.viewQuery,t);let s=n.components;s!==null&&m0(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[z]&=-5,Kd()}}function m0(n,e){for(let t=0;t<e.length;t++)p0(n,e[t])}function dI(n,e,t,r){let i=ce(null);try{let s=e.tView,c=n[z]&4096?4096:16,u=gc(n,s,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];u[Qr]=d;let f=n[Yr];return f!==null&&(u[Yr]=f.createEmbeddedView(s)),fh(s,u,t),u}finally{ce(i)}}function y0(n,e){let t=Je+e;if(t<n.length)return n[t]}function Ka(n,e){return!e||e.firstChild===null||k_(n)}function ph(n,e,t,r=!0){let i=e[J];if(PS(i,e,n,t),r){let o=Id(t,n),c=e[pt],u=W_(c,n[Zn]);u!==null&&MS(i,n[At],c,e,u,o)}let s=e[Is];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function v0(n,e){let t=bs(n,e);return t!==void 0&&fc(t[J],t),t}function Qa(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Qt(s)),Xt(s)&&_0(s,r);let o=t.type;if(o&8)Qa(n,e,t.child,r);else if(o&32){let c=ah(t,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=K_(e,t);if(Array.isArray(c))r.push(...c);else{let u=Jn(e[bt]);Qa(u[J],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function _0(n,e){for(let t=Je;t<n.length;t++){let r=n[t],i=r[J].firstChild;i!==null&&Qa(r[J],r,i,e)}n[Zn]!==n[Jt]&&e.push(n[Zn])}var hI=[];function I0(n){return n[ht]??w0(n)}function w0(n){let e=hI.pop()??Object.create(D0);return e.lView=n,e}function E0(n){n.lView[ht]!==n&&(n.lView=null,hI.push(n))}var D0=Ie(L({},Il),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{lc(n.lView)},consumerOnSignalRead(){this.lView[ht]=this}});function T0(n){let e=n[ht]??Object.create(b0);return e.lView=n,e}var b0=Ie(L({},Il),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Jn(n.lView);for(;e&&!fI(e[J]);)e=Jn(e);e&&i_(e)},consumerOnSignalRead(){this.lView[ht]=this}});function fI(n){return n.type!==2}var C0=100;function pI(n,e=!0,t=0){let r=n[Kt],i=r.rendererFactory,s=!1;s||i.begin?.();try{S0(n,t)}catch(o){throw e&&h0(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function S0(n,e){let t=l_();try{tv(!0),Dd(n,e);let r=0;for(;uc(n);){if(r===C0)throw new U(103,!1);r++,Dd(n,1)}}finally{tv(t)}}function A0(n,e,t,r){let i=e[z];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Kt].inlineEffectRunner?.flush(),Wd(e);let c=!0,u=null,d=null;s||(fI(n)?(d=I0(e),u=wl(d)):dy()===null?(c=!1,d=T0(e),u=wl(d)):e[ht]&&(Dl(e[ht]),e[ht]=null));try{r_(e),jC(n.bindingStartIndex),t!==null&&eI(n,e,t,2,r);let f=(i&3)===3;if(!s)if(f){let I=n.preOrderCheckHooks;I!==null&&Ma(e,I,null)}else{let I=n.preOrderHooks;I!==null&&xa(e,I,0,null),Gl(e,0)}if(o||R0(e),gI(e,0),n.contentQueries!==null&&uI(n,e),!s)if(f){let I=n.contentCheckHooks;I!==null&&Ma(e,I)}else{let I=n.contentHooks;I!==null&&xa(e,I,1),Gl(e,1)}GS(n,e);let g=n.components;g!==null&&yI(e,g,0);let _=n.viewQuery;if(_!==null&&Ed(2,_,r),!s)if(f){let I=n.viewCheckHooks;I!==null&&Ma(e,I)}else{let I=n.viewHooks;I!==null&&xa(e,I,2),Gl(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[zl]){for(let I of e[zl])I();e[zl]=null}s||(e[z]&=-73)}catch(f){throw s||lc(e),f}finally{d!==null&&(hy(d,u),c&&E0(d)),Kd()}}function gI(n,e){for(let t=F_(n);t!==null;t=V_(t))for(let r=Je;r<t.length;r++){let i=t[r];mI(i,e)}}function R0(n){for(let e=F_(n);e!==null;e=V_(e)){if(!(e[z]&Ba.HasTransplantedViews))continue;let t=e[ja];for(let r=0;r<t.length;r++){let i=t[r];i_(i)}}}function N0(n,e,t){let r=Ns(e,n);mI(r,t)}function mI(n,e){Gd(n)&&Dd(n,e)}function Dd(n,e){let r=n[J],i=n[z],s=n[ht],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&El(s)),o||=!1,s&&(s.dirty=!1),n[z]&=-9217,o)A0(r,n,r.template,n[dt]);else if(i&8192){gI(n,1);let c=r.components;c!==null&&yI(n,c,1)}}function yI(n,e,t){for(let r=0;r<e.length;r++)N0(n,e[r],t)}function vI(n,e){let t=l_()?64:1088;for(n[Kt].changeDetectionScheduler?.notify(e);n;){n[z]|=t;let r=Jn(n);if(ad(n)&&!r)return n;n=r}return null}var Zr=class{get rootNodes(){let e=this._lView,t=e[J];return Qa(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dt]}set context(e){this._lView[dt]=e}get destroyed(){return(this._lView[z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Xe];if(Xt(e)){let t=e[Ua],r=t?t.indexOf(this):-1;r>-1&&(bs(e,r),Fa(t,r))}this._attachedToViewContainer=!1}fc(this._lView[J],this._lView)}onDestroy(e){s_(this._lView,e)}markForCheck(){vI(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[z]&=-129}reattach(){ud(this._lView),this._lView[z]|=128}detectChanges(){this._lView[z]|=1024,pI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ad(this._lView),t=this._lView[Qr];t!==null&&!e&&ch(t,this._lView),q_(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let t=ad(this._lView),r=this._lView[Qr];r!==null&&!t&&z_(r,this._lView),ud(this._lView)}};var s2=new RegExp(`^(\\d+)*(${TS}|${DS})*(.*)`);var M0=()=>null;function Ya(n,e){return M0(n,e)}var Jr=class{},vc=new H("",{providedIn:"root",factory:()=>!1});var _I=new H(""),II=new H(""),Td=class{},Za=class{};function x0(n){let e=Error(`No component factory found for ${st(n)}.`);return e[P0]=n,e}var P0="ngComponent";var bd=class{resolveComponentFactory(e){throw x0(e)}},Xr=class{static{this.NULL=new bd}},ei=class{};var O0=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>null})}}return n})();function Cd(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=$y(i,c);else if(s==2){let u=c,d=e[++o];r=$y(r,u+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ja=class extends Xr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Yn(e);return new Cs(t,this.ngModule)}};function pv(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,c=s?i[1]:Dn.None;e?t.push({propName:o,templateName:r,isSignal:(c&Dn.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function k0(n){let e=n.toLowerCase();return e==="svg"?bC:e==="math"?CC:null}var Cs=class extends Za{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=pv(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return pv(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=iC(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=ce(null);try{i=i||this.ngModule;let o=i instanceof ft?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new dd(e,o):e,u=c.get(ei,null);if(u===null)throw new U(407,!1);let d=c.get(O0,null),f=c.get(Jr,null),g={rendererFactory:u,sanitizer:d,inlineEffectRunner:null,changeDetectionScheduler:f},_=u.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",A=r?QS(_,r,this.componentDef.encapsulation,c):H_(_,I,k0(I)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;A!==null&&(R=oh(A,c,!0));let F=hh(0,null,null,1,0,null,null,null,null,null,null),B=gc(null,F,null,N,null,null,g,_,c,null,R);Wd(B);let X,fe,Ce=null;try{let Y=this.componentDef,E,m=null;Y.findHostDirectiveDefs?(E=[],m=new Map,Y.findHostDirectiveDefs(Y,E,m),E.push(Y)):E=[Y];let y=L0(B,A);Ce=F0(y,A,Y,E,B,g,_),fe=n_(F,Ct),A&&j0(_,Y,A,r),t!==void 0&&B0(fe,this.ngContentSelectors,t),X=U0(Ce,Y,E,m,B,[$0]),fh(F,B,null)}catch(Y){throw Ce!==null&&vd(Ce),vd(B),Y}finally{Kd()}return new Sd(this.componentType,X,nh(fe,B),B,fe)}finally{ce(s)}}},Sd=class extends Td{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Zr(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;lI(s[J],s,i,e,t),this.previousInputValues.set(e,t);let o=Ns(this._tNode.index,s);vI(o,1)}}get injector(){return new Kn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function L0(n,e){let t=n[J],r=Ct;return n[r]=e,mc(t,r,2,"#host",null)}function F0(n,e,t,r,i,s,o){let c=i[J];V0(r,n,e,o);let u=null;e!==null&&(u=oh(e,i[Kr]));let d=s.rendererFactory.createRenderer(e,t),f=16;t.signals?f=4096:t.onPush&&(f=64);let g=gc(i,iI(t),null,f,i[n.index],n,s,d,null,null,u);return c.firstCreatePass&&wd(c,n,r.length-1),yc(i,g),i[n.index]=g}function V0(n,e,t,r){for(let i of n)e.mergedAttrs=jd(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Cd(e,e.mergedAttrs,!0),t!==null&&Y_(r,t,e))}function U0(n,e,t,r,i,s){let o=tn(),c=i[J],u=en(o,i);oI(c,i,o,t,null,r);for(let f=0;f<t.length;f++){let g=o.directiveStart+f,_=Ts(i,c,g,o);er(_,i)}aI(c,i,o),u&&er(u,i);let d=Ts(i,c,o.directiveStart+o.componentOffset,o);if(n[dt]=i[dt]=d,s!==null)for(let f of s)f(d,e);return tI(c,o,i),d}function j0(n,e,t,r){if(r)nd(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=sC(e.selectors[0]);i&&nd(n,t,i),s&&s.length>0&&Q_(n,t,s.join(" "))}}function B0(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function $0(){let n=tn();Zd(ke()[J],n)}var _c=(()=>{class n{static{this.__NG_ELEMENT_ID__=H0}}return n})();function H0(){let n=tn();return z0(n,ke())}var q0=_c,wI=class extends q0{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return nh(this._hostTNode,this._hostLView)}get injector(){return new Kn(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jd(this._hostTNode,this._hostLView);if(I_(e)){let t=Ha(e,this._hostLView),r=$a(e),i=t[J].data[r+8];return new Kn(i,t)}else return new Kn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=gv(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Je}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Ya(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(c,i,Ka(this._hostTNode,o)),c}createComponent(e,t,r,i,s){let o=e&&!wC(e),c;if(o)c=t;else{let A=t||{};c=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new Cs(Yn(e)),d=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?d:this.parentInjector).get(ft,null);N&&(s=N)}let f=Yn(u.componentType??{}),g=Ya(this._lContainer,f?.id??null),_=g?.firstChild??null,I=u.create(d,i,_,s);return this.insertImpl(I.hostView,c,Ka(this._hostTNode,g)),I}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(RC(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Xe],d=new wI(u,u[At],u[Xe]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return ph(o,i,s,r),e.attachToViewContainerRef(),Pv(Zl(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=gv(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=bs(this._lContainer,t);r&&(Fa(Zl(this._lContainer),t),fc(r[J],r))}detach(e){let t=this._adjustIndex(e,-1),r=bs(this._lContainer,t);return r&&Fa(Zl(this._lContainer),t)!=null?new Zr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function gv(n){return n[Ua]}function Zl(n){return n[Ua]||(n[Ua]=[])}function z0(n,e){let t,r=e[n.index];return Xt(r)?t=r:(t=cI(r,e,null,n),e[n.index]=t,yc(e,t)),W0(t,e,n,r),new wI(t,n,e)}function G0(n,e){let t=n[pt],r=t.createComment(""),i=en(e,n),s=W_(t,i);return Wa(t,s,r,VS(t,i),!1),r}var W0=Y0,K0=()=>!1;function Q0(n,e,t){return K0(n,e,t)}function Y0(n,e,t,r){if(n[Zn])return;let i;t.type&8?i=Qt(r):i=G0(e,t),n[Zn]=i}var mv=new Set;function Ic(n){mv.has(n)||(mv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Tn=class{},Ss=class{};var Ad=class extends Tn{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ja(this);let s=$v(e);this._bootstrapComponents=$_(s.bootstrap),this._r3Injector=N_(e,t,[{provide:Tn,useValue:this},{provide:Xr,useValue:this.componentFactoryResolver},...r],st(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Rd=class extends Ss{constructor(e){super(),this.moduleType=e}create(e){return new Ad(this.moduleType,e,[])}};var Xa=class extends Tn{constructor(e){super(),this.componentFactoryResolver=new Ja(this),this.instance=null;let t=new _s([...e.providers,{provide:Tn,useValue:this},{provide:Xr,useValue:this.componentFactoryResolver}],e.parent||qd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function gh(n,e,t=null){return new Xa({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Z0(n,e,t){return n[e]=t}function mh(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function J0(n){return(n.flags&32)===32}function X0(n,e,t,r,i,s,o,c,u){let d=e.consts,f=mc(e,n,4,o||null,c||null);sI(e,t,f,Es(d,u)),Zd(e,f);let g=f.tView=hh(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}function yv(n,e,t,r,i,s,o,c,u,d){let f=t+Ct,g=e.firstCreatePass?X0(f,e,n,r,i,s,o,c,u):e.data[f];Ms(g,!1);let _=eA(e,n,g,t);Qd()&&uh(e,n,_,g),er(_,n);let I=cI(_,n,_,g);return n[f]=I,yc(n,I),Q0(I,g,n),Zv(g)&&nI(e,n,g),u!=null&&rI(n,g,d),g}var eA=tA;function tA(n,e,t,r){return Yd(!0),e[pt].createComment("")}var gs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(gs||{}),nA=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}}return n})(),vv=class n{constructor(){this.ngZone=O(ve),this.scheduler=O(Jr),this.errorHandler=O(Yt,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[gs.EarlyRead,gs.Write,gs.MixedReadWrite,gs.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}};function rA(n,e,t,r){return mh(n,d_(),t)?e+Nv(t)+r:xs}function _v(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";lI(n,t,s[o],o,r)}var Nd=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function Jl(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function iA(n,e,t){let r,i,s=0,o=n.length-1,c=void 0;if(Array.isArray(e)){let u=e.length-1;for(;s<=o&&s<=u;){let d=n.at(s),f=e[s],g=Jl(s,d,s,f,t);if(g!==0){g<0&&n.updateValue(s,f),s++;continue}let _=n.at(o),I=e[u],A=Jl(o,_,u,I,t);if(A!==0){A<0&&n.updateValue(o,I),o--,u--;continue}let N=t(s,d),R=t(o,_),F=t(s,f);if(Object.is(F,R)){let B=t(u,I);Object.is(B,N)?(n.swap(s,o),n.updateValue(o,I),u--,o--):n.move(o,s),n.updateValue(s,f),s++;continue}if(r??=new ec,i??=wv(n,s,o,t),Md(n,r,s,F))n.updateValue(s,f),s++,o++;else if(i.has(F))r.set(N,n.detach(s)),o--;else{let B=n.create(s,e[s]);n.attach(s,B),s++,o++}}for(;s<=u;)Iv(n,r,t,s,e[s]),s++}else if(e!=null){let u=e[Symbol.iterator](),d=u.next();for(;!d.done&&s<=o;){let f=n.at(s),g=d.value,_=Jl(s,f,s,g,t);if(_!==0)_<0&&n.updateValue(s,g),s++,d=u.next();else{r??=new ec,i??=wv(n,s,o,t);let I=t(s,g);if(Md(n,r,s,I))n.updateValue(s,g),s++,o++,d=u.next();else if(!i.has(I))n.attach(s,n.create(s,g)),s++,o++,d=u.next();else{let A=t(s,f);r.set(A,n.detach(s)),o--}}}for(;!d.done;)Iv(n,r,t,n.length,d.value),d=u.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(u=>{n.destroy(u)})}function Md(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function Iv(n,e,t,r,i){if(Md(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function wv(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var ec=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};var xd=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Je}};function EI(n,e){return e}var Pd=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function DI(n,e,t,r,i,s,o,c,u,d,f,g,_){Ic("NgControlFlow");let I=ke(),A=ti(),N=u!==void 0,R=ke(),F=c?o.bind(R[bt][dt]):o,B=new Pd(N,F);R[Ct+n]=B,yv(I,A,n+1,e,t,r,i,Es(A.consts,s)),N&&yv(I,A,n+2,u,d,f,g,Es(A.consts,_))}var Od=class extends Nd{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Je}at(e){return this.getLView(e)[dt].$implicit}attach(e,t){let r=t[Is];this.needsIndexUpdate||=e!==this.length,ph(this.lContainer,t,e,Ka(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,sA(this.lContainer,e)}create(e,t){let r=Ya(this.lContainer,this.templateTNode.tView.ssrId),i=dI(this.hostLView,this.templateTNode,new xd(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){fc(e[J],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[dt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[dt].$index=e}getLView(e){return oA(this.lContainer,e)}};function TI(n){let e=ce(null),t=dc();try{let r=ke(),i=r[J],s=r[t],o=t+1,c=Ev(r,o);if(s.liveCollection===void 0){let d=Dv(i,o);s.liveCollection=new Od(c,r,d)}else s.liveCollection.reset();let u=s.liveCollection;if(iA(u,n,s.trackByFn),u.updateIndexes(),s.hasEmptyBlock){let d=d_(),f=u.length===0;if(mh(r,d,f)){let g=t+2,_=Ev(r,g);if(f){let I=Dv(i,g),A=Ya(_,I.tView.ssrId),N=dI(r,I,void 0,{dehydratedView:A});ph(_,N,0,Ka(I,A))}else v0(_,0)}}}finally{ce(e)}}function Ev(n,e){return n[e]}function sA(n,e){return bs(n,e)}function oA(n,e){return y0(n,e)}function Dv(n,e){return n_(n,e)}function aA(n,e,t,r,i,s){let o=e.consts,c=Es(o,i),u=mc(e,n,2,r,c);return sI(e,t,u,Es(o,s)),u.attrs!==null&&Cd(u,u.attrs,!1),u.mergedAttrs!==null&&Cd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ri(n,e,t,r){let i=ke(),s=ti(),o=Ct+n,c=i[pt],u=s.firstCreatePass?aA(o,s,i,e,t,r):s.data[o],d=cA(s,i,u,c,e,n);i[o]=d;let f=Zv(u);return Ms(u,!0),Y_(c,d,u),!J0(u)&&Qd()&&uh(s,i,d,u),MC()===0&&er(d,i),xC(),f&&(nI(s,i,u),tI(s,u,i)),r!==null&&rI(i,u),ri}function ii(){let n=tn();u_()?VC():(n=n.parent,Ms(n,!1));let e=n;kC(e)&&LC(),PC();let t=ti();return t.firstCreatePass&&(Zd(t,n),Yv(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&QC(e)&&_v(t,e,ke(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&YC(e)&&_v(t,e,ke(),e.stylesWithoutHost,!1),ii}function yh(n,e,t,r){return ri(n,e,t,r),ii(),yh}var cA=(n,e,t,r,i,s)=>(Yd(!0),H_(r,i,zC()));var tc="en-US";var uA=tc;function lA(n){typeof n=="string"&&(uA=n.toLowerCase().replace(/_/g,"-"))}function dA(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function vh(n,e=""){let t=ke(),r=ti(),i=n+Ct,s=r.firstCreatePass?mc(r,i,1,e,null):r.data[i],o=hA(r,t,s,e,n);t[i]=o,Qd()&&uh(r,t,o,s),Ms(s,!1)}var hA=(n,e,t,r,i)=>(Yd(!0),AS(e[pt],r));function _h(n,e,t){let r=ke(),i=rA(r,n,e,t);return i!==xs&&f0(r,dc(),i),_h}var fA=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=zv(!1,t.type),i=r.length>0?gh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=$({token:n,providedIn:"environment",factory:()=>new n(te(ft))})}}return n})();function wc(n){Ic("NgStandalone"),n.getStandaloneInjector=e=>e.get(fA).getOrCreateStandaloneInjector(n)}function pA(n,e){let t=n[e];return t===xs?void 0:t}function gA(n,e,t,r,i,s){let o=e+t;return mh(n,o,i)?Z0(n,o+1,s?r.call(s,i):r(i)):pA(n,o+1)}function bI(n,e){let t=ti(),r,i=n+Ct;t.firstCreatePass?(r=mA(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Qn(r.type,!0)),o,c=tt(Ps);try{let u=qa(!1),d=s();return qa(u),dA(t,ke(),i,d),d}finally{tt(c)}}function mA(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function CI(n,e,t){let r=n+Ct,i=ke(),s=AC(i,r);return yA(i,r)?gA(i,UC(),e,s.transform,t,s):s.transform(t)}function yA(n,e){return n[J].data[e].pure}var bn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},SI=new bn("18.2.13");var Ec=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var AI=new H("");function si(n){return!!n&&typeof n.then=="function"}function Ih(n){return!!n&&typeof n.subscribe=="function"}var RI=new H(""),NI=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=O(RI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(si(s))t.push(s);else if(Ih(s)){let o=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wh=new H("");function vA(){fy(()=>{throw new U(600,!1)})}function _A(n){return n.isBoundToModule}var IA=10;function wA(n,e,t){try{let r=t();return si(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var nr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(mS),this.afterRenderManager=O(nA),this.zonelessEnabled=O(vc),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ye,this.afterTick=new Ye,this.componentTypes=[],this.components=[],this.isStable=O(ni).hasPendingTasks.pipe(ee(t=>!t)),this._injector=O(ft)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Za;if(!this._injector.get(NI).done){let _=!i&&Bv(t),I=!1;throw new U(405,I)}let o;i?o=t:o=this._injector.get(Xr).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let c=_A(o)?void 0:this._injector.get(Tn),u=r||o.selector,d=o.create(St.NULL,[],u,c),f=d.location.nativeElement,g=d.injector.get(AI,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Pa(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new U(101,!1);let t=ce(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ce(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ei,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<IA;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)EA(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>uc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Pa(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(wh,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Pa(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new U(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Pa(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function EA(n,e,t,r){if(!t&&!uc(n))return;pI(n,e,t&&!r?0:1)}var kd=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Eh=(()=>{class n{compileModuleSync(t){return new Rd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=$v(t),s=$_(i.declarations).reduce((o,c)=>{let u=Yn(c);return u&&o.push(new Cs(u)),o},[]);return new kd(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var DA=(()=>{class n{constructor(){this.zone=O(ve),this.changeDetectionScheduler=O(Jr),this.applicationRef=O(nr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),TA=new H("",{factory:()=>!1});function MI({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ve(Ie(L({},PI()),{scheduleInRootZone:t})),[{provide:ve,useFactory:n},{provide:Wr,multi:!0,useFactory:()=>{let r=O(DA,{optional:!0});return()=>r.initialize()}},{provide:Wr,multi:!0,useFactory:()=>{let r=O(bA);return()=>{r.initialize()}}},e===!0?{provide:_I,useValue:!0}:[],{provide:II,useValue:t??M_}]}function xI(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=MI({ngZoneFactory:()=>{let i=PI(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ic("NgZone_CoalesceEvent"),new ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Cn([{provide:TA,useValue:!0},{provide:vc,useValue:!1},r])}function PI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var bA=(()=>{class n{constructor(){this.subscription=new De,this.initialized=!1,this.zone=O(ve),this.pendingTasks=O(ni)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var CA=(()=>{class n{constructor(){this.appRef=O(nr),this.taskService=O(ni),this.ngZone=O(ve),this.zonelessEnabled=O(vc),this.disableScheduling=O(_I,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new De,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ga):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(II,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof yd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?ov:P_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ga+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ov(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function SA(){return typeof $localize<"u"&&$localize.locale||tc}var Dh=new H("",{providedIn:"root",factory:()=>O(Dh,Z.Optional|Z.SkipSelf)||SA()});var Ld=new H("");function Ra(n){return!n.moduleRef}function AA(n){let e=Ra(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ve);return t.run(()=>{Ra(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Yt,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Ra(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Ld);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Ld);o.add(s),n.moduleRef.onDestroy(()=>{Pa(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return wA(r,t,()=>{let s=e.get(NI);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Dh,tc);if(lA(o||tc),Ra(n)){let c=e.get(nr);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return RA(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function RA(n,e){let t=n.injector.get(nr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new U(-403,!1);e.push(n)}var Oa=null;function NA(n=[],e){return St.create({name:e,providers:[{provide:oc,useValue:"platform"},{provide:Ld,useValue:new Set([()=>Oa=null])},...n]})}function MA(n=[]){if(Oa)return Oa;let e=NA(n);return Oa=e,vA(),xA(e),e}function xA(n){n.get(ih,null)?.forEach(t=>t())}var oi=(()=>{class n{static{this.__NG_ELEMENT_ID__=PA}}return n})();function PA(n){return OA(tn(),ke(),(n&16)===16)}function OA(n,e,t){if(zd(n)&&!t){let r=Ns(n.index,e);return new Zr(r,r)}else if(n.type&175){let r=e[bt];return new Zr(r,e)}return null}function OI(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=MA(r),s=[MI({}),{provide:Jr,useExisting:CA},...t||[]],o=new Xa({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return AA({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Th(n){let e=ce(null);try{return n()}finally{ce(e)}}var jI=null;function ai(){return jI}function BI(n){jI??=n}var Dc=class{};var gt=new H(""),$I=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>O(UA),providedIn:"platform"})}}return n})();var UA=(()=>{class n extends $I{constructor(){super(),this._doc=O(gt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ai().getBaseHref(this._doc)}onPopState(t){let r=ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function HI(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function kI(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function rr(n){return n&&n[0]!=="?"?"?"+n:n}var bc=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>O(qI),providedIn:"root"})}}return n})(),jA=new H(""),qI=(()=>{class n extends bc{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(gt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return HI(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+rr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+rr(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+rr(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(te($I),te(jA,8))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ks=(()=>{class n{constructor(t){this._subject=new Ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=HA(kI(LI(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rr(r))}normalize(t){return n.stripTrailingSlash($A(this._basePath,LI(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=rr}static{this.joinWithSlash=HI}static{this.stripTrailingSlash=kI}static{this.\u0275fac=function(r){return new(r||n)(te(bc))}}static{this.\u0275prov=$({token:n,factory:()=>BA(),providedIn:"root"})}}return n})();function BA(){return new ks(te(bc))}function $A(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function LI(n){return n.replace(/\/index.html$/,"")}function HA(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function zI(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}function qA(n,e){return new U(2100,!1)}var bh=class{createSubscription(e,t){return Th(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Th(()=>e.unsubscribe())}},Ch=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},zA=new Ch,GA=new bh,GI=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(si(t))return zA;if(Ih(t))return GA;throw qA(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(Ps(oi,16))}}static{this.\u0275pipe=Vv({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var WI="browser",WA="server";function Sh(n){return n===WA}var Tc=class{};var Nh=class extends Dc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Mh=class n extends Nh{static makeCurrent(){BI(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=KA();return t==null?null:QA(t)}resetBaseElement(){Ls=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return zI(document.cookie,e)}},Ls=null;function KA(){return Ls=Ls||document.querySelector("base"),Ls?Ls.getAttribute("href"):null}function QA(n){return new URL(n,document.baseURI).pathname}var YA=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),xh=new H(""),ZI=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(te(xh),te(ve))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Cc=class{constructor(e){this._doc=e}},Ah="ng-app-id",JI=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Sh(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Ah}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Ah),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Ah,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(te(gt),te(rh),te(sh,8),te(Sn))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Rh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Oh=/%COMP%/g,XI="%COMP%",ZA=`_nghost-${XI}`,JA=`_ngcontent-${XI}`,XA=!0,eR=new H("",{providedIn:"root",factory:()=>XA});function tR(n){return JA.replace(Oh,n)}function nR(n){return ZA.replace(Oh,n)}function ew(n,e){return e.map(t=>t.replace(Oh,n))}var KI=(()=>{class n{constructor(t,r,i,s,o,c,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Sh(c),this.defaultRenderer=new Fs(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ot.ShadowDom&&(r=Ie(L({},r),{encapsulation:Ot.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Sc?i.applyToHost(t):i instanceof Vs&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Ot.Emulated:s=new Sc(u,d,r,this.appId,f,o,c,g);break;case Ot.ShadowDom:return new Ph(u,d,t,r,o,c,this.nonce,g);default:s=new Vs(u,d,r,f,o,c,g);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(te(ZI),te(JI),te(rh),te(eR),te(gt),te(Sn),te(ve),te(sh))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Fs=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Rh[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(QI(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(QI(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Rh[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Rh[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(tr.DashCase|tr.Important)?e.style.setProperty(t,r,i&tr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&tr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=ai().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function QI(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ph=class extends Fs{constructor(e,t,r,i,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=ew(i.id,i.styles);for(let f of d){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vs=class extends Fs{constructor(e,t,r,i,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?ew(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Sc=class extends Vs{constructor(e,t,r,i,s,o,c,u){let d=i+"-"+r.id;super(e,t,r,s,o,c,u,d),this.contentAttr=tR(d),this.hostAttr=nR(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},rR=(()=>{class n extends Cc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(te(gt))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),YI=["alt","control","meta","shift"],iR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sR={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},oR=(()=>{class n extends Cc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ai().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),YI.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=iR[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),YI.forEach(o=>{if(o!==i){let c=sR[o];c(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(te(gt))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function tw(n,e){return OI(L({rootComponent:n},aR(e)))}function aR(n){return{appProviders:[...hR,...n?.providers??[]],platformProviders:dR}}function cR(){Mh.makeCurrent()}function uR(){return new Yt}function lR(){return j_(document),document}var dR=[{provide:Sn,useValue:WI},{provide:ih,useValue:cR,multi:!0},{provide:gt,useFactory:lR,deps:[]}];var hR=[{provide:oc,useValue:"root"},{provide:Yt,useFactory:uR,deps:[]},{provide:xh,useClass:rR,multi:!0,deps:[gt,ve,Sn]},{provide:xh,useClass:oR,multi:!0,deps:[gt]},KI,JI,ZI,{provide:ei,useExisting:KI},{provide:Tc,useClass:YA,deps:[]},[]];var nw=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(te(gt))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var K="primary",to=Symbol("RouteTitle"),Uh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function fi(n){return new Uh(n)}function pR(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function gR(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Lt(n[t],e[t]))return!1;return!0}function Lt(n,e){let t=n?jh(n):void 0,r=e?jh(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!lw(n[i],e[i]))return!1;return!0}function jh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function lw(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function dw(n){return n.length>0?n[n.length-1]:null}function An(n){return Ul(n)?n:si(n)?Se(Promise.resolve(n)):G(n)}var mR={exact:fw,subset:pw},hw={exact:yR,subset:vR,ignored:()=>!0};function rw(n,e,t){return mR[t.paths](n.root,e.root,t.matrixParams)&&hw[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function yR(n,e){return Lt(n,e)}function fw(n,e,t){if(!sr(n.segments,e.segments)||!Nc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!fw(n.children[r],e.children[r],t))return!1;return!0}function vR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lw(n[t],e[t]))}function pw(n,e,t){return gw(n,e,e.segments,t)}function gw(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!sr(i,t)||e.hasChildren()||!Nc(i,t,r))}else if(n.segments.length===t.length){if(!sr(n.segments,t)||!Nc(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!pw(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!sr(n.segments,i)||!Nc(n.segments,i,r)||!n.children[K]?!1:gw(n.children[K],e,s,r)}}function Nc(n,e,t){return e.every((r,i)=>hw[t](n[i].parameters,r.parameters))}var rn=class{constructor(e=new ge([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=fi(this.queryParams),this._queryParamMap}toString(){return wR.serialize(this)}},ge=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mc(this)}},ir=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=fi(this.parameters),this._parameterMap}toString(){return yw(this)}};function _R(n,e){return sr(n,e)&&n.every((t,r)=>Lt(t.parameters,e[r].parameters))}function sr(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function IR(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===K&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==K&&(t=t.concat(e(i,r)))}),t}var ff=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>new zs,providedIn:"root"})}}return n})(),zs=class{parse(e){let t=new $h(e);return new rn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Us(e.root,!0)}`,r=TR(e.queryParams),i=typeof e.fragment=="string"?`#${ER(e.fragment)}`:"";return`${t}${r}${i}`}},wR=new zs;function Mc(n){return n.segments.map(e=>yw(e)).join("/")}function Us(n,e){if(!n.hasChildren())return Mc(n);if(e){let t=n.children[K]?Us(n.children[K],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==K&&r.push(`${i}:${Us(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=IR(n,(r,i)=>i===K?[Us(n.children[K],!1)]:[`${i}:${Us(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[K]!=null?`${Mc(n)}/${t[0]}`:`${Mc(n)}/(${t.join("//")})`}}function mw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ac(n){return mw(n).replace(/%3B/gi,";")}function ER(n){return encodeURI(n)}function Bh(n){return mw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xc(n){return decodeURIComponent(n)}function iw(n){return xc(n.replace(/\+/g,"%20"))}function yw(n){return`${Bh(n.path)}${DR(n.parameters)}`}function DR(n){return Object.entries(n).map(([e,t])=>`;${Bh(e)}=${Bh(t)}`).join("")}function TR(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ac(t)}=${Ac(i)}`).join("&"):`${Ac(t)}=${Ac(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var bR=/^[^\/()?;#]+/;function kh(n){let e=n.match(bR);return e?e[0]:""}var CR=/^[^\/()?;=#]+/;function SR(n){let e=n.match(CR);return e?e[0]:""}var AR=/^[^=?&#]+/;function RR(n){let e=n.match(AR);return e?e[0]:""}var NR=/^[^&#]+/;function MR(n){let e=n.match(NR);return e?e[0]:""}var $h=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[K]=new ge(e,t)),r}parseSegment(){let e=kh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new ir(xc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=SR(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=kh(this.remaining);i&&(r=i,this.capture(r))}e[xc(t)]=xc(r)}parseQueryParam(e){let t=RR(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=MR(this.remaining);o&&(r=o,this.capture(r))}let i=iw(t),s=iw(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=kh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=K);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[K]:new ge([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function vw(n){return n.segments.length>0?new ge([],{[K]:n}):n}function _w(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=_w(i);if(r===K&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ge(n.segments,e);return xR(t)}function xR(n){if(n.numberOfChildren===1&&n.children[K]){let e=n.children[K];return new ge(n.segments.concat(e.segments),e.children)}return n}function Gs(n){return n instanceof rn}function PR(n,e,t=null,r=null){let i=Iw(n);return ww(i,e,t,r)}function Iw(n){let e;function t(s){let o={};for(let u of s.children){let d=t(u);o[u.outlet]=d}let c=new ge(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=vw(r);return e??i}function ww(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Lh(i,i,i,t,r);let s=OR(e);if(s.toRoot())return Lh(i,i,new ge([],{}),t,r);let o=kR(s,i,n),c=o.processChildren?$s(o.segmentGroup,o.index,s.commands):Dw(o.segmentGroup,o.index,s.commands);return Lh(i,o.segmentGroup,c,t,r)}function Pc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ws(n){return typeof n=="object"&&n!=null&&n.outlets}function Lh(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;n===e?o=t:o=Ew(n,e,t);let c=vw(_w(o));return new rn(c,s,i)}function Ew(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=Ew(s,e,t)}),new ge(n.segments,r)}var Oc=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Pc(r[0]))throw new U(4003,!1);let i=r.find(Ws);if(i&&i!==dw(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function OR(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Oc(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,d])=>{c[u]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Oc(t,e,r)}var li=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function kR(n,e,t){if(n.isAbsolute)return new li(e,!0,0);if(!t)return new li(e,!1,NaN);if(t.parent===null)return new li(t,!0,0);let r=Pc(n.commands[0])?0:1,i=t.segments.length-1+r;return LR(t,i,n.numberOfDoubleDots)}function LR(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new li(r,!1,i-s)}function FR(n){return Ws(n[0])?n[0].outlets:{[K]:n}}function Dw(n,e,t){if(n??=new ge([],{}),n.segments.length===0&&n.hasChildren())return $s(n,e,t);let r=VR(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ge(n.segments.slice(0,r.pathIndex),{});return s.children[K]=new ge(n.segments.slice(r.pathIndex),n.children),$s(s,0,i)}else return r.match&&i.length===0?new ge(n.segments,{}):r.match&&!n.hasChildren()?Hh(n,e,t):r.match?$s(n,0,i):Hh(n,e,t)}function $s(n,e,t){if(t.length===0)return new ge(n.segments,{});{let r=FR(t),i={};if(Object.keys(r).some(s=>s!==K)&&n.children[K]&&n.numberOfChildren===1&&n.children[K].segments.length===0){let s=$s(n.children[K],e,t);return new ge(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Dw(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ge(n.segments,i)}}function VR(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(Ws(c))break;let u=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&d&&typeof d=="object"&&d.outlets===void 0){if(!ow(u,d,o))return s;r+=2}else{if(!ow(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Hh(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Ws(s)){let u=UR(s.outlets);return new ge(r,u)}if(i===0&&Pc(t[0])){let u=n.segments[e];r.push(new ir(u.path,sw(t[0]))),i++;continue}let o=Ws(s)?s.outlets[K]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&Pc(c)?(r.push(new ir(o,sw(c))),i+=2):(r.push(new ir(o,{})),i++)}return new ge(r,{})}function UR(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Hh(new ge([],{}),0,r))}),e}function sw(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ow(n,e,t){return n==t.path&&Lt(e,t.parameters)}var Hs="imperative",je=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(je||{}),mt=class{constructor(e,t){this.id=e,this.url=t}},Ks=class extends mt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=je.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},or=class extends mt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=je.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},at=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(at||{}),qh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(qh||{}),nn=class extends mt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=je.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ar=class extends mt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=je.NavigationSkipped}},Qs=class extends mt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=je.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},kc=class extends mt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=je.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zh=class extends mt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=je.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gh=class extends mt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=je.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Wh=class extends mt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=je.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kh=class extends mt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=je.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qh=class{constructor(e){this.route=e,this.type=je.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Yh=class{constructor(e){this.route=e,this.type=je.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zh=class{constructor(e){this.snapshot=e,this.type=je.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jh=class{constructor(e){this.snapshot=e,this.type=je.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xh=class{constructor(e){this.snapshot=e,this.type=je.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ef=class{constructor(e){this.snapshot=e,this.type=je.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ys=class{},pi=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function jR(n,e){return n.providers&&!n._injector&&(n._injector=gh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Rt(n){return n.outlet||K}function BR(n,e){let t=n.filter(r=>Rt(r)===e);return t.push(...n.filter(r=>Rt(r)!==e)),t}function no(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var tf=class{get injector(){return no(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new $c(this.rootInjector),this.attachRef=null}},$c=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new tf(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(te(ft))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=nf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=nf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=rf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return rf(e,this._root).map(t=>t.value)}};function nf(n,e){if(n===e.value)return e;for(let t of e.children){let r=nf(n,t);if(r)return r}return null}function rf(n,e){if(n===e.value)return[e];for(let t of e.children){let r=rf(n,t);if(r.length)return r.unshift(e),r}return[]}var ot=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ui(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Fc=class extends Lc{constructor(e,t){super(e),this.snapshot=t,pf(this,e)}toString(){return this.snapshot.toString()}};function Tw(n){let e=$R(n),t=new Ue([new ir("",{})]),r=new Ue({}),i=new Ue({}),s=new Ue({}),o=new Ue(""),c=new gi(t,r,s,o,i,K,n,e.root);return c.snapshot=e.root,new Fc(new ot(c,[]),e)}function $R(n){let e={},t={},r={},i="",s=new di([],e,r,i,t,K,n,null,{});return new Uc("",new ot(s,[]))}var gi=class{constructor(e,t,r,i,s,o,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ee(d=>d[to]))??G(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>fi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>fi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Vc(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&Cw(i)&&(r.resolve[to]=i.title),r}var di=class{get title(){return this.data?.[to]}constructor(e,t,r,i,s,o,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=fi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=fi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Uc=class extends Lc{constructor(e,t){super(t),this.url=e,pf(this,t)}toString(){return bw(this._root)}};function pf(n,e){e.value._routerState=n,e.children.forEach(t=>pf(n,t))}function bw(n){let e=n.children.length>0?` { ${n.children.map(bw).join(", ")} } `:"";return`${n.value}${e}`}function Fh(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Lt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Lt(e.params,t.params)||n.paramsSubject.next(t.params),gR(e.url,t.url)||n.urlSubject.next(t.url),Lt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function sf(n,e){let t=Lt(n.params,e.params)&&_R(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||sf(n.parent,e.parent))}function Cw(n){return typeof n.title=="string"||n.title===null}var HR=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=K,this.activateEvents=new Ze,this.deactivateEvents=new Ze,this.attachEvents=new Ze,this.detachEvents=new Ze,this.parentContexts=O($c),this.location=O(_c),this.changeDetector=O(oi),this.inputBinder=O(gf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new of(t,c,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=$d({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[cc]})}}return n})(),of=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===gi?this.route:e===$c?this.childContexts:this.parent.get(e,t)}},gf=new H("");function qR(n,e,t){let r=Zs(n,e._root,t?t._root:void 0);return new Fc(r,e)}function Zs(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=zR(n,e,t);return new ot(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Zs(n,c)),o}}let r=GR(e.value),i=e.children.map(s=>Zs(n,s));return new ot(r,i)}}function zR(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zs(n,r,i);return Zs(n,r)})}function GR(n){return new gi(new Ue(n.url),new Ue(n.params),new Ue(n.queryParams),new Ue(n.fragment),new Ue(n.data),n.outlet,n.component,n)}var Js=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Sw="ngNavigationCancelingError";function jc(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Gs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Aw(!1,at.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Aw(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Sw]=!0,t.cancellationCode=e,t}function WR(n){return Rw(n)&&Gs(n.url)}function Rw(n){return!!n&&n[Sw]}var KR=(n,e,t,r)=>ee(i=>(new af(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),af=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ui(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ui(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ui(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ui(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ef(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Jh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Fh(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Fh(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Bc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},hi=class{constructor(e,t){this.component=e,this.route=t}};function QR(n,e,t){let r=n._root,i=e?e._root:null;return js(r,i,t,[r.value])}function YR(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function yi(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Cv(n)?n:e.get(n):r}function js(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ui(e);return n.children.forEach(o=>{ZR(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>qs(c,t.getContext(o),i)),i}function ZR(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=JR(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Bc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?js(n,e,c?c.children:null,r,i):js(n,e,t,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new hi(c.outlet.component,o))}else o&&qs(e,c,i),i.canActivateChecks.push(new Bc(r)),s.component?js(n,null,c?c.children:null,r,i):js(n,null,t,r,i);return i}function JR(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!sr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!sr(n.url,e.url)||!Lt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sf(n,e)||!Lt(n.queryParams,e.queryParams);case"paramsChange":default:return!sf(n,e)}}function qs(n,e,t){let r=ui(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?qs(o,e.children.getContext(s),t):qs(o,null,t):qs(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new hi(e.outlet.component,i)):t.canDeactivateChecks.push(new hi(null,i)):t.canDeactivateChecks.push(new hi(null,i))}function ro(n){return typeof n=="function"}function XR(n){return typeof n=="boolean"}function eN(n){return n&&ro(n.canLoad)}function tN(n){return n&&ro(n.canActivate)}function nN(n){return n&&ro(n.canActivateChild)}function rN(n){return n&&ro(n.canDeactivate)}function iN(n){return n&&ro(n.canMatch)}function Nw(n){return n instanceof Gt||n?.name==="EmptyError"}var Rc=Symbol("INITIAL_VALUE");function mi(){return Et(n=>Da(n.map(e=>e.pipe(Wt(1),Sa(Rc)))).pipe(ee(e=>{for(let t of e)if(t!==!0){if(t===Rc)return Rc;if(t===!1||sN(t))return t}return!0}),ut(e=>e!==Rc),Wt(1)))}function sN(n){return Gs(n)||n instanceof Js}function oN(n,e){return Me(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?G(Ie(L({},t),{guardsResult:!0})):aN(o,r,i,n).pipe(Me(c=>c&&XR(c)?cN(r,s,n,e):G(c)),ee(c=>Ie(L({},t),{guardsResult:c})))})}function aN(n,e,t,r){return Se(n).pipe(Me(i=>fN(i.component,i.route,t,e,r)),xt(i=>i!==!0,!0))}function cN(n,e,t,r){return Se(e).pipe(Ur(i=>Vr(lN(i.route.parent,r),uN(i.route,r),hN(n,i.path,t),dN(n,i.route,t))),xt(i=>i!==!0,!0))}function uN(n,e){return n!==null&&e&&e(new Xh(n)),G(!0)}function lN(n,e){return n!==null&&e&&e(new Zh(n)),G(!0)}function dN(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(s=>Ta(()=>{let o=no(e)??t,c=yi(s,o),u=tN(c)?c.canActivate(e,n):Zt(o,()=>c(e,n));return An(u).pipe(xt())}));return G(i).pipe(mi())}function hN(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>YR(o)).filter(o=>o!==null).map(o=>Ta(()=>{let c=o.guards.map(u=>{let d=no(o.node)??t,f=yi(u,d),g=nN(f)?f.canActivateChild(r,n):Zt(d,()=>f(r,n));return An(g).pipe(xt())});return G(c).pipe(mi())}));return G(s).pipe(mi())}function fN(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(c=>{let u=no(e)??i,d=yi(c,u),f=rN(d)?d.canDeactivate(n,e,t,r):Zt(u,()=>d(n,e,t,r));return An(f).pipe(xt())});return G(o).pipe(mi())}function pN(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let s=i.map(o=>{let c=yi(o,n),u=eN(c)?c.canLoad(e,t):Zt(n,()=>c(e,t));return An(u)});return G(s).pipe(mi(),Mw(r))}function Mw(n){return ca(xe(e=>{if(typeof e!="boolean")throw jc(n,e)}),ee(e=>e===!0))}function gN(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let s=i.map(o=>{let c=yi(o,n),u=iN(c)?c.canMatch(e,t):Zt(n,()=>c(e,t));return An(u)});return G(s).pipe(mi(),Mw(r))}var Xs=class{constructor(e){this.segmentGroup=e||null}},eo=class extends Error{constructor(e){super(),this.urlTree=e}};function ci(n){return Fr(new Xs(n))}function mN(n){return Fr(new U(4e3,!1))}function yN(n){return Fr(Aw(!1,at.GuardRejected))}var cf=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[K])return mN(`${e.redirectTo}`);i=i.children[K]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let c=t,{queryParams:u,fragment:d,routeConfig:f,url:g,outlet:_,params:I,data:A,title:N}=i,R=Zt(s,()=>c({params:I,data:A,queryParams:u,fragment:d,routeConfig:f,url:g,outlet:_,title:N}));if(R instanceof rn)throw new eo(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new eo(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new rn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,r,i)}),new ge(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},uf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vN(n,e,t,r,i){let s=xw(n,e,t);return s.matched?(r=jR(e,r),gN(r,e,t,i).pipe(ee(o=>o===!0?s:L({},uf)))):G(s)}function xw(n,e,t){if(e.path==="**")return _N(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},uf):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||pR)(t,n,e);if(!i)return L({},uf);let s={};Object.entries(i.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function _N(n){return{matched:!0,parameters:n.length>0?dw(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function aw(n,e,t,r){return t.length>0&&EN(n,t,r)?{segmentGroup:new ge(e,wN(r,new ge(t,n.children))),slicedSegments:[]}:t.length===0&&DN(n,t,r)?{segmentGroup:new ge(n.segments,IN(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ge(n.segments,n.children),slicedSegments:t}}function IN(n,e,t,r){let i={};for(let s of t)if(Hc(n,e,s)&&!r[Rt(s)]){let o=new ge([],{});i[Rt(s)]=o}return L(L({},r),i)}function wN(n,e){let t={};t[K]=e;for(let r of n)if(r.path===""&&Rt(r)!==K){let i=new ge([],{});t[Rt(r)]=i}return t}function EN(n,e,t){return t.some(r=>Hc(n,e,r)&&Rt(r)!==K)}function DN(n,e,t){return t.some(r=>Hc(n,e,r))}function Hc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function TN(n,e,t){return e.length===0&&!n.children[t]}var lf=class{};function bN(n,e,t,r,i,s,o="emptyOnly"){return new df(n,e,t,r,i,o,s).recognize()}var CN=31,df=class{constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new cf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=aw(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:t,rootSnapshot:r})=>{let i=new ot(r,t),s=new Uc("",i),o=PR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new di([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),K,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,K,t).pipe(ee(r=>({children:r,rootSnapshot:t})),vn(r=>{if(r instanceof eo)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xs?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ee(o=>o instanceof ot?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Se(s).pipe(Ur(o=>{let c=r.children[o],u=BR(t,o);return this.processSegmentGroup(e,u,c,o,i)}),Ca((o,c)=>(o.push(...c),o)),_n(null),$l(),Me(o=>{if(o===null)return ci(r);let c=Pw(o);return SN(c),G(c)}))}processSegment(e,t,r,i,s,o,c){return Se(t).pipe(Ur(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o,c).pipe(vn(d=>{if(d instanceof Xs)return G(null);throw d}))),xt(u=>!!u),vn(u=>{if(Nw(u))return TN(r,i,s)?G(new lf):ci(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,o,c,u){return Rt(r)!==o&&(o===K||!Hc(i,s,r))?ci(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,u):ci(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,c){let{matched:u,parameters:d,consumedSegments:f,positionalParamSegments:g,remainingSegments:_}=xw(t,i,s);if(!u)return ci(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>CN&&(this.allowRedirects=!1));let I=new di(s,d,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,cw(i),Rt(i),i.component??i._loadedComponent??null,i,uw(i)),A=Vc(I,c,this.paramsInheritanceStrategy);I.params=Object.freeze(A.params),I.data=Object.freeze(A.data);let N=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,g,I,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Me(R=>this.processSegment(e,r,t,R.concat(_),o,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let c=vN(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Et(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Et(({routes:d})=>{let f=r._loadedInjector??e,{parameters:g,consumedSegments:_,remainingSegments:I}=u,A=new di(_,g,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,cw(r),Rt(r),r.component??r._loadedComponent??null,r,uw(r)),N=Vc(A,o,this.paramsInheritanceStrategy);A.params=Object.freeze(N.params),A.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:F}=aw(t,_,I,d);if(F.length===0&&R.hasChildren())return this.processChildren(f,d,R,A).pipe(ee(X=>new ot(A,X)));if(d.length===0&&F.length===0)return G(new ot(A,[]));let B=Rt(r)===s;return this.processSegment(f,d,R,F,B?K:s,!0,A).pipe(ee(X=>new ot(A,X instanceof ot?[X]:[])))}))):ci(t)))}getChildConfig(e,t,r){return t.children?G({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?G({routes:t._loadedRoutes,injector:t._loadedInjector}):pN(e,t,r,this.urlSerializer).pipe(Me(i=>i?this.configLoader.loadChildren(e,t).pipe(xe(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):yN(t))):G({routes:[],injector:e})}};function SN(n){n.sort((e,t)=>e.value.outlet===K?-1:t.value.outlet===K?1:e.value.outlet.localeCompare(t.value.outlet))}function AN(n){let e=n.value.routeConfig;return e&&e.path===""}function Pw(n){let e=[],t=new Set;for(let r of n){if(!AN(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Pw(r.children);e.push(new ot(r.value,i))}return e.filter(r=>!t.has(r))}function cw(n){return n.data||{}}function uw(n){return n.resolve||{}}function RN(n,e,t,r,i,s){return Me(o=>bN(n,e,t,r,o.extractedUrl,i,s).pipe(ee(({state:c,tree:u})=>Ie(L({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function NN(n,e){return Me(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return G(t);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let d of Ow(u))o.add(d);let c=0;return Se(o).pipe(Ur(u=>s.has(u)?MN(u,r,n,e):(u.data=Vc(u,u.parent,n).resolve,G(void 0))),xe(()=>c++),jr(1),Me(u=>c===o.size?G(t):it))})}function Ow(n){let e=n.children.map(t=>Ow(t)).flat();return[n,...e]}function MN(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!Cw(i)&&(s[to]=i.title),xN(s,n,e,r).pipe(ee(o=>(n._resolvedData=o,n.data=Vc(n,n.parent,t).resolve,null)))}function xN(n,e,t,r){let i=jh(n);if(i.length===0)return G({});let s={};return Se(i).pipe(Me(o=>PN(n[o],e,t,r).pipe(xt(),xe(c=>{if(c instanceof Js)throw jc(new zs,c);s[o]=c}))),jr(1),Bl(s),vn(o=>Nw(o)?it:Fr(o)))}function PN(n,e,t,r){let i=no(e)??r,s=yi(n,i),o=s.resolve?s.resolve(e,t):Zt(i,()=>s(e,t));return An(o)}function Vh(n){return Et(e=>{let t=n(e);return t?Se(t).pipe(ee(()=>e)):G(e)})}var kw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===K);return r}getResolvedTitleForRoute(t){return t.data[to]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>O(ON),providedIn:"root"})}}return n})(),ON=(()=>{class n extends kw{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(te(nw))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mf=new H("",{providedIn:"root",factory:()=>({})}),kN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=sc({type:n,selectors:[["ng-component"]],standalone:!0,features:[wc],decls:1,vars:0,template:function(r,i){r&1&&yh(0,"router-outlet")},dependencies:[HR],encapsulation:2})}}return n})();function yf(n){let e=n.children&&n.children.map(yf),t=e?Ie(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==K&&(t.component=kN),t}var vf=new H(""),LN=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(Eh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return G(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=An(t.loadComponent()).pipe(ee(Lw),xe(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),fs(()=>{this.componentLoaders.delete(t)})),i=new Pr(r,()=>new Ye).pipe(xr());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=FN(r,this.compiler,t,this.onLoadEndListener).pipe(fs(()=>{this.childrenLoaders.delete(r)})),o=new Pr(s,()=>new Ye).pipe(xr());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function FN(n,e,t,r){return An(n.loadChildren()).pipe(ee(Lw),Me(i=>i instanceof Ss||Array.isArray(i)?G(i):Se(e.compileModuleAsync(i))),ee(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get(vf,[],{optional:!0,self:!0}).flat()),{routes:o.map(yf),injector:s}}))}function VN(n){return n&&typeof n=="object"&&"default"in n}function Lw(n){return VN(n)?n.default:n}var _f=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>O(UN),providedIn:"root"})}}return n})(),UN=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jN=new H("");var BN=new H(""),$N=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ye,this.transitionAbortSubject=new Ye,this.configLoader=O(LN),this.environmentInjector=O(ft),this.urlSerializer=O(ff),this.rootContexts=O($c),this.location=O(ks),this.inputBindingEnabled=O(gf,{optional:!0})!==null,this.titleStrategy=O(kw),this.options=O(mf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(_f),this.createViewTransition=O(jN,{optional:!0}),this.navigationErrorHandler=O(BN,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Qh(i)),r=i=>this.events.next(new Yh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ie(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ue({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Hs,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ut(s=>s.id!==0),ee(s=>Ie(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Et(s=>{let o=!1,c=!1;return G(s).pipe(Et(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",at.SupersededByNewNavigation),it;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new ar(u.id,this.urlSerializer.serialize(u.rawUrl),g,qh.IgnoredSameUrlNavigation)),u.resolve(!1),it}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return G(u).pipe(Et(g=>{let _=this.transitions?.getValue();return this.events.next(new Ks(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?it:Promise.resolve(g)}),RN(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),xe(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Ie(L({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let _=new kc(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:g,extractedUrl:_,source:I,restoredState:A,extras:N}=u,R=new Ks(g,this.urlSerializer.serialize(_),I,A);this.events.next(R);let F=Tw(this.rootComponentType).snapshot;return this.currentTransition=s=Ie(L({},u),{targetSnapshot:F,urlAfterRedirects:_,extras:Ie(L({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,G(s)}else{let g="";return this.events.next(new ar(u.id,this.urlSerializer.serialize(u.extractedUrl),g,qh.IgnoredByUrlHandlingStrategy)),u.resolve(!1),it}}),xe(u=>{let d=new zh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ee(u=>(this.currentTransition=s=Ie(L({},u),{guards:QR(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),oN(this.environmentInjector,u=>this.events.next(u)),xe(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw jc(this.urlSerializer,u.guardsResult);let d=new Gh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),ut(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",at.GuardRejected),!1)),Vh(u=>{if(u.guards.canActivateChecks.length)return G(u).pipe(xe(d=>{let f=new Wh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Et(d=>{let f=!1;return G(d).pipe(NN(this.paramsInheritanceStrategy,this.environmentInjector),xe({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",at.NoDataFromResolver)}}))}),xe(d=>{let f=new Kh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),Vh(u=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(xe(_=>{f.component=_}),ee(()=>{})));for(let _ of f.children)g.push(...d(_));return g};return Da(d(u.targetSnapshot.root)).pipe(_n(null),Wt(1))}),Vh(()=>this.afterPreactivation()),Et(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?Se(f).pipe(ee(()=>s)):G(s)}),ee(u=>{let d=qR(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Ie(L({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),xe(()=>{this.events.next(new Ys)}),KR(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Wt(1),xe({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new or(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Hl(this.transitionAbortSubject.pipe(xe(u=>{throw u}))),fs(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",at.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),vn(u=>{if(c=!0,Rw(u))this.events.next(new nn(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),WR(u)?this.events.next(new pi(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let d=new Qs(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let f=Zt(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof Js){let{message:g,cancellationCode:_}=jc(this.urlSerializer,f);this.events.next(new nn(s.id,this.urlSerializer.serialize(s.extractedUrl),g,_)),this.events.next(new pi(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=t.errorHandler(u);s.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return it}))}))}cancelNavigationTransition(t,r,i){let s=new nn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function HN(n){return n!==Hs}var qN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>O(zN),providedIn:"root"})}}return n})(),hf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},zN=(()=>{class n extends hf{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xd(n)))(i||n)}})()}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>O(GN),providedIn:"root"})}}return n})(),GN=(()=>{class n extends Fw{constructor(){super(...arguments),this.location=O(ks),this.urlSerializer=O(ff),this.options=O(mf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(_f),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new rn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Tw(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ks)this.stateMemento=this.createStateMemento();else if(t instanceof ar)this.rawUrlTree=r.initialUrl;else if(t instanceof kc){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ys?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof nn&&(t.code===at.GuardRejected||t.code===at.NoDataFromResolver)?this.restoreHistory(r):t instanceof Qs?this.restoreHistory(r,!0):t instanceof or&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof rn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xd(n)))(i||n)}})()}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Bs=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Bs||{});function WN(n,e){n.events.pipe(ut(t=>t instanceof or||t instanceof nn||t instanceof Qs||t instanceof ar),ee(t=>t instanceof or||t instanceof ar?Bs.COMPLETE:(t instanceof nn?t.code===at.Redirect||t.code===at.SupersededByNewNavigation:!1)?Bs.REDIRECTING:Bs.FAILED),ut(t=>t!==Bs.REDIRECTING),Wt(1)).subscribe(()=>{e()})}function KN(n){throw n}var QN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Vw=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(Ec),this.stateManager=O(Fw),this.options=O(mf,{optional:!0})||{},this.pendingTasks=O(ni),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O($N),this.urlSerializer=O(ff),this.location=O(ks),this.urlHandlingStrategy=O(_f),this._events=new Ye,this.errorHandler=this.options.errorHandler||KN,this.navigated=!1,this.routeReuseStrategy=O(qN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(vf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(gf,{optional:!0}),this.eventsSubscription=new De,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof nn&&r.code!==at.Redirect&&r.code!==at.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof or)this.navigated=!0;else if(r instanceof pi){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||HN(i.source)},o);this.scheduleNavigation(c,Hs,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}JN(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Hs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(yf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let _=i?i.snapshot:this.routerState.snapshot.root;g=Iw(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return ww(g,t,f,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Gs(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Hs,null,r)}navigate(t,r={skipLocationChange:!1}){return ZN(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},QN):r===!1?i=L({},YN):i=r,Gs(t))return rw(this.currentUrlTree,t,i);let s=this.parseUrl(t);return rw(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,u,d;o?(c=o.resolve,u=o.reject,d=o.promise):d=new Promise((g,_)=>{c=g,u=_});let f=this.pendingTasks.add();return WN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZN(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new U(4008,!1)}function JN(n){return!(n instanceof Ys)&&!(n instanceof pi)}var XN=new H("");function Uw(n,...e){return Cn([{provide:vf,multi:!0,useValue:n},[],{provide:gi,useFactory:eM,deps:[Vw]},{provide:wh,multi:!0,useFactory:tM},e.map(t=>t.\u0275providers)])}function eM(n){return n.routerState.root}function tM(){let n=O(St);return e=>{let t=n.get(nr);if(e!==t.components[0])return;let r=n.get(Vw),i=n.get(nM);n.get(rM)===1&&r.initialNavigation(),n.get(iM,null,Z.Optional)?.setUpPreloading(),n.get(XN,null,Z.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var nM=new H("",{factory:()=>new Ye}),rM=new H("",{providedIn:"root",factory:()=>1});var iM=new H("");var Bw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},sM=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$w={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,f=s>>2,g=(s&3)<<4|c>>4,_=(c&15)<<2|d>>6,I=d&63;u||(I=64,o||(_=64)),r.push(t[f],t[g],t[_],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Bw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):sM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new wf;let _=s<<2|c>>4;if(r.push(_),d!==64){let I=c<<4&240|d>>2;if(r.push(I),g!==64){let A=d<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},wf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},oM=function(n){let e=Bw(n);return $w.encodeByteArray(e,!0)},io=function(n){return oM(n).replace(/\./g,"")},Df=function(n){try{return $w.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function aM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var cM=()=>aM().__FIREBASE_DEFAULTS__,uM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Df(n[1]);return e&&JSON.parse(e)},zc=()=>{try{return cM()||uM()||lM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Hw=n=>{var e,t;return(t=(e=zc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},qw=n=>{let e=Hw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Tf=()=>{var n;return(n=zc())===null||n===void 0?void 0:n.config},zw=n=>{var e;return(e=zc())===null||e===void 0?void 0:e[`_${n}`]};var qc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Gw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[io(JSON.stringify(t)),io(JSON.stringify(o)),""].join(".")}function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ww(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function dM(){var n;let e=(n=zc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Kw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qw(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Yw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zw(){return!dM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bf(){try{return typeof indexedDB=="object"}catch{return!1}}function Jw(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var hM="FirebaseError",yt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=hM,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sn.prototype.create)}},sn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?fM(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new yt(i,c,r)}};function fM(n,e){return n.replace(pM,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var pM=/\{\$([^}]+)}/g;function vi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(jw(s)&&jw(o)){if(!vi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function jw(n){return n!==null&&typeof n=="object"}function Cf(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xw(n,e){let t=new Ef(n,e);return t.subscribe.bind(t)}var Ef=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");gM(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=If),i.error===void 0&&(i.error=If),i.complete===void 0&&(i.complete=If);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function gM(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function If(){}var $B=4*60*60*1e3;function Rn(n){return n&&n._delegate?n._delegate:n}var vt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var cr="[DEFAULT]";var Sf=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new qc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yM(e))try{this.getOrInitializeService({instanceIdentifier:cr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return S(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=cr){return this.instances.has(e)}getOptions(e=cr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mM(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cr){return this.component?this.component.multipleInstances?e:cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function mM(n){return n===cr?void 0:n}function yM(n){return n.instantiationMode==="EAGER"}var Gc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Sf(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var vM=[],ne=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ne||{}),_M={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},IM=ne.INFO,wM={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},EM=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=wM[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Nn=class{constructor(e){this.name=e,this._logLevel=IM,this._logHandler=EM,this._userLogHandler=null,vM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_M[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};var DM=(n,e)=>e.some(t=>n instanceof t),eE,tE;function TM(){return eE||(eE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bM(){return tE||(tE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var nE=new WeakMap,Rf=new WeakMap,rE=new WeakMap,Af=new WeakMap,Mf=new WeakMap;function CM(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ft(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&nE.set(t,n)}).catch(()=>{}),Mf.set(e,n),e}function SM(n){if(Rf.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Rf.set(n,e)}var Nf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||rE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ft(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function iE(n){Nf=n(Nf)}function AM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Wc(this),e,...t);return rE.set(r,e.sort?e.sort():[e]),Ft(r)}:bM().includes(n)?function(...e){return n.apply(Wc(this),e),Ft(nE.get(this))}:function(...e){return Ft(n.apply(Wc(this),e))}}function RM(n){return typeof n=="function"?AM(n):(n instanceof IDBTransaction&&SM(n),DM(n,TM())?new Proxy(n,Nf):n)}function Ft(n){if(n instanceof IDBRequest)return CM(n);if(Af.has(n))return Af.get(n);let e=RM(n);return e!==n&&(Af.set(n,e),Mf.set(e,n)),e}var Wc=n=>Mf.get(n);function oE(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=Ft(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ft(o.result),u.oldVersion,u.newVersion,Ft(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var NM=["get","getKey","getAll","getAllKeys","count"],MM=["put","add","delete","clear"],xf=new Map;function sE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xf.get(e))return xf.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=MM.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||NM.includes(t)))return;let s=function(o,...c){return S(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&u.done]))[0]})};return xf.set(e,s),s}iE(n=>Ie(L({},n),{get:(e,t,r)=>sE(e,t)||n.get(e,t,r),has:(e,t)=>!!sE(e,t)||n.has(e,t)}));var Of=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xM(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function xM(n){let e=n.getComponent();return e?.type==="VERSION"}var kf="@firebase/app",aE="0.10.13";var on=new Nn("@firebase/app"),PM="@firebase/app-compat",OM="@firebase/analytics-compat",kM="@firebase/analytics",LM="@firebase/app-check-compat",FM="@firebase/app-check",VM="@firebase/auth",UM="@firebase/auth-compat",jM="@firebase/database",BM="@firebase/data-connect",$M="@firebase/database-compat",HM="@firebase/functions",qM="@firebase/functions-compat",zM="@firebase/installations",GM="@firebase/installations-compat",WM="@firebase/messaging",KM="@firebase/messaging-compat",QM="@firebase/performance",YM="@firebase/performance-compat",ZM="@firebase/remote-config",JM="@firebase/remote-config-compat",XM="@firebase/storage",ex="@firebase/storage-compat",tx="@firebase/firestore",nx="@firebase/vertexai-preview",rx="@firebase/firestore-compat",ix="firebase",sx="10.14.1";var Lf="[DEFAULT]",ox={[kf]:"fire-core",[PM]:"fire-core-compat",[kM]:"fire-analytics",[OM]:"fire-analytics-compat",[FM]:"fire-app-check",[LM]:"fire-app-check-compat",[VM]:"fire-auth",[UM]:"fire-auth-compat",[jM]:"fire-rtdb",[BM]:"fire-data-connect",[$M]:"fire-rtdb-compat",[HM]:"fire-fn",[qM]:"fire-fn-compat",[zM]:"fire-iid",[GM]:"fire-iid-compat",[WM]:"fire-fcm",[KM]:"fire-fcm-compat",[QM]:"fire-perf",[YM]:"fire-perf-compat",[ZM]:"fire-rc",[JM]:"fire-rc-compat",[XM]:"fire-gcs",[ex]:"fire-gcs-compat",[tx]:"fire-fst",[rx]:"fire-fst-compat",[nx]:"fire-vertex","fire-js":"fire-js",[ix]:"fire-js-all"};var so=new Map,ax=new Map,Ff=new Map;function cE(n,e){try{n.container.addComponent(e)}catch(t){on.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xn(n){let e=n.name;if(Ff.has(e))return on.debug(`There were multiple attempts to register component ${e}.`),!1;Ff.set(e,n);for(let t of so.values())cE(t,n);for(let t of ax.values())cE(t,n);return!0}function Bf(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _i(n){return n.settings!==void 0}var cx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mn=new sn("app","Firebase",cx);var Vf=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mn.create("app-deleted",{appName:this._name})}};var Ii=sx;function $f(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Lf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Mn.create("bad-app-name",{appName:String(i)});if(t||(t=Tf()),!t)throw Mn.create("no-options");let s=so.get(i);if(s){if(vi(t,s.options)&&vi(r,s.config))return s;throw Mn.create("duplicate-app",{appName:i})}let o=new Gc(i);for(let u of Ff.values())o.addComponent(u);let c=new Vf(t,r,o);return so.set(i,c),c}function ao(n=Lf){let e=so.get(n);if(!e&&n===Lf&&Tf())return $f();if(!e)throw Mn.create("no-app",{appName:n});return e}function Kc(){return Array.from(so.values())}function Le(n,e,t){var r;let i=(r=ox[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),on.warn(c.join(" "));return}xn(new vt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var ux="firebase-heartbeat-database",lx=1,oo="firebase-heartbeat-store",Pf=null;function hE(){return Pf||(Pf=oE(ux,lx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(oo)}catch(t){console.warn(t)}}}}).catch(n=>{throw Mn.create("idb-open",{originalErrorMessage:n.message})})),Pf}function dx(n){return S(this,null,function*(){try{let t=(yield hE()).transaction(oo),r=yield t.objectStore(oo).get(fE(n));return yield t.done,r}catch(e){if(e instanceof yt)on.warn(e.message);else{let t=Mn.create("idb-get",{originalErrorMessage:e?.message});on.warn(t.message)}}})}function uE(n,e){return S(this,null,function*(){try{let r=(yield hE()).transaction(oo,"readwrite");yield r.objectStore(oo).put(e,fE(n)),yield r.done}catch(t){if(t instanceof yt)on.warn(t.message);else{let r=Mn.create("idb-set",{originalErrorMessage:t?.message});on.warn(r.message)}}})}function fE(n){return`${n.name}!${n.options.appId}`}var hx=1024,fx=30*24*60*60*1e3,Uf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new jf(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=fx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){on.warn(r)}})}getHeartbeatsHeader(){return S(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=lE(),{heartbeatsToSend:r,unsentEntries:i}=px(this._heartbeatsCache.heartbeats),s=io(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return on.warn(t),""}})}};function lE(){return new Date().toISOString().substring(0,10)}function px(n,e=hx){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),dE(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),dE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var jf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return bf()?Jw().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield dx(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return uE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return uE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function dE(n){return io(JSON.stringify({version:2,heartbeats:n})).length}function gx(n){xn(new vt("platform-logger",e=>new Of(e),"PRIVATE")),xn(new vt("heartbeat",e=>new Uf(e),"PRIVATE")),Le(kf,aE,n),Le(kf,aE,"esm2017"),Le("fire-js","")}gx("");var mx="firebase",yx="10.14.1";Le(mx,yx,"app");var Ei=new bn("ANGULARFIRE2_VERSION");function qf(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var uo=(n,e)=>{let t=e?[e]:Kc(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},co=class{constructor(){return uo(vx)}},vx="app-check";function wi(){}var Qc=class{zone;delegate;constructor(e,t=Fl){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Hf=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wi,{},wi,wi)),t.pipe(xe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},lo=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Qc(Zone.current)),this.insideAngular=t.run(()=>new Qc(Zone.current,Ll)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(te(ve))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yc(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function _x(n){return Yc().ngZone.runOutsideAngular(()=>n())}function ur(n){return Yc().ngZone.run(()=>n())}function Ix(n){return wx(Yc())(n)}function wx(n){return function(t){return t=t.lift(new Hf(n.ngZone)),t.pipe(yn(n.outsideAngular),mn(n.insideAngular))}}var Ex=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ur(()=>n.apply(void 0,r))},lr=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=ur(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wi,{},wi,wi))),r[s]=Ex(r[s],t));let i=_x(()=>n.apply(this,r));if(!e)if(i instanceof re){let s=Yc();return i.pipe(yn(s.outsideAngular),mn(s.insideAngular))}else return ur(()=>i);return i instanceof re?i.pipe(Ix):i instanceof Promise?ur(()=>new Promise((s,o)=>i.then(c=>ur(()=>s(c)),c=>ur(()=>o(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:ur(()=>i)};var dr=class{constructor(e){return e}},ho=class{constructor(){return Kc()}};function Dx(n){return n&&n.length===1?n[0]:new dr(ao())}var zf=new H("angularfire2._apps"),Tx={provide:dr,useFactory:Dx,deps:[[new kt,zf]]},bx={provide:ho,deps:[[new kt,zf]]};function Cx(n){return(e,t)=>{let r=t.get(Sn);Le("angularfire",Ei.full,"core"),Le("angularfire",Ei.full,"app"),Le("angular",SI.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new dr(i)}}function pE(n,...e){return Cn([Tx,bx,{provide:zf,useFactory:Cx(n),multi:!0,deps:[ve,St,lo,...e]}])}var gE=lr($f,!0);function DE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var TE=DE,bE=new sn("auth","Firebase",DE());var eu=new Nn("@firebase/auth");function Ax(n,...e){eu.logLevel<=ne.WARN&&eu.warn(`Auth (${Ii}): ${n}`,...e)}function Jc(n,...e){eu.logLevel<=ne.ERROR&&eu.error(`Auth (${Ii}): ${n}`,...e)}function mE(n,...e){throw rp(n,...e)}function np(n,...e){return rp(n,...e)}function CE(n,e,t){let r=Object.assign(Object.assign({},TE()),{[e]:t});return new sn("auth","Firebase",r).create(e,{appName:n.name})}function Xc(n){return CE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rp(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return bE.create(n,...e)}function de(n,e,...t){if(!n)throw rp(e,...t)}function fo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Jc(e),new Error(e)}function tu(n,e){n||fo(e)}function Rx(){return yE()==="http:"||yE()==="https:"}function yE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Nx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Rx()||Qw()||"connection"in navigator)?navigator.onLine:!0}function Mx(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var fr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,tu(t>e,"Short delay should be less than long delay!"),this.isMobile=Ww()||Yw()}get(){return Nx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function xx(n,e){tu(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var nu=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Px={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Ox=new fr(3e4,6e4);function SE(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ou(s,o,c,u){return S(this,arguments,function*(n,e,t,r,i={}){return AE(n,i,()=>S(this,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let g=Cf(Object.assign({key:n.config.apiKey},f)).slice(1),_=yield n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);let I=Object.assign({method:e,headers:_},d);return Kw()||(I.referrerPolicy="no-referrer"),nu.fetch()(RE(n,n.config.apiHost,t,g),I)}))})}function AE(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Px),e);try{let i=new Kf(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Zc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zc(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Zc(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Zc(n,"user-disabled",o);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw CE(n,f,d);mE(n,f)}}catch(i){if(i instanceof yt)throw i;mE(n,"network-request-failed",{message:String(i)})}})}function RE(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?xx(n.config,i):`${n.config.apiScheme}://${i}`}var Kf=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(np(this.auth,"network-request-failed")),Ox.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Zc(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=np(n,e,r);return i.customData._tokenResponse=t,i}function kx(n,e){return S(this,null,function*(){return ou(n,"POST","/v1/accounts:delete",e)})}function NE(n,e){return S(this,null,function*(){return ou(n,"POST","/v1/accounts:lookup",e)})}function po(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ip(n,e=!1){return S(this,null,function*(){let t=Rn(n),r=yield t.getIdToken(e),i=ME(r);de(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:po(Gf(i.auth_time)),issuedAtTime:po(Gf(i.iat)),expirationTime:po(Gf(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Gf(n){return Number(n)*1e3}function ME(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Jc("JWT malformed, contained fewer than 3 sections"),null;try{let i=Df(t);return i?JSON.parse(i):(Jc("Failed to decode base64 JWT payload"),null)}catch(i){return Jc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function vE(n){let e=ME(n);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Qf(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof yt&&Lx(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Lx({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Yf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var mo=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=po(this.lastLoginAt),this.creationTime=po(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ru(n){return S(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Qf(n,NE(t,{idToken:r}));de(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?xE(s.providerUserInfo):[],c=Fx(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new mo(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)})}function sp(n){return S(this,null,function*(){let e=Rn(n);yield ru(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Fx(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xE(n){return n.map(e=>{var{providerId:t}=e,r=Vl(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Vx(n,e){return S(this,null,function*(){let t=yield AE(n,{},()=>S(this,null,function*(){let r=Cf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=RE(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",nu.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Ux(n,e){return S(this,null,function*(){return ou(n,"POST","/v2/accounts:revokeToken",SE(n,e))})}var go=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){de(e.length!==0,"internal-error");let t=vE(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Vx(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(de(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(de(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return fo("not implemented")}};function Pn(n,e){de(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var yo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Vl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield Qf(this,this.stsTokenManager.getToken(this.auth,e));return de(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return ip(this,e)}reload(){return sp(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ru(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(_i(this.auth.app))return Promise.reject(Xc(this.auth));let e=yield this.getIdToken();return yield Qf(this,kx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,u,d,f;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,I=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,F=(d=t.createdAt)!==null&&d!==void 0?d:void 0,B=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:X,emailVerified:fe,isAnonymous:Ce,providerData:Y,stsTokenManager:E}=t;de(X&&E,e,"internal-error");let m=go.fromJSON(this.name,E);de(typeof X=="string",e,"internal-error"),Pn(g,e.name),Pn(_,e.name),de(typeof fe=="boolean",e,"internal-error"),de(typeof Ce=="boolean",e,"internal-error"),Pn(I,e.name),Pn(A,e.name),Pn(N,e.name),Pn(R,e.name),Pn(F,e.name),Pn(B,e.name);let y=new n({uid:X,auth:e,email:_,emailVerified:fe,displayName:g,isAnonymous:Ce,photoURL:A,phoneNumber:I,tenantId:N,stsTokenManager:m,createdAt:F,lastLoginAt:B});return Y&&Array.isArray(Y)&&(y.providerData=Y.map(w=>Object.assign({},w))),R&&(y._redirectEventId=R),y}static _fromIdTokenResponse(e,t,r=!1){return S(this,null,function*(){let i=new go;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ru(s),s})}static _fromGetAccountInfoResponse(e,t,r){return S(this,null,function*(){let i=t.users[0];de(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?xE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new go;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new mo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,d),u})}};var _E=new Map;function hr(n){tu(n instanceof Function,"Expected a class definition");let e=_E.get(n);return e?(tu(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,_E.set(n,e),e)}var jx=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,r){return S(this,null,function*(){this.storage[t]=r})}_get(t){return S(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Zf=jx;function Wf(n,e,t){return`firebase:${n}:${e}:${t}`}var iu=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Wf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Wf("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?yo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return S(this,null,function*(){if(!t.length)return new n(hr(Zf),e,r);let i=(yield Promise.all(t.map(d=>S(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||hr(Zf),o=Wf(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(o);if(f){let g=yo._fromJSON(e,f);d!==s&&(c=g),s=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(d=>S(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function IE(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Gx(e))return"Blackberry";if(Wx(e))return"Webos";if($x(e))return"Safari";if((e.includes("chrome/")||Hx(e))&&!e.includes("edge/"))return"Chrome";if(zx(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Bx(n=ct()){return/firefox\//i.test(n)}function $x(n=ct()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hx(n=ct()){return/crios\//i.test(n)}function qx(n=ct()){return/iemobile/i.test(n)}function zx(n=ct()){return/android/i.test(n)}function Gx(n=ct()){return/blackberry/i.test(n)}function Wx(n=ct()){return/webos/i.test(n)}function PE(n,e=[]){let t;switch(n){case"Browser":t=IE(ct());break;case"Worker":t=`${IE(ct())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ii}/${r}`}var Jf=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Kx(t){return S(this,arguments,function*(n,e={}){return ou(n,"GET","/v2/passwordPolicy",SE(n,e))})}var Qx=6,Xf=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Qx,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var ep=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new su(this),this.idTokenSubscription=new su(this),this.beforeStateQueue=new Jf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hr(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield iu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield NE(this,{idToken:e}),r=yield yo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){var t;if(_i(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield ru(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Mx()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(_i(this.app))return Promise.reject(Xc(this));let t=e?Rn(e):null;return t&&de(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return _i(this.app)?Promise.reject(Xc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return _i(this.app)?Promise.reject(Xc(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(hr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield Kx(this),t=new Xf(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Ux(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&hr(e)||this._popupRedirectResolver;de(t,this,"argument-error"),this.redirectPersistenceManager=yield iu.create(this,[hr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return S(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Ax(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Yx(n){return Rn(n)}var su=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Xw(t=>this.observer=t)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Zx={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Jx(n){Zx=n}function Xx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function eP(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(hr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var U$=Xx("rcb"),j$=new fr(3e4,6e4);var B$=new fr(2e3,1e4);var $$=10*60*1e3;var H$=new fr(3e4,6e4);var q$=new fr(5e3,15e3);var z$=encodeURIComponent("fac");var wE="@firebase/auth",EE="1.7.9";var tp=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function tP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nP(n){xn(new vt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PE(n)},d=new ep(r,i,s,u);return eP(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xn(new vt("auth-internal",e=>{let t=Yx(e.getProvider("auth").getImmediate());return(r=>new tp(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Le(wE,EE,tP(n)),Le(wE,EE,"esm2017")}var rP=5*60,G$=zw("authIdTokenMaxAge")||rP;function iP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Jx({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=np("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",iP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nP("Browser");var rO="auth";var au=class{constructor(){return uo(rO)}};var OE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kE={};var On,op;(function(){var n;function e(E,m){function y(){}y.prototype=m.prototype,E.D=m.prototype,E.prototype=new y,E.prototype.constructor=E,E.C=function(w,D,b){for(var v=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)v[Ht-2]=arguments[Ht];return m.prototype[D].apply(w,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,m,y){y||(y=0);var w=Array(16);if(typeof m=="string")for(var D=0;16>D;++D)w[D]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(D=0;16>D;++D)w[D]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=E.g[0],y=E.g[1],D=E.g[2];var b=E.g[3],v=m+(b^y&(D^b))+w[0]+3614090360&4294967295;m=y+(v<<7&4294967295|v>>>25),v=b+(D^m&(y^D))+w[1]+3905402710&4294967295,b=m+(v<<12&4294967295|v>>>20),v=D+(y^b&(m^y))+w[2]+606105819&4294967295,D=b+(v<<17&4294967295|v>>>15),v=y+(m^D&(b^m))+w[3]+3250441966&4294967295,y=D+(v<<22&4294967295|v>>>10),v=m+(b^y&(D^b))+w[4]+4118548399&4294967295,m=y+(v<<7&4294967295|v>>>25),v=b+(D^m&(y^D))+w[5]+1200080426&4294967295,b=m+(v<<12&4294967295|v>>>20),v=D+(y^b&(m^y))+w[6]+2821735955&4294967295,D=b+(v<<17&4294967295|v>>>15),v=y+(m^D&(b^m))+w[7]+4249261313&4294967295,y=D+(v<<22&4294967295|v>>>10),v=m+(b^y&(D^b))+w[8]+1770035416&4294967295,m=y+(v<<7&4294967295|v>>>25),v=b+(D^m&(y^D))+w[9]+2336552879&4294967295,b=m+(v<<12&4294967295|v>>>20),v=D+(y^b&(m^y))+w[10]+4294925233&4294967295,D=b+(v<<17&4294967295|v>>>15),v=y+(m^D&(b^m))+w[11]+2304563134&4294967295,y=D+(v<<22&4294967295|v>>>10),v=m+(b^y&(D^b))+w[12]+1804603682&4294967295,m=y+(v<<7&4294967295|v>>>25),v=b+(D^m&(y^D))+w[13]+4254626195&4294967295,b=m+(v<<12&4294967295|v>>>20),v=D+(y^b&(m^y))+w[14]+2792965006&4294967295,D=b+(v<<17&4294967295|v>>>15),v=y+(m^D&(b^m))+w[15]+1236535329&4294967295,y=D+(v<<22&4294967295|v>>>10),v=m+(D^b&(y^D))+w[1]+4129170786&4294967295,m=y+(v<<5&4294967295|v>>>27),v=b+(y^D&(m^y))+w[6]+3225465664&4294967295,b=m+(v<<9&4294967295|v>>>23),v=D+(m^y&(b^m))+w[11]+643717713&4294967295,D=b+(v<<14&4294967295|v>>>18),v=y+(b^m&(D^b))+w[0]+3921069994&4294967295,y=D+(v<<20&4294967295|v>>>12),v=m+(D^b&(y^D))+w[5]+3593408605&4294967295,m=y+(v<<5&4294967295|v>>>27),v=b+(y^D&(m^y))+w[10]+38016083&4294967295,b=m+(v<<9&4294967295|v>>>23),v=D+(m^y&(b^m))+w[15]+3634488961&4294967295,D=b+(v<<14&4294967295|v>>>18),v=y+(b^m&(D^b))+w[4]+3889429448&4294967295,y=D+(v<<20&4294967295|v>>>12),v=m+(D^b&(y^D))+w[9]+568446438&4294967295,m=y+(v<<5&4294967295|v>>>27),v=b+(y^D&(m^y))+w[14]+3275163606&4294967295,b=m+(v<<9&4294967295|v>>>23),v=D+(m^y&(b^m))+w[3]+4107603335&4294967295,D=b+(v<<14&4294967295|v>>>18),v=y+(b^m&(D^b))+w[8]+1163531501&4294967295,y=D+(v<<20&4294967295|v>>>12),v=m+(D^b&(y^D))+w[13]+2850285829&4294967295,m=y+(v<<5&4294967295|v>>>27),v=b+(y^D&(m^y))+w[2]+4243563512&4294967295,b=m+(v<<9&4294967295|v>>>23),v=D+(m^y&(b^m))+w[7]+1735328473&4294967295,D=b+(v<<14&4294967295|v>>>18),v=y+(b^m&(D^b))+w[12]+2368359562&4294967295,y=D+(v<<20&4294967295|v>>>12),v=m+(y^D^b)+w[5]+4294588738&4294967295,m=y+(v<<4&4294967295|v>>>28),v=b+(m^y^D)+w[8]+2272392833&4294967295,b=m+(v<<11&4294967295|v>>>21),v=D+(b^m^y)+w[11]+1839030562&4294967295,D=b+(v<<16&4294967295|v>>>16),v=y+(D^b^m)+w[14]+4259657740&4294967295,y=D+(v<<23&4294967295|v>>>9),v=m+(y^D^b)+w[1]+2763975236&4294967295,m=y+(v<<4&4294967295|v>>>28),v=b+(m^y^D)+w[4]+1272893353&4294967295,b=m+(v<<11&4294967295|v>>>21),v=D+(b^m^y)+w[7]+4139469664&4294967295,D=b+(v<<16&4294967295|v>>>16),v=y+(D^b^m)+w[10]+3200236656&4294967295,y=D+(v<<23&4294967295|v>>>9),v=m+(y^D^b)+w[13]+681279174&4294967295,m=y+(v<<4&4294967295|v>>>28),v=b+(m^y^D)+w[0]+3936430074&4294967295,b=m+(v<<11&4294967295|v>>>21),v=D+(b^m^y)+w[3]+3572445317&4294967295,D=b+(v<<16&4294967295|v>>>16),v=y+(D^b^m)+w[6]+76029189&4294967295,y=D+(v<<23&4294967295|v>>>9),v=m+(y^D^b)+w[9]+3654602809&4294967295,m=y+(v<<4&4294967295|v>>>28),v=b+(m^y^D)+w[12]+3873151461&4294967295,b=m+(v<<11&4294967295|v>>>21),v=D+(b^m^y)+w[15]+530742520&4294967295,D=b+(v<<16&4294967295|v>>>16),v=y+(D^b^m)+w[2]+3299628645&4294967295,y=D+(v<<23&4294967295|v>>>9),v=m+(D^(y|~b))+w[0]+4096336452&4294967295,m=y+(v<<6&4294967295|v>>>26),v=b+(y^(m|~D))+w[7]+1126891415&4294967295,b=m+(v<<10&4294967295|v>>>22),v=D+(m^(b|~y))+w[14]+2878612391&4294967295,D=b+(v<<15&4294967295|v>>>17),v=y+(b^(D|~m))+w[5]+4237533241&4294967295,y=D+(v<<21&4294967295|v>>>11),v=m+(D^(y|~b))+w[12]+1700485571&4294967295,m=y+(v<<6&4294967295|v>>>26),v=b+(y^(m|~D))+w[3]+2399980690&4294967295,b=m+(v<<10&4294967295|v>>>22),v=D+(m^(b|~y))+w[10]+4293915773&4294967295,D=b+(v<<15&4294967295|v>>>17),v=y+(b^(D|~m))+w[1]+2240044497&4294967295,y=D+(v<<21&4294967295|v>>>11),v=m+(D^(y|~b))+w[8]+1873313359&4294967295,m=y+(v<<6&4294967295|v>>>26),v=b+(y^(m|~D))+w[15]+4264355552&4294967295,b=m+(v<<10&4294967295|v>>>22),v=D+(m^(b|~y))+w[6]+2734768916&4294967295,D=b+(v<<15&4294967295|v>>>17),v=y+(b^(D|~m))+w[13]+1309151649&4294967295,y=D+(v<<21&4294967295|v>>>11),v=m+(D^(y|~b))+w[4]+4149444226&4294967295,m=y+(v<<6&4294967295|v>>>26),v=b+(y^(m|~D))+w[11]+3174756917&4294967295,b=m+(v<<10&4294967295|v>>>22),v=D+(m^(b|~y))+w[2]+718787259&4294967295,D=b+(v<<15&4294967295|v>>>17),v=y+(b^(D|~m))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+m&4294967295,E.g[1]=E.g[1]+(D+(v<<21&4294967295|v>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,m){m===void 0&&(m=E.length);for(var y=m-this.blockSize,w=this.B,D=this.h,b=0;b<m;){if(D==0)for(;b<=y;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<m;)if(w[D++]=E.charCodeAt(b++),D==this.blockSize){i(this,w),D=0;break}}else for(;b<m;)if(w[D++]=E[b++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=m},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var m=1;m<E.length-8;++m)E[m]=0;var y=8*this.o;for(m=E.length-8;m<E.length;++m)E[m]=y&255,y/=256;for(this.u(E),E=Array(16),m=y=0;4>m;++m)for(var w=0;32>w;w+=8)E[y++]=this.g[m]>>>w&255;return E};function s(E,m){var y=c;return Object.prototype.hasOwnProperty.call(y,E)?y[E]:y[E]=m(E)}function o(E,m){this.h=m;for(var y=[],w=!0,D=E.length-1;0<=D;D--){var b=E[D]|0;w&&b==m||(y[D]=b,w=!1)}this.g=y}var c={};function u(E){return-128<=E&&128>E?s(E,function(m){return new o([m|0],0>m?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return R(d(-E));for(var m=[],y=1,w=0;E>=y;w++)m[w]=E/y|0,y*=4294967296;return new o(m,0)}function f(E,m){if(E.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(E.charAt(0)=="-")return R(f(E.substring(1),m));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(m,8)),w=g,D=0;D<E.length;D+=8){var b=Math.min(8,E.length-D),v=parseInt(E.substring(D,D+b),m);8>b?(b=d(Math.pow(m,b)),w=w.j(b).add(d(v))):(w=w.j(y),w=w.add(d(v)))}return w}var g=u(0),_=u(1),I=u(16777216);n=o.prototype,n.m=function(){if(N(this))return-R(this).m();for(var E=0,m=1,y=0;y<this.g.length;y++){var w=this.i(y);E+=(0<=w?w:4294967296+w)*m,m*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A(this))return"0";if(N(this))return"-"+R(this).toString(E);for(var m=d(Math.pow(E,6)),y=this,w="";;){var D=fe(y,m).g;y=F(y,D.j(m));var b=((0<y.g.length?y.g[0]:y.h)>>>0).toString(E);if(y=D,A(y))return b+w;for(;6>b.length;)b="0"+b;w=b+w}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function A(E){if(E.h!=0)return!1;for(var m=0;m<E.g.length;m++)if(E.g[m]!=0)return!1;return!0}function N(E){return E.h==-1}n.l=function(E){return E=F(this,E),N(E)?-1:A(E)?0:1};function R(E){for(var m=E.g.length,y=[],w=0;w<m;w++)y[w]=~E.g[w];return new o(y,~E.h).add(_)}n.abs=function(){return N(this)?R(this):this},n.add=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],w=0,D=0;D<=m;D++){var b=w+(this.i(D)&65535)+(E.i(D)&65535),v=(b>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);w=v>>>16,b&=65535,v&=65535,y[D]=v<<16|b}return new o(y,y[y.length-1]&-2147483648?-1:0)};function F(E,m){return E.add(R(m))}n.j=function(E){if(A(this)||A(E))return g;if(N(this))return N(E)?R(this).j(R(E)):R(R(this).j(E));if(N(E))return R(this.j(R(E)));if(0>this.l(I)&&0>E.l(I))return d(this.m()*E.m());for(var m=this.g.length+E.g.length,y=[],w=0;w<2*m;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<E.g.length;D++){var b=this.i(w)>>>16,v=this.i(w)&65535,Ht=E.i(D)>>>16,Gi=E.i(D)&65535;y[2*w+2*D]+=v*Gi,B(y,2*w+2*D),y[2*w+2*D+1]+=b*Gi,B(y,2*w+2*D+1),y[2*w+2*D+1]+=v*Ht,B(y,2*w+2*D+1),y[2*w+2*D+2]+=b*Ht,B(y,2*w+2*D+2)}for(w=0;w<m;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=m;w<2*m;w++)y[w]=0;return new o(y,0)};function B(E,m){for(;(E[m]&65535)!=E[m];)E[m+1]+=E[m]>>>16,E[m]&=65535,m++}function X(E,m){this.g=E,this.h=m}function fe(E,m){if(A(m))throw Error("division by zero");if(A(E))return new X(g,g);if(N(E))return m=fe(R(E),m),new X(R(m.g),R(m.h));if(N(m))return m=fe(E,R(m)),new X(R(m.g),m.h);if(30<E.g.length){if(N(E)||N(m))throw Error("slowDivide_ only works with positive integers.");for(var y=_,w=m;0>=w.l(E);)y=Ce(y),w=Ce(w);var D=Y(y,1),b=Y(w,1);for(w=Y(w,2),y=Y(y,2);!A(w);){var v=b.add(w);0>=v.l(E)&&(D=D.add(y),b=v),w=Y(w,1),y=Y(y,1)}return m=F(E,D.j(m)),new X(D,m)}for(D=g;0<=E.l(m);){for(y=Math.max(1,Math.floor(E.m()/m.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),b=d(y),v=b.j(m);N(v)||0<v.l(E);)y-=w,b=d(y),v=b.j(m);A(b)&&(b=_),D=D.add(b),E=F(E,v)}return new X(D,E)}n.A=function(E){return fe(this,E).h},n.and=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],w=0;w<m;w++)y[w]=this.i(w)&E.i(w);return new o(y,this.h&E.h)},n.or=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],w=0;w<m;w++)y[w]=this.i(w)|E.i(w);return new o(y,this.h|E.h)},n.xor=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],w=0;w<m;w++)y[w]=this.i(w)^E.i(w);return new o(y,this.h^E.h)};function Ce(E){for(var m=E.g.length+1,y=[],w=0;w<m;w++)y[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(y,E.h)}function Y(E,m){var y=m>>5;m%=32;for(var w=E.g.length-y,D=[],b=0;b<w;b++)D[b]=0<m?E.i(b+y)>>>m|E.i(b+y+1)<<32-m:E.i(b+y);return new o(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,op=kE.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,On=kE.Integer=o}).apply(typeof OE<"u"?OE:typeof self<"u"?self:typeof window<"u"?window:{});var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},an={};var ap,iO,Di,cp,vo,uu,up,lp,dp;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof cu=="object"&&cu];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var h=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in h))break e;h=h[T]}a=a[a.length-1],p=h[a],l=l(p),l!=p&&l!=null&&e(h,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var h=0,p=!1,T={next:function(){if(!p&&h<a.length){var C=h++;return{value:l(C,a[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return s(this,function(l,h){return h})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function g(a,l,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,p),a.apply(l,T)}}return function(){return a.apply(l,arguments)}}function _(a,l,h){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,_.apply(null,arguments)}function I(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function A(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,T,C){for(var x=Array(arguments.length-2),me=2;me<arguments.length;me++)x[me-2]=arguments[me];return l.prototype[T].apply(p,x)}}function N(a){let l=a.length;if(0<l){let h=Array(l);for(let p=0;p<l;p++)h[p]=a[p];return h}return[]}function R(a,l){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(u(p)){let T=a.length||0,C=p.length||0;a.length=T+C;for(let x=0;x<C;x++)a[T+x]=p[x]}else a.push(p)}}class F{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function B(a){return/^[\s\xa0]*$/.test(a)}function X(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function fe(a){return fe[" "](a),a}fe[" "]=function(){};var Ce=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function Y(a,l,h){for(let p in a)l.call(h,a[p],p,a)}function E(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function m(a){let l={};for(let h in a)l[h]=a[h];return l}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,l){let h,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(h in p)a[h]=p[h];for(let C=0;C<y.length;C++)h=y[C],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function D(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function b(a){c.setTimeout(()=>{throw a},0)}function v(){var a=Wu;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class Ht{constructor(){this.h=this.g=null}add(l,h){let p=Gi.get();p.set(l,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Gi=new F(()=>new gT,a=>a.reset());class gT{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Wi,Ki=!1,Wu=new Ht,am=()=>{let a=c.Promise.resolve(void 0);Wi=()=>{a.then(mT)}};var mT=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(h){b(h)}var l=Gi;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}Ki=!1};function dn(){this.s=this.s,this.C=this.C}dn.prototype.s=!1,dn.prototype.ma=function(){this.s||(this.s=!0,this.N())},dn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var yT=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return a}();function Qi(a,l){if(Be.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(Ce){e:{try{fe(l.nodeName);var T=!0;break e}catch{}T=!1}T||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:vT[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Qi.aa.h.call(this)}}A(Qi,Be);var vT={2:"touch",3:"pen",4:"mouse"};Qi.prototype.h=function(){Qi.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Yi="closure_listenable_"+(1e6*Math.random()|0),_T=0;function IT(a,l,h,p,T){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!p,this.ha=T,this.key=++_T,this.da=this.fa=!1}function Bo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function $o(a){this.src=a,this.g={},this.h=0}$o.prototype.add=function(a,l,h,p,T){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var x=Qu(a,l,p,T);return-1<x?(l=a[x],h||(l.fa=!1)):(l=new IT(l,this.src,C,!!p,T),l.fa=h,a.push(l)),l};function Ku(a,l){var h=l.type;if(h in a.g){var p=a.g[h],T=Array.prototype.indexOf.call(p,l,void 0),C;(C=0<=T)&&Array.prototype.splice.call(p,T,1),C&&(Bo(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Qu(a,l,h,p){for(var T=0;T<a.length;++T){var C=a[T];if(!C.da&&C.listener==l&&C.capture==!!h&&C.ha==p)return T}return-1}var Yu="closure_lm_"+(1e6*Math.random()|0),Zu={};function cm(a,l,h,p,T){if(p&&p.once)return lm(a,l,h,p,T);if(Array.isArray(l)){for(var C=0;C<l.length;C++)cm(a,l[C],h,p,T);return null}return h=tl(h),a&&a[Yi]?a.K(l,h,d(p)?!!p.capture:!!p,T):um(a,l,h,!1,p,T)}function um(a,l,h,p,T,C){if(!l)throw Error("Invalid event type");var x=d(T)?!!T.capture:!!T,me=Xu(a);if(me||(a[Yu]=me=new $o(a)),h=me.add(l,h,p,x,C),h.proxy)return h;if(p=wT(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)yT||(T=x),T===void 0&&(T=!1),a.addEventListener(l.toString(),p,T);else if(a.attachEvent)a.attachEvent(hm(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function wT(){function a(h){return l.call(a.src,a.listener,h)}let l=ET;return a}function lm(a,l,h,p,T){if(Array.isArray(l)){for(var C=0;C<l.length;C++)lm(a,l[C],h,p,T);return null}return h=tl(h),a&&a[Yi]?a.L(l,h,d(p)?!!p.capture:!!p,T):um(a,l,h,!0,p,T)}function dm(a,l,h,p,T){if(Array.isArray(l))for(var C=0;C<l.length;C++)dm(a,l[C],h,p,T);else p=d(p)?!!p.capture:!!p,h=tl(h),a&&a[Yi]?(a=a.i,l=String(l).toString(),l in a.g&&(C=a.g[l],h=Qu(C,h,p,T),-1<h&&(Bo(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete a.g[l],a.h--)))):a&&(a=Xu(a))&&(l=a.g[l.toString()],a=-1,l&&(a=Qu(l,h,p,T)),(h=-1<a?l[a]:null)&&Ju(h))}function Ju(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[Yi])Ku(l.i,a);else{var h=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(h,p,a.capture):l.detachEvent?l.detachEvent(hm(h),p):l.addListener&&l.removeListener&&l.removeListener(p),(h=Xu(l))?(Ku(h,a),h.h==0&&(h.src=null,l[Yu]=null)):Bo(a)}}}function hm(a){return a in Zu?Zu[a]:Zu[a]="on"+a}function ET(a,l){if(a.da)a=!0;else{l=new Qi(l,this);var h=a.listener,p=a.ha||a.src;a.fa&&Ju(a),a=h.call(p,l)}return a}function Xu(a){return a=a[Yu],a instanceof $o?a:null}var el="__closure_events_fn_"+(1e9*Math.random()>>>0);function tl(a){return typeof a=="function"?a:(a[el]||(a[el]=function(l){return a.handleEvent(l)}),a[el])}function $e(){dn.call(this),this.i=new $o(this),this.M=this,this.F=null}A($e,dn),$e.prototype[Yi]=!0,$e.prototype.removeEventListener=function(a,l,h,p){dm(this,a,l,h,p)};function Ke(a,l){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new Be(l,a);else if(l instanceof Be)l.target=l.target||a;else{var T=l;l=new Be(p,a),w(l,T)}if(T=!0,h)for(var C=h.length-1;0<=C;C--){var x=l.g=h[C];T=Ho(x,p,!0,l)&&T}if(x=l.g=a,T=Ho(x,p,!0,l)&&T,T=Ho(x,p,!1,l)&&T,h)for(C=0;C<h.length;C++)x=l.g=h[C],T=Ho(x,p,!1,l)&&T}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],p=0;p<h.length;p++)Bo(h[p]);delete a.g[l],a.h--}}this.F=null},$e.prototype.K=function(a,l,h,p){return this.i.add(String(a),l,!1,h,p)},$e.prototype.L=function(a,l,h,p){return this.i.add(String(a),l,!0,h,p)};function Ho(a,l,h,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,C=0;C<l.length;++C){var x=l[C];if(x&&!x.da&&x.capture==h){var me=x.listener,Ve=x.ha||x.src;x.fa&&Ku(a.i,x),T=me.call(Ve,p)!==!1&&T}}return T&&!p.defaultPrevented}function fm(a,l,h){if(typeof a=="function")h&&(a=_(a,h));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function pm(a){a.g=fm(()=>{a.g=null,a.i&&(a.i=!1,pm(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class DT extends dn{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:pm(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zi(a){dn.call(this),this.h=a,this.g={}}A(Zi,dn);var gm=[];function mm(a){Y(a.g,function(l,h){this.g.hasOwnProperty(h)&&Ju(l)},a),a.g={}}Zi.prototype.N=function(){Zi.aa.N.call(this),mm(this)},Zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nl=c.JSON.stringify,TT=c.JSON.parse,bT=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function rl(){}rl.prototype.h=null;function ym(a){return a.h||(a.h=a.i())}function vm(){}var Ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function il(){Be.call(this,"d")}A(il,Be);function sl(){Be.call(this,"c")}A(sl,Be);var Un={},_m=null;function qo(){return _m=_m||new $e}Un.La="serverreachability";function Im(a){Be.call(this,Un.La,a)}A(Im,Be);function Xi(a){let l=qo();Ke(l,new Im(l))}Un.STAT_EVENT="statevent";function wm(a,l){Be.call(this,Un.STAT_EVENT,a),this.stat=l}A(wm,Be);function Qe(a){let l=qo();Ke(l,new wm(l,a))}Un.Ma="timingevent";function Em(a,l){Be.call(this,Un.Ma,a),this.size=l}A(Em,Be);function es(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function ts(){this.g=!0}ts.prototype.xa=function(){this.g=!1};function CT(a,l,h,p,T,C){a.info(function(){if(a.g)if(C)for(var x="",me=C.split("&"),Ve=0;Ve<me.length;Ve++){var le=me[Ve].split("=");if(1<le.length){var He=le[0];le=le[1];var qe=He.split("_");x=2<=qe.length&&qe[1]=="type"?x+(He+"="+le+"&"):x+(He+"=redacted&")}}else x=null;else x=C;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+l+`
`+h+`
`+x})}function ST(a,l,h,p,T,C,x){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+l+`
`+h+`
`+C+" "+x})}function Dr(a,l,h,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+RT(a,h)+(p?" "+p:"")})}function AT(a,l){a.info(function(){return"TIMEOUT: "+l})}ts.prototype.info=function(){};function RT(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var T=p[1];if(Array.isArray(T)&&!(1>T.length)){var C=T[0];if(C!="noop"&&C!="stop"&&C!="close")for(var x=1;x<T.length;x++)T[x]=""}}}}return nl(h)}catch{return l}}var zo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ol;function Go(){}A(Go,rl),Go.prototype.g=function(){return new XMLHttpRequest},Go.prototype.i=function(){return{}},ol=new Go;function hn(a,l,h,p){this.j=a,this.i=l,this.l=h,this.R=p||1,this.U=new Zi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tm}function Tm(){this.i=null,this.g="",this.h=!1}var bm={},al={};function cl(a,l,h){a.L=1,a.v=Yo(qt(l)),a.m=h,a.P=!0,Cm(a,null)}function Cm(a,l){a.F=Date.now(),Wo(a),a.A=qt(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),jm(h.i,"t",p),a.C=0,h=a.j.J,a.h=new Tm,a.g=iy(a.j,h?l:null,!a.m),0<a.O&&(a.M=new DT(_(a.Y,a,a.g),a.O)),l=a.U,h=a.g,p=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(gm[0]=T.toString()),T=gm);for(var C=0;C<T.length;C++){var x=cm(h,T[C],p||l.handleEvent,!1,l.h||l);if(!x)break;l.g[x.key]=x}l=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),Xi(),CT(a.i,a.u,a.A,a.l,a.R,a.m)}hn.prototype.ca=function(a){a=a.target;let l=this.M;l&&zt(a)==3?l.j():this.Y(a)},hn.prototype.Y=function(a){try{if(a==this.g)e:{let qe=zt(this.g);var l=this.g.Ba();let Cr=this.g.Z();if(!(3>qe)&&(qe!=3||this.g&&(this.h.h||this.g.oa()||Wm(this.g)))){this.J||qe!=4||l==7||(l==8||0>=Cr?Xi(3):Xi(2)),ul(this);var h=this.g.Z();this.X=h;t:if(Sm(this)){var p=Wm(this.g);a="";var T=p.length,C=zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jn(this),ns(this);var x="";break t}this.h.i=new c.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(C&&l==T-1)});p.length=0,this.h.g+=a,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=h==200,ST(this.i,this.u,this.A,this.l,this.R,qe,h),this.o){if(this.T&&!this.K){t:{if(this.g){var me,Ve=this.g;if((me=Ve.g?Ve.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(me)){var le=me;break t}}le=null}if(h=le)Dr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ll(this,h);else{this.o=!1,this.s=3,Qe(12),jn(this),ns(this);break e}}if(this.P){h=!0;let It;for(;!this.J&&this.C<x.length;)if(It=NT(this,x),It==al){qe==4&&(this.s=4,Qe(14),h=!1),Dr(this.i,this.l,null,"[Incomplete Response]");break}else if(It==bm){this.s=4,Qe(15),Dr(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else Dr(this.i,this.l,It,null),ll(this,It);if(Sm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||x.length!=0||this.h.h||(this.s=1,Qe(16),h=!1),this.o=this.o&&h,!h)Dr(this.i,this.l,x,"[Invalid Chunked Response]"),jn(this),ns(this);else if(0<x.length&&!this.W){this.W=!0;var He=this.j;He.g==this&&He.ba&&!He.M&&(He.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),ml(He),He.M=!0,Qe(11))}}else Dr(this.i,this.l,x,null),ll(this,x);qe==4&&jn(this),this.o&&!this.J&&(qe==4?ey(this.j,this):(this.o=!1,Wo(this)))}else WT(this.g),h==400&&0<x.indexOf("Unknown SID")?(this.s=3,Qe(12)):(this.s=0,Qe(13)),jn(this),ns(this)}}}catch{}finally{}};function Sm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function NT(a,l){var h=a.C,p=l.indexOf(`
`,h);return p==-1?al:(h=Number(l.substring(h,p)),isNaN(h)?bm:(p+=1,p+h>l.length?al:(l=l.slice(p,p+h),a.C=p+h,l)))}hn.prototype.cancel=function(){this.J=!0,jn(this)};function Wo(a){a.S=Date.now()+a.I,Am(a,a.I)}function Am(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=es(_(a.ba,a),l)}function ul(a){a.B&&(c.clearTimeout(a.B),a.B=null)}hn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(AT(this.i,this.A),this.L!=2&&(Xi(),Qe(17)),jn(this),this.s=2,ns(this)):Am(this,this.S-a)};function ns(a){a.j.G==0||a.J||ey(a.j,a)}function jn(a){ul(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,mm(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function ll(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||dl(h.h,a))){if(!a.K&&dl(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)ta(h),Xo(h);else break e;gl(h),Qe(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=es(_(h.Za,h),6e3));if(1>=Mm(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else $n(h,11)}else if((a.K||h.g==a)&&ta(h),!B(l))for(T=h.Da.g.parse(l),l=0;l<T.length;l++){let le=T[l];if(h.T=le[0],le=le[1],h.G==2)if(le[0]=="c"){h.K=le[1],h.ia=le[2];let He=le[3];He!=null&&(h.la=He,h.j.info("VER="+h.la));let qe=le[4];qe!=null&&(h.Aa=qe,h.j.info("SVER="+h.Aa));let Cr=le[5];Cr!=null&&typeof Cr=="number"&&0<Cr&&(p=1.5*Cr,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let It=a.g;if(It){let ra=It.g?It.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ra){var C=p.h;C.g||ra.indexOf("spdy")==-1&&ra.indexOf("quic")==-1&&ra.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(hl(C,C.h),C.h=null))}if(p.D){let yl=It.g?It.g.getResponseHeader("X-HTTP-Session-Id"):null;yl&&(p.ya=yl,_e(p.I,p.D,yl))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var x=a;if(p.qa=ry(p,p.J?p.ia:null,p.W),x.K){xm(p.h,x);var me=x,Ve=p.L;Ve&&(me.I=Ve),me.B&&(ul(me),Wo(me)),p.g=x}else Jm(p);0<h.i.length&&ea(h)}else le[0]!="stop"&&le[0]!="close"||$n(h,7);else h.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?$n(h,7):pl(h):le[0]!="noop"&&h.l&&h.l.ta(le),h.v=0)}}Xi(4)}catch{}}var MT=class{constructor(a,l){this.g=a,this.map=l}};function Rm(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Mm(a){return a.h?1:a.g?a.g.size:0}function dl(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function hl(a,l){a.g?a.g.add(l):a.h=l}function xm(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}Rm.prototype.cancel=function(){if(this.i=Pm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Pm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return N(a.i)}function xT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],h=a.length,p=0;p<h;p++)l.push(a[p]);return l}l=[],h=0;for(p in a)l[h++]=a[p];return l}function PT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let p in a)l[h++]=p;return l}}}function Om(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=PT(a),p=xT(a),T=p.length,C=0;C<T;C++)l.call(void 0,p[C],h&&h[C],a)}var km=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OT(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),T=null;if(0<=p){var C=a[h].substring(0,p);T=a[h].substring(p+1)}else C=a[h];l(C,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Bn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Bn){this.h=a.h,Ko(this,a.j),this.o=a.o,this.g=a.g,Qo(this,a.s),this.l=a.l;var l=a.i,h=new ss;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),Lm(this,h),this.m=a.m}else a&&(l=String(a).match(km))?(this.h=!1,Ko(this,l[1]||"",!0),this.o=rs(l[2]||""),this.g=rs(l[3]||"",!0),Qo(this,l[4]),this.l=rs(l[5]||"",!0),Lm(this,l[6]||"",!0),this.m=rs(l[7]||"")):(this.h=!1,this.i=new ss(null,this.h))}Bn.prototype.toString=function(){var a=[],l=this.j;l&&a.push(is(l,Fm,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(is(l,Fm,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(is(h,h.charAt(0)=="/"?FT:LT,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",is(h,UT)),a.join("")};function qt(a){return new Bn(a)}function Ko(a,l,h){a.j=h?rs(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function Qo(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function Lm(a,l,h){l instanceof ss?(a.i=l,jT(a.i,a.h)):(h||(l=is(l,VT)),a.i=new ss(l,a.h))}function _e(a,l,h){a.i.set(l,h)}function Yo(a){return _e(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function rs(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function is(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,kT),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function kT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Fm=/[#\/\?@]/g,LT=/[#\?:]/g,FT=/[#\?]/g,VT=/[#\?@]/g,UT=/#/g;function ss(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function fn(a){a.g||(a.g=new Map,a.h=0,a.i&&OT(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=ss.prototype,n.add=function(a,l){fn(this),this.i=null,a=Tr(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function Vm(a,l){fn(a),l=Tr(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function Um(a,l){return fn(a),l=Tr(a,l),a.g.has(l)}n.forEach=function(a,l){fn(this),this.g.forEach(function(h,p){h.forEach(function(T){a.call(l,T,p,this)},this)},this)},n.na=function(){fn(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let p=0;p<l.length;p++){let T=a[p];for(let C=0;C<T.length;C++)h.push(l[p])}return h},n.V=function(a){fn(this);let l=[];if(typeof a=="string")Um(this,a)&&(l=l.concat(this.g.get(Tr(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},n.set=function(a,l){return fn(this),this.i=null,a=Tr(this,a),Um(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function jm(a,l,h){Vm(a,l),0<h.length&&(a.i=null,a.g.set(Tr(a,l),N(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var p=l[h];let C=encodeURIComponent(String(p)),x=this.V(p);for(p=0;p<x.length;p++){var T=C;x[p]!==""&&(T+="="+encodeURIComponent(String(x[p]))),a.push(T)}}return this.i=a.join("&")};function Tr(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function jT(a,l){l&&!a.j&&(fn(a),a.i=null,a.g.forEach(function(h,p){var T=p.toLowerCase();p!=T&&(Vm(this,p),jm(this,T,h))},a)),a.j=l}function BT(a,l){let h=new ts;if(c.Image){let p=new Image;p.onload=I(pn,h,"TestLoadImage: loaded",!0,l,p),p.onerror=I(pn,h,"TestLoadImage: error",!1,l,p),p.onabort=I(pn,h,"TestLoadImage: abort",!1,l,p),p.ontimeout=I(pn,h,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function $T(a,l){let h=new ts,p=new AbortController,T=setTimeout(()=>{p.abort(),pn(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(C=>{clearTimeout(T),C.ok?pn(h,"TestPingServer: ok",!0,l):pn(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),pn(h,"TestPingServer: error",!1,l)})}function pn(a,l,h,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(h)}catch{}}function HT(){this.g=new bT}function qT(a,l,h){let p=h||"";try{Om(a,function(T,C){let x=T;d(T)&&(x=nl(T)),l.push(p+C+"="+encodeURIComponent(x))})}catch(T){throw l.push(p+"type="+encodeURIComponent("_badmap")),T}}function os(a){this.l=a.Ub||null,this.j=a.eb||!1}A(os,rl),os.prototype.g=function(){return new Zo(this.l,this.j)},os.prototype.i=function(a){return function(){return a}}({});function Zo(a,l){$e.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Zo,$e),n=Zo.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,cs(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,as(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,cs(this)),this.g&&(this.readyState=3,cs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?as(this):cs(this),this.readyState==3&&Bm(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,as(this))},n.Qa=function(a){this.g&&(this.response=a,as(this))},n.ga=function(){this.g&&as(this)};function as(a){a.readyState=4,a.l=null,a.j=null,a.v=null,cs(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function cs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function $m(a){let l="";return Y(a,function(h,p){l+=p,l+=":",l+=h,l+=`\r
`}),l}function fl(a,l,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=$m(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):_e(a,l,h))}function Ee(a){$e.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ee,$e);var zT=/^https?$/i,GT=["POST","PUT"];n=Ee.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ol.g(),this.v=this.o?ym(this.o):ym(ol),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(C){Hm(this,C);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)h.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(GT,l,void 0))||p||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,x]of h)this.g.setRequestHeader(C,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gm(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){Hm(this,C)}};function Hm(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,qm(a),Jo(a)}function qm(a){a.A||(a.A=!0,Ke(a,"complete"),Ke(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ke(this,"complete"),Ke(this,"abort"),Jo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jo(this,!0)),Ee.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?zm(this):this.bb())},n.bb=function(){zm(this)};function zm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||zt(a)!=4||a.Z()!=2)){if(a.u&&zt(a)==4)fm(a.Ea,0,a);else if(Ke(a,"readystatechange"),zt(a)==4){a.h=!1;try{let x=a.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var p;if(p=x===0){var T=String(a.D).match(km)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),p=!zT.test(T?T.toLowerCase():"")}h=p}if(h)Ke(a,"complete"),Ke(a,"success");else{a.m=6;try{var C=2<zt(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",qm(a)}}finally{Jo(a)}}}}function Jo(a,l){if(a.g){Gm(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||Ke(a,"ready");try{h.onreadystatechange=p}catch{}}}function Gm(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function zt(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),TT(l)}};function Wm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function WT(a){let l={};a=(a.g&&2<=zt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(B(a[p]))continue;var h=D(a[p]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let C=l[T]||[];l[T]=C,C.push(h)}E(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function us(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function Km(a){this.Aa=0,this.i=[],this.j=new ts,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=us("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=us("baseRetryDelayMs",5e3,a),this.cb=us("retryDelaySeedMs",1e4,a),this.Wa=us("forwardChannelMaxRetries",2,a),this.wa=us("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Rm(a&&a.concurrentRequestLimit),this.Da=new HT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Km.prototype,n.la=8,n.G=1,n.connect=function(a,l,h,p){Qe(0),this.W=a,this.H=l||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=ry(this,null,this.W),ea(this)};function pl(a){if(Qm(a),a.G==3){var l=a.U++,h=qt(a.I);if(_e(h,"SID",a.K),_e(h,"RID",l),_e(h,"TYPE","terminate"),ls(a,h),l=new hn(a,a.j,l),l.L=2,l.v=Yo(qt(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=iy(l.j,null),l.g.ea(l.v)),l.F=Date.now(),Wo(l)}ny(a)}function Xo(a){a.g&&(ml(a),a.g.cancel(),a.g=null)}function Qm(a){Xo(a),a.u&&(c.clearTimeout(a.u),a.u=null),ta(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function ea(a){if(!Nm(a.h)&&!a.s){a.s=!0;var l=a.Ga;Wi||am(),Ki||(Wi(),Ki=!0),Wu.add(l,a),a.B=0}}function KT(a,l){return Mm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=es(_(a.Ga,a,l),ty(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new hn(this,this.j,a),C=this.o;if(this.S&&(C?(C=m(C),w(C,this.S)):C=this.S),this.m!==null||this.O||(T.H=C,C=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=Zm(this,T,l),h=qt(this.I),_e(h,"RID",a),_e(h,"CVER",22),this.D&&_e(h,"X-HTTP-Session-Id",this.D),ls(this,h),C&&(this.O?l="headers="+encodeURIComponent(String($m(C)))+"&"+l:this.m&&fl(h,this.m,C)),hl(this.h,T),this.Ua&&_e(h,"TYPE","init"),this.P?(_e(h,"$req",l),_e(h,"SID","null"),T.T=!0,cl(T,h,null)):cl(T,h,l),this.G=2}}else this.G==3&&(a?Ym(this,a):this.i.length==0||Nm(this.h)||Ym(this))};function Ym(a,l){var h;l?h=l.l:h=a.U++;let p=qt(a.I);_e(p,"SID",a.K),_e(p,"RID",h),_e(p,"AID",a.T),ls(a,p),a.m&&a.o&&fl(p,a.m,a.o),h=new hn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=Zm(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),hl(a.h,h),cl(h,p,l)}function ls(a,l){a.H&&Y(a.H,function(h,p){_e(l,p,h)}),a.l&&Om({},function(h,p){_e(l,p,h)})}function Zm(a,l,h){h=Math.min(a.i.length,h);var p=a.l?_(a.l.Na,a.l,a):null;e:{var T=a.i;let C=-1;for(;;){let x=["count="+h];C==-1?0<h?(C=T[0].g,x.push("ofs="+C)):C=0:x.push("ofs="+C);let me=!0;for(let Ve=0;Ve<h;Ve++){let le=T[Ve].g,He=T[Ve].map;if(le-=C,0>le)C=Math.max(0,T[Ve].g-100),me=!1;else try{qT(He,x,"req"+le+"_")}catch{p&&p(He)}}if(me){p=x.join("&");break e}}}return a=a.i.splice(0,h),l.D=a,p}function Jm(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;Wi||am(),Ki||(Wi(),Ki=!0),Wu.add(l,a),a.v=0}}function gl(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=es(_(a.Fa,a),ty(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Xm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=es(_(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qe(10),Xo(this),Xm(this))};function ml(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Xm(a){a.g=new hn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=qt(a.qa);_e(l,"RID","rpc"),_e(l,"SID",a.K),_e(l,"AID",a.T),_e(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&_e(l,"TO",a.ja),_e(l,"TYPE","xmlhttp"),ls(a,l),a.m&&a.o&&fl(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Yo(qt(l)),h.m=null,h.P=!0,Cm(h,a)}n.Za=function(){this.C!=null&&(this.C=null,Xo(this),gl(this),Qe(19))};function ta(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function ey(a,l){var h=null;if(a.g==l){ta(a),ml(a),a.g=null;var p=2}else if(dl(a.h,l))h=l.D,xm(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var T=a.B;p=qo(),Ke(p,new Em(p,h)),ea(a)}else Jm(a);else if(T=l.s,T==3||T==0&&0<l.X||!(p==1&&KT(a,l)||p==2&&gl(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),T){case 1:$n(a,5);break;case 4:$n(a,10);break;case 3:$n(a,6);break;default:$n(a,2)}}}function ty(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function $n(a,l){if(a.j.info("Error code "+l),l==2){var h=_(a.fb,a),p=a.Xa;let T=!p;p=new Bn(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ko(p,"https"),Yo(p),T?BT(p.toString(),h):$T(p.toString(),h)}else Qe(2);a.G=0,a.l&&a.l.sa(l),ny(a),Qm(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Qe(2)):(this.j.info("Failed to ping google.com"),Qe(1))};function ny(a){if(a.G=0,a.ka=[],a.l){let l=Pm(a.h);(l.length!=0||a.i.length!=0)&&(R(a.ka,l),R(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function ry(a,l,h){var p=h instanceof Bn?qt(h):new Bn(h);if(p.g!="")l&&(p.g=l+"."+p.g),Qo(p,p.s);else{var T=c.location;p=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var C=new Bn(null);p&&Ko(C,p),l&&(C.g=l),T&&Qo(C,T),h&&(C.l=h),p=C}return h=a.D,l=a.ya,h&&l&&_e(p,h,l),_e(p,"VER",a.la),ls(a,p),p}function iy(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new Ee(new os({eb:h})):new Ee(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function sy(){}n=sy.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function na(){}na.prototype.g=function(a,l){return new nt(a,l)};function nt(a,l){$e.call(this),this.g=new Km(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!B(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!B(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new br(this)}A(nt,$e),nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nt.prototype.close=function(){pl(this.g)},nt.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=nl(a),a=h);l.i.push(new MT(l.Ya++,a)),l.G==3&&ea(l)},nt.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,nt.aa.N.call(this)};function oy(a){il.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let h in l){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}A(oy,il);function ay(){sl.call(this),this.status=1}A(ay,sl);function br(a){this.g=a}A(br,sy),br.prototype.ua=function(){Ke(this.g,"a")},br.prototype.ta=function(a){Ke(this.g,new oy(a))},br.prototype.sa=function(a){Ke(this.g,new ay)},br.prototype.ra=function(){Ke(this.g,"b")},na.prototype.createWebChannel=na.prototype.g,nt.prototype.send=nt.prototype.o,nt.prototype.open=nt.prototype.m,nt.prototype.close=nt.prototype.close,dp=an.createWebChannelTransport=function(){return new na},lp=an.getStatEventTarget=function(){return qo()},up=an.Event=Un,uu=an.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,vo=an.ErrorCode=zo,Dm.COMPLETE="complete",cp=an.EventType=Dm,vm.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",$e.prototype.listen=$e.prototype.K,Di=an.WebChannel=vm,iO=an.FetchXmlHttpFactory=os,Ee.prototype.listenOnce=Ee.prototype.L,Ee.prototype.getLastError=Ee.prototype.Ka,Ee.prototype.getLastErrorCode=Ee.prototype.Ba,Ee.prototype.getStatus=Ee.prototype.Z,Ee.prototype.getResponseJson=Ee.prototype.Oa,Ee.prototype.getResponseText=Ee.prototype.oa,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Ha,ap=an.XhrIo=Ee}).apply(typeof cu<"u"?cu:typeof self<"u"?self:typeof window<"u"?window:{});var LE="@firebase/firestore";var Fe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Fe.UNAUTHENTICATED=new Fe(null),Fe.GOOGLE_CREDENTIALS=new Fe("google-credentials-uid"),Fe.FIRST_PARTY=new Fe("first-party-uid"),Fe.MOCK_USER=new Fe("mock-user");var qi="10.14.0";var vr=new Nn("@firebase/firestore");function _o(){return vr.logLevel}function k(n,...e){if(vr.logLevel<=ne.DEBUG){let t=e.map(qg);vr.debug(`Firestore (${qi}): ${n}`,...t)}}function un(n,...e){if(vr.logLevel<=ne.ERROR){let t=e.map(qg);vr.error(`Firestore (${qi}): ${n}`,...t)}}function xi(n,...e){if(vr.logLevel<=ne.WARN){let t=e.map(qg);vr.warn(`Firestore (${qi}): ${n}`,...t)}}function qg(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function W(n="Unexpected state"){let e=`FIRESTORE (${qi}) INTERNAL ASSERTION FAILED: `+n;throw un(e),new Error(e)}function Te(n,e){n||W()}function ae(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends yt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var pu=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},yp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fe.UNAUTHENTICATED))}shutdown(){}},vp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},_p=class{constructor(e){this.t=e,this.currentUser=Fe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new kn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>S(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new kn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new pu(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Fe(e)}},Ip=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Fe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},wp=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Ip(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Fe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ep=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Dp=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Te(this.o===void 0);let r=s=>{s.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,k("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Te(typeof t.token=="string"),this.R=t.token,new Ep(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function sO(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Tp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=sO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function he(n,e){return n<e?-1:n>e?1:0}function Pi(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var _t=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new _t(0,0))}static max(){return new n(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var gu=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&W(),r===void 0?r=e.length-t:r>e.length-t&&W(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ne=class n extends gu{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},oO=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Nt=class n extends gu{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return oO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new V(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new V(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new V(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var j=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ne.fromString(e))}static fromName(e){return new n(Ne.fromString(e).popFirst(5))}static empty(){return new n(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ne(e.slice()))}};var bp=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};bp.UNKNOWN_ID=-1;function aO(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new _t(t+1,0):new _t(t,r));return new _r(i,j.empty(),e)}function cO(n){return new _r(n.readTime,n.key,-1)}var _r=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),j.empty(),-1)}static max(){return new n(Q.max(),j.empty(),-1)}};function uO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=j.comparator(n.documentKey,e.documentKey),t!==0?t:he(n.largestBatchId,e.largestBatchId))}var lO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zg(n){return S(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==lO)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let d=u;t(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function dO(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vo(n){return n.name==="IndexedDbTransactionError"}var mD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ju(n){return n==null}function mu(n){return n===0&&1/n==-1/0}var hO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],WH=[...hO,"documentOverlays"],fO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pO=fO,gO=[...pO,"indexConfiguration","indexState","indexEntries"];var KH=[...gO,"globals"];function FE(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bu(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var be=class n{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Si(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Si(this.root,e,this.comparator,!1)}getReverseIterator(){return new Si(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Si(this.root,e,this.comparator,!0)}},Si=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ut=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();let e=this.left.check();if(e!==this.right.check())throw W();return e+(this.isRed()?0:1)}};Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ge=class n{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yu(this.data.getIterator())}getIteratorFrom(e){return new yu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},yu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var pr=class n{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ge(Nt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pi(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var vu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var We=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vu("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};We.EMPTY_BYTE_STRING=new We("");var yO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ln(n){if(Te(!!n),typeof n=="string"){let e=0,t=yO.exec(n);if(Te(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:we(n.seconds),nanos:we(n.nanos)}}function we(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ln(n){return typeof n=="string"?We.fromBase64String(n):We.fromUint8Array(n)}function Gg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Wg(n){let e=n.mapValue.fields.__previous_value__;return Gg(e)?Wg(e):e}function Co(n){let e=ln(n.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}var Sp=class{constructor(e,t,r,i,s,o,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},_u=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var lu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ir(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gg(n)?4:vD(n)?9007199254740991:yD(n)?10:11:W()}function Bt(n,e){if(n===e)return!0;let t=Ir(n);if(t!==Ir(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Co(n).isEqual(Co(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ln(i.timestampValue),c=ln(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Ln(i.bytesValue).isEqual(Ln(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return we(i.geoPointValue.latitude)===we(s.geoPointValue.latitude)&&we(i.geoPointValue.longitude)===we(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return we(i.integerValue)===we(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=we(i.doubleValue),c=we(s.doubleValue);return o===c?mu(o)===mu(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Pi(n.arrayValue.values||[],e.arrayValue.values||[],Bt);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(FE(o)!==FE(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Bt(o[u],c[u])))return!1;return!0}(n,e);default:return W()}}function So(n,e){return(n.values||[]).find(t=>Bt(t,e))!==void 0}function Oi(n,e){if(n===e)return 0;let t=Ir(n),r=Ir(e);if(t!==r)return he(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return he(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=we(s.integerValue||s.doubleValue),u=we(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return VE(n.timestampValue,e.timestampValue);case 4:return VE(Co(n),Co(e));case 5:return he(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Ln(s),u=Ln(o);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){let f=he(c[d],u[d]);if(f!==0)return f}return he(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=he(we(s.latitude),we(o.latitude));return c!==0?c:he(we(s.longitude),we(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return UE(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,d,f;let g=s.fields||{},_=o.fields||{},I=(c=g.value)===null||c===void 0?void 0:c.arrayValue,A=(u=_.value)===null||u===void 0?void 0:u.arrayValue,N=he(((d=I?.values)===null||d===void 0?void 0:d.length)||0,((f=A?.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:UE(I,A)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===lu.mapValue&&o===lu.mapValue)return 0;if(s===lu.mapValue)return 1;if(o===lu.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){let _=he(u[g],f[g]);if(_!==0)return _;let I=Oi(c[u[g]],d[f[g]]);if(I!==0)return I}return he(u.length,f.length)}(n.mapValue,e.mapValue);default:throw W()}}function VE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return he(n,e);let t=ln(n),r=ln(e),i=he(t.seconds,r.seconds);return i!==0?i:he(t.nanos,r.nanos)}function UE(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Oi(t[i],r[i]);if(s)return s}return he(t.length,r.length)}function ki(n){return Ap(n)}function Ap(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ln(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ln(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return j.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Ap(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Ap(t.fields[o])}`;return i+"}"}(n.mapValue):W()}function Rp(n){return!!n&&"integerValue"in n}function Kg(n){return!!n&&"arrayValue"in n}function jE(n){return!!n&&"nullValue"in n}function BE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hp(n){return!!n&&"mapValue"in n}function yD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function wo(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Bu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=wo(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wo(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var cn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wo(t)}setAll(e){let t=Nt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=wo(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());hp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];hp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Bu(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(wo(this.value))}};var Mt=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),cn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),cn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Li=class{constructor(e,t){this.position=e,this.inclusive=t}};function $E(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),t.key):r=Oi(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function HE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bt(n.position[t],e.position[t]))return!1;return!0}var Fi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function vO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Iu=class{},Pe=class n extends Iu{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Mp(e,t,r):t==="array-contains"?new Op(e,r):t==="in"?new kp(e,r):t==="not-in"?new Lp(e,r):t==="array-contains-any"?new Fp(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xp(e,r):new Pp(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Oi(t,this.value)):t!==null&&Ir(this.value)===Ir(t)&&this.matchesComparison(Oi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$t=class n extends Iu{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return _D(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function _D(n){return n.op==="and"}function ID(n){return _O(n)&&_D(n)}function _O(n){for(let e of n.filters)if(e instanceof $t)return!1;return!0}function Np(n){if(n instanceof Pe)return n.field.canonicalString()+n.op.toString()+ki(n.value);if(ID(n))return n.filters.map(e=>Np(e)).join(",");{let e=n.filters.map(t=>Np(t)).join(",");return`${n.op}(${e})`}}function wD(n,e){return n instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.field.isEqual(i.field)&&Bt(r.value,i.value)}(n,e):n instanceof $t?function(r,i){return i instanceof $t&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&wD(o,i.filters[c]),!0):!1}(n,e):void W()}function ED(n){return n instanceof Pe?function(t){return`${t.field.canonicalString()} ${t.op} ${ki(t.value)}`}(n):n instanceof $t?function(t){return t.op.toString()+" {"+t.getFilters().map(ED).join(" ,")+"}"}(n):"Filter"}var Mp=class extends Pe{constructor(e,t,r){super(e,t,r),this.key=j.fromName(r.referenceValue)}matches(e){let t=j.comparator(e.key,this.key);return this.matchesComparison(t)}},xp=class extends Pe{constructor(e,t){super(e,"in",t),this.keys=DD("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Pp=class extends Pe{constructor(e,t){super(e,"not-in",t),this.keys=DD("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function DD(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>j.fromName(r.referenceValue))}var Op=class extends Pe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Kg(t)&&So(t.arrayValue,this.value)}},kp=class extends Pe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&So(this.value.arrayValue,t)}},Lp=class extends Pe{constructor(e,t){super(e,"not-in",t)}matches(e){if(So(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!So(this.value.arrayValue,t)}},Fp=class extends Pe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Kg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>So(this.value.arrayValue,r))}};var Vp=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function qE(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Vp(n,e,t,r,i,s,o)}function Qg(n){let e=ae(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Np(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ju(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ki(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ki(r)).join(",")),e.ue=t}return e.ue}function Yg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wD(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HE(n.startAt,e.startAt)&&HE(n.endAt,e.endAt)}function Up(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Vi=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function IO(n,e,t,r,i,s,o,c){return new Vi(n,e,t,r,i,s,o,c)}function Zg(n){return new Vi(n)}function zE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wO(n){return n.collectionGroup!==null}function Eo(n){let e=ae(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ge(Nt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Fi(s,r))}),t.has(Nt.keyField().canonicalString())||e.ce.push(new Fi(Nt.keyField(),r))}return e.ce}function jt(n){let e=ae(n);return e.le||(e.le=EO(e,Eo(n))),e.le}function EO(n,e){if(n.limitType==="F")return qE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Fi(i.field,s)});let t=n.endAt?new Li(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Li(n.startAt.position,n.startAt.inclusive):null;return qE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function jp(n,e,t){return new Vi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $u(n,e){return Yg(jt(n),jt(e))&&n.limitType===e.limitType}function TD(n){return`${Qg(jt(n))}|lt:${n.limitType}`}function Ti(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ED(i)).join(", ")}]`),ju(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ki(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ki(i)).join(",")),`Target(${r})`}(jt(n))}; limitType=${n.limitType})`}function Hu(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):j.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Eo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let d=$E(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Eo(r),i)||r.endAt&&!function(o,c,u){let d=$E(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Eo(r),i))}(n,e)}function DO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bD(n){return(e,t)=>{let r=!1;for(let i of Eo(n)){let s=TO(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function TO(n,e,t){let r=n.field.isKeyField()?j.comparator(e.key,t.key):function(s,o,c){let u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Oi(u,d):W()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}var Fn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bu(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return mO(this.inner)}size(){return this.innerSize}};var bO=new be(j.comparator);function Vn(){return bO}var CD=new be(j.comparator);function Io(...n){let e=CD;for(let t of n)e=e.insert(t.key,t);return e}function CO(n){let e=CD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gr(){return Do()}function SD(){return Do()}function Do(){return new Fn(n=>n.toString(),(n,e)=>n.isEqual(e))}var YH=new be(j.comparator),SO=new Ge(j.comparator);function ue(...n){let e=SO;for(let t of n)e=e.add(t);return e}var AO=new Ge(he);function RO(){return AO}function NO(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(e)?"-0":e}}function MO(n){return{integerValue:""+n}}var Ui=class{constructor(){this._=void 0}};function xO(n,e,t){return n instanceof Ao?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Gg(s)&&(s=Wg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ji?AD(n,e):n instanceof Bi?RD(n,e):function(i,s){let o=OO(i,s),c=GE(o)+GE(i.Pe);return Rp(o)&&Rp(i.Pe)?MO(c):NO(i.serializer,c)}(n,e)}function PO(n,e,t){return n instanceof ji?AD(n,e):n instanceof Bi?RD(n,e):t}function OO(n,e){return n instanceof Ro?function(r){return Rp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ao=class extends Ui{},ji=class extends Ui{constructor(e){super(),this.elements=e}};function AD(n,e){let t=ND(e);for(let r of n.elements)t.some(i=>Bt(i,r))||t.push(r);return{arrayValue:{values:t}}}var Bi=class extends Ui{constructor(e){super(),this.elements=e}};function RD(n,e){let t=ND(e);for(let r of n.elements)t=t.filter(i=>!Bt(i,r));return{arrayValue:{values:t}}}var Ro=class extends Ui{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function GE(n){return we(n.integerValue||n.doubleValue)}function ND(n){return Kg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function kO(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ji&&i instanceof ji||r instanceof Bi&&i instanceof Bi?Pi(r.elements,i.elements,Bt):r instanceof Ro&&i instanceof Ro?Bt(r.Pe,i.Pe):r instanceof Ao&&i instanceof Ao}(n.transform,e.transform)}var To=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function hu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var No=class{};function MD(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bp(n.key,To.none()):new Mo(n.key,n.data,To.none());{let t=n.data,r=cn.empty(),i=new Ge(Nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new $i(n.key,r,new pr(i.toArray()),To.none())}}function LO(n,e,t){n instanceof Mo?function(i,s,o){let c=i.value.clone(),u=KE(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof $i?function(i,s,o){if(!hu(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=KE(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(xD(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function bo(n,e,t,r){return n instanceof Mo?function(s,o,c,u){if(!hu(s.precondition,o))return c;let d=s.value.clone(),f=QE(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof $i?function(s,o,c,u){if(!hu(s.precondition,o))return c;let d=QE(s.fieldTransforms,u,o),f=o.data;return f.setAll(xD(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,c){return hu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function WE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Pi(r,i,(s,o)=>kO(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Mo=class extends No{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},$i=class extends No{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function xD(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function KE(n,e,t){let r=new Map;Te(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,PO(o,c,t[i]))}return r}function QE(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,xO(s,o,e))}return r}var Bp=class extends No{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var $p=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&LO(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=bo(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=bo(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=SD();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let u=MD(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&Pi(this.mutations,e.mutations,(t,r)=>WE(t,r))&&Pi(this.baseMutations,e.baseMutations,(t,r)=>WE(t,r))}};var Hp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ae,oe;function PD(n){if(n===void 0)return un("GRPC error has no .code"),P.UNKNOWN;switch(n){case Ae.OK:return P.OK;case Ae.CANCELLED:return P.CANCELLED;case Ae.UNKNOWN:return P.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return P.INTERNAL;case Ae.UNAVAILABLE:return P.UNAVAILABLE;case Ae.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Ae.NOT_FOUND:return P.NOT_FOUND;case Ae.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Ae.ABORTED:return P.ABORTED;case Ae.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Ae.DATA_LOSS:return P.DATA_LOSS;default:return W()}}(oe=Ae||(Ae={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";var YE=null;function FO(){return new TextEncoder}var VO=new On([4294967295,4294967295],0);function ZE(n){let e=FO().encode(n),t=new op;return t.update(e),new Uint8Array(t.digest())}function JE(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new On([t,r],0),new On([i,s],0)]}var zp=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mr(`Invalid padding: ${t}`);if(r<0)throw new mr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new mr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=On.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(On.fromNumber(r)));return i.compare(VO)===1&&(i=new On([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=ZE(e),[r,i]=JE(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=ZE(e),[r,i]=JE(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},mr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var wu=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,xo.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new be(he),Vn(),ue())}},xo=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ue(),ue(),ue())}};var Ai=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Eu=class{constructor(e,t){this.targetId=e,this.me=t}},Du=class{constructor(e,t,r=We.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Tu=class{constructor(){this.fe=0,this.ge=eD(),this.pe=We.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),t=ue(),r=ue();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:W()}}),new xo(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=eD()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Gp=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vn(),this.qe=XE(),this.Qe=new be(he)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:W()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Up(s))if(r===0){let o=new j(s.path);this.Ue(t,o,Mt.newNoDocument(o,Q.min()))}else Te(r===1);else{let o=this.Ye(t);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(t);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}YE?.et(function(f,g,_,I,A){var N,R,F,B,X,fe;let Ce={localCacheCount:f,existenceFilterCount:g.count,databaseId:_.database,projectId:_.projectId},Y=g.unchangedNames;return Y&&(Ce.bloomFilter={applied:A===0,hashCount:(N=Y?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(B=(F=(R=Y?.bits)===null||R===void 0?void 0:R.bitmap)===null||F===void 0?void 0:F.length)!==null&&B!==void 0?B:0,padding:(fe=(X=Y?.bits)===null||X===void 0?void 0:X.padding)!==null&&fe!==void 0?fe:0,mightContain:E=>{var m;return(m=I?.mightContain(E))!==null&&m!==void 0&&m}}),Ce}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=Ln(r).toUint8Array()}catch(u){if(u instanceof vu)return xi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new zp(o,i,s)}catch(u){return xi(u instanceof mr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&Up(c.target)){let u=new j(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Mt.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ue();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new wu(e,t,this.Qe,this.ke,r);return this.ke=Vn(),this.qe=XE(),this.Qe=new be(he),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Tu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ge(he),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Tu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function XE(){return new be(j.comparator)}function eD(){return new be(j.comparator)}var UO={asc:"ASCENDING",desc:"DESCENDING"},jO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BO={and:"AND",or:"OR"},Wp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Kp(n,e){return n.useProto3Json||ju(e)?e:{value:e}}function $O(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ri(n){return Te(!!n),Q.fromTimestamp(function(t){let r=ln(t);return new _t(r.seconds,r.nanos)}(n))}function qO(n,e){return Qp(n,e).canonicalString()}function Qp(n,e){let t=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function OD(n){let e=Ne.fromString(n);return Te(UD(e)),e}function fp(n,e){let t=OD(e);if(t.get(1)!==n.databaseId.projectId)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new j(LD(t))}function kD(n,e){return qO(n.databaseId,e)}function zO(n){let e=OD(n);return e.length===4?Ne.emptyPath():LD(e)}function tD(n){return new Ne(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LD(n){return Te(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function GO(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:W()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(Te(f===void 0||typeof f=="string"),We.fromBase64String(f||"")):(Te(f===void 0||f instanceof Buffer||f instanceof Uint8Array),We.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let f=d.code===void 0?P.UNKNOWN:PD(d.code);return new V(f,d.message||"")}(o);t=new Du(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=fp(n,r.document.name),s=Ri(r.document.updateTime),o=r.document.createTime?Ri(r.document.createTime):Q.min(),c=new cn({mapValue:{fields:r.document.fields}}),u=Mt.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];t=new Ai(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=fp(n,r.document),s=r.readTime?Ri(r.readTime):Q.min(),o=Mt.newNoDocument(i,s),c=r.removedTargetIds||[];t=new Ai([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=fp(n,r.document),s=r.removedTargetIds||[];t=new Ai([],s,i,null)}else{if(!("filter"in e))return W();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new qp(i,s),c=r.targetId;t=new Eu(c,o)}}return t}function WO(n,e){return{documents:[kD(n,e.path)]}}function KO(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kD(n,i);let s=function(d){if(d.length!==0)return VD($t.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(_){return{field:bi(_.field),direction:ZO(_.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Kp(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function QO(n){let e=zO(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Te(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(g){let _=FD(g);return _ instanceof $t&&ID(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(_=>function(A){return new Fi(Ci(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(_))}(t.orderBy));let c=null;t.limit&&(c=function(g){let _;return _=typeof g=="object"?g.value:g,ju(_)?null:_}(t.limit));let u=null;t.startAt&&(u=function(g){let _=!!g.before,I=g.values||[];return new Li(I,_)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let _=!g.before,I=g.values||[];return new Li(I,_)}(t.endAt)),IO(e,i,o,s,c,"F",u,d)}function YO(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FD(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ci(t.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ci(t.unaryFilter.field);return Pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ci(t.unaryFilter.field);return Pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ci(t.unaryFilter.field);return Pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(n):n.fieldFilter!==void 0?function(t){return Pe.create(Ci(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $t.create(t.compositeFilter.filters.map(r=>FD(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W()}}(t.compositeFilter.op))}(n):W()}function ZO(n){return UO[n]}function JO(n){return jO[n]}function XO(n){return BO[n]}function bi(n){return{fieldPath:n.canonicalString()}}function Ci(n){return Nt.fromServerFormat(n.fieldPath)}function VD(n){return n instanceof Pe?function(t){if(t.op==="=="){if(BE(t.value))return{unaryFilter:{field:bi(t.field),op:"IS_NAN"}};if(jE(t.value))return{unaryFilter:{field:bi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BE(t.value))return{unaryFilter:{field:bi(t.field),op:"IS_NOT_NAN"}};if(jE(t.value))return{unaryFilter:{field:bi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bi(t.field),op:JO(t.op),value:t.value}}}(n):n instanceof $t?function(t){let r=t.getFilters().map(i=>VD(i));return r.length===1?r[0]:{compositeFilter:{op:XO(t.op),filters:r}}}(n):W()}function UD(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Po=class n{constructor(e,t,r,i,s=Q.min(),o=Q.min(),c=We.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Yp=class{constructor(e){this.ct=e}};function ek(n){let e=QO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jp(e,e.limit,"L"):e}var bu=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(we(e.integerValue));else if("doubleValue"in e){let r=we(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),mu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ln(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ln(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?vD(e)?this.dt(t,Number.MAX_SAFE_INTEGER):yD(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):W()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(we(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),j.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};bu.vt=new bu;var Zp=class{constructor(){this.un=new Jp}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(_r.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Jp=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ge(Ne.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(Ne.comparator)).toArray()}};var ZH=new Uint8Array(0);var Vt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(41943040,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);var Oo=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Xp=class{constructor(){this.changes=new Fn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var eg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var tg=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&bo(r.mutation,i,pr.empty(),_t.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){let i=gr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Io();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=gr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=Vn(),o=Do(),c=function(){return Do()}();return t.forEach((u,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof $i)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),bo(f.mutation,d,f.mutation.getFieldMask(),_t.now())):o.set(d.key,pr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),t.forEach((d,f)=>{var g;return c.set(d,new eg(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Do(),i=new be((o,c)=>o-c),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(u=>{let d=t.get(u);if(d===null)return;let f=r.get(u)||pr.empty();f=c.applyToLocalView(d,f),r.set(u,f);let g=(i.get(c.batchId)||ue()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,f=u.value,g=SD();f.forEach(_=>{if(!s.has(_)){let I=MD(t.get(_),r.get(_));I!==null&&g.set(_,I),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):M.resolve(gr()),c=-1,u=s;return o.next(d=>M.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ue())).next(f=>({batchId:c,changes:CO(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new j(t)).next(r=>{let i=Io();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Io();return this.indexManager.getCollectionParents(e,s).next(c=>M.forEach(c,u=>{let d=function(g,_){return new Vi(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,Mt.newInvalidDocument(f)))});let c=Io();return o.forEach((u,d)=>{let f=s.get(u);f!==void 0&&bo(f.mutation,d,pr.empty(),_t.now()),Hu(t,d)&&(c=c.insert(u,d))}),c})}};var ng=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ri(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:ek(i.bundledQuery),readTime:Ri(i.readTime)}}(t)),M.resolve()}};var rg=class{constructor(){this.overlays=new be(j.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=gr();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=gr(),s=t.length+1,o=new j(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new be((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=gr(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=gr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return M.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Hp(t,r));let s=this.Ir.get(t);s===void 0&&(s=ue(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var ig=class{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var ko=class{constructor(){this.Tr=new Ge(Re.Er),this.dr=new Ge(Re.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Re(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Re(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new j(new Ne([])),r=new Re(t,e),i=new Re(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new j(new Ne([])),r=new Re(t,e),i=new Re(t,e+1),s=ue();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Re(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Re=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return j.comparator(e.key,t.key)||he(e.wr,t.wr)}static Ar(e,t){return he(e.wr,t.wr)||j.comparator(e.key,t.key)}};var sg=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ge(Re.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new $p(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.br=this.br.add(new Re(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Re(t,0),i=new Re(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let c=this.Dr(o.wr);s.push(c)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(he);return t.forEach(i=>{let s=new Re(i,0),o=new Re(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;j.isDocumentKey(s)||(s=s.child(""));let o=new Re(new j(s),0),c=new Ge(he);return this.br.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),M.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Te(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(t.mutations,i=>{let s=new Re(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Re(t,0),i=this.br.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var og=class{constructor(e){this.Mr=e,this.docs=function(){return new be(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Mt.newInvalidDocument(t))}getEntries(e,t){let r=Vn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Mt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Vn(),o=t.path,c=new j(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||uO(cO(f),r)<=0||(i.has(f.key)||Hu(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,t,r,i){W()}Or(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ag(this)}getSize(e){return M.resolve(this.size)}},ag=class extends Xp{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var cg=class{constructor(e){this.persistence=e,this.Nr=new Fn(t=>Qg(t),Yg),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ko,this.targetCount=0,this.kr=Oo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}};var ug=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new mD(0),this.Kr=!1,this.Kr=!0,this.$r=new ig,this.referenceDelegate=e(this),this.Ur=new cg(this),this.indexManager=new Zp,this.remoteDocumentCache=function(i){return new og(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Yp(t),this.Gr=new ng(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new sg(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new lg(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},lg=class extends Cp{constructor(e){super(),this.currentSequenceNumber=e}},dg=class n{constructor(e){this.persistence=e,this.Jr=new ko,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw W()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=j.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var hg=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ue(),i=ue();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var fg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pg=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Zw()?8:dO(ct())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new fg;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(_o()<=ne.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Ti(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(_o()<=ne.DEBUG&&k("QueryEngine","Query:",Ti(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(_o()<=ne.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Ti(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jt(t))):M.resolve())}Yi(e,t){if(zE(t))return M.resolve(null);let r=jt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=jp(t,null,"F"),r=jt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ue(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.ts(t,c);return this.ns(t,d,o,u.readTime)?this.Yi(e,jp(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return zE(t)||i.isEqual(Q.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?M.resolve(null):(_o()<=ne.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ti(t)),this.rs(e,o,t,aO(i,-1)).next(c=>c))})}ts(e,t){let r=new Ge(bD(e));return t.forEach((i,s)=>{Hu(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return _o()<=ne.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Ti(t)),this.Ji.getDocumentsMatchingQuery(e,t,_r.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var gg=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new be(he),this._s=new Fn(s=>Qg(s),Yg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tg(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function tk(n,e,t,r){return new gg(n,e,t,r)}function jD(n,e){return S(this,null,function*(){let t=ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=ue();for(let d of i){o.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})})}function BD(n){let e=ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function nk(n,e){let t=ae(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((f,g)=>{let _=i.get(g);if(!_)return;c.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,g)));let I=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?I=I.withResumeToken(We.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(g,I),function(N,R,F){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(_,I,f)&&c.push(t.Ur.updateTargetData(s,I))});let u=Vn(),d=ue();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(rk(s,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(Q.min())){let f=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return M.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}function rk(n,e,t){let r=ue(),i=ue();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Vn();return t.forEach((c,u)=>{let d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):k("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function ik(n,e){let t=ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Po(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function mg(n,e,t){return S(this,null,function*(){let r=ae(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Vo(o))throw o;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function nD(n,e,t){let r=ae(n),i=Q.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){let g=ae(u),_=g._s.get(f);return _!==void 0?M.resolve(g.os.get(_)):g.Ur.getTargetData(d,f)}(r,o,jt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Q.min(),t?s:ue())).next(c=>(sk(r,DO(e),c),{documents:c,Ts:s})))}function sk(n,e,t){let r=n.us.get(e)||Q.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Cu=class{constructor(){this.activeTargetIds=RO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var yg=class{constructor(){this.so=new Cu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Cu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var vg=class{_o(e){}shutdown(){}};var Su=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var du=null;function pp(){return du===null?du=function(){return 268435456+Math.round(2147483648*Math.random())}():du++,"0x"+du.toString(16)}var ok={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var _g=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ze="WebChannelConnection",Ig=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let c=pp(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${c}:`,u,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,u,d,i).then(f=>(k("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw xi("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(t,r,i,s,o,c){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qi}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=ok[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=pp();return new Promise((o,c)=>{let u=new ap;u.setWithCredentials(!0),u.listenOnce(cp.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case vo.NO_ERROR:let f=u.getResponseJson();k(ze,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case vo.TIMEOUT:k(ze,`RPC '${e}' ${s} timed out`),c(new V(P.DEADLINE_EXCEEDED,"Request time out"));break;case vo.HTTP_ERROR:let g=u.getStatus();if(k(ze,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);let I=_?.error;if(I&&I.status&&I.message){let A=function(R){let F=R.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(F)>=0?F:P.UNKNOWN}(I.status);c(new V(A,I.message))}else c(new V(P.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new V(P.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{k(ze,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);k(ze,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=pp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dp(),c=lp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=s.join("");k(ze,`Creating RPC '${e}' stream ${i}: ${f}`,u);let g=o.createWebChannel(f,u),_=!1,I=!1,A=new _g({Io:R=>{I?k(ze,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(_||(k(ze,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),k(ze,`RPC '${e}' stream ${i} sending:`,R),g.send(R))},To:()=>g.close()}),N=(R,F,B)=>{R.listen(F,X=>{try{B(X)}catch(fe){setTimeout(()=>{throw fe},0)}})};return N(g,Di.EventType.OPEN,()=>{I||(k(ze,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),N(g,Di.EventType.CLOSE,()=>{I||(I=!0,k(ze,`RPC '${e}' stream ${i} transport closed`),A.So())}),N(g,Di.EventType.ERROR,R=>{I||(I=!0,xi(ze,`RPC '${e}' stream ${i} transport errored:`,R),A.So(new V(P.UNAVAILABLE,"The operation could not be completed")))}),N(g,Di.EventType.MESSAGE,R=>{var F;if(!I){let B=R.data[0];Te(!!B);let X=B,fe=X.error||((F=X[0])===null||F===void 0?void 0:F.error);if(fe){k(ze,`RPC '${e}' stream ${i} received error:`,fe);let Ce=fe.status,Y=function(y){let w=Ae[y];if(w!==void 0)return PD(w)}(Ce),E=fe.message;Y===void 0&&(Y=P.INTERNAL,E="Unknown error status: "+Ce+" with message "+fe.message),I=!0,A.So(new V(Y,E)),g.close()}else k(ze,`RPC '${e}' stream ${i} received:`,B),A.bo(B)}}),N(c,up.STAT_EVENT,R=>{R.stat===uu.PROXY?k(ze,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===uu.NOPROXY&&k(ze,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function gp(){return typeof document<"u"?document:null}function $D(n){return new Wp(n,!0)}var Au=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var wg=class{constructor(e,t,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Au(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return S(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return S(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return S(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(un(t.toString()),un("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new V(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>S(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Eg=class extends wg{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=GO(this.serializer,e),r=function(s){if(!("targetChange"in s))return Q.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?Ri(o.readTime):Q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=tD(this.serializer),t.addTarget=function(s,o){let c,u=o.target;if(c=Up(u)?{documents:WO(s,u)}:{query:KO(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=HO(s,o.resumeToken);let d=Kp(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Q.min())>0){c.readTime=$O(s,o.snapshotVersion.toTimestamp());let d=Kp(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=YO(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=tD(this.serializer),t.removeTarget=e,this.a_(t)}};var Dg=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Qp(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(P.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Qp(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(P.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Tg=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(un(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var bg=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>S(this,null,function*(){jo(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return S(this,null,function*(){let d=ae(u);d.L_.add(4),yield Uo(d),d.q_.set("Unknown"),d.L_.delete(4),yield qu(d)})}(this))}))}),this.q_=new Tg(r,i)}};function qu(n){return S(this,null,function*(){if(jo(n))for(let e of n.B_)yield e(!0)})}function Uo(n){return S(this,null,function*(){for(let e of n.B_)yield e(!1)})}function HD(n,e){let t=ae(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),tm(t)?em(t):zi(t).r_()&&Xg(t,e))}function Jg(n,e){let t=ae(n),r=zi(t);t.N_.delete(e),r.r_()&&qD(t,e),t.N_.size===0&&(r.r_()?r.o_():jo(t)&&t.q_.set("Unknown"))}function Xg(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zi(n).A_(e)}function qD(n,e){n.Q_.xe(e),zi(n).R_(e)}function em(n){n.Q_=new Gp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),zi(n).start(),n.q_.v_()}function tm(n){return jo(n)&&!zi(n).n_()&&n.N_.size>0}function jo(n){return ae(n).L_.size===0}function zD(n){n.Q_=void 0}function ak(n){return S(this,null,function*(){n.q_.set("Online")})}function ck(n){return S(this,null,function*(){n.N_.forEach((e,t)=>{Xg(n,e)})})}function uk(n,e){return S(this,null,function*(){zD(n),tm(n)?(n.q_.M_(e),em(n)):n.q_.set("Unknown")})}function lk(n,e,t){return S(this,null,function*(){if(n.q_.set("Online"),e instanceof Du&&e.state===2&&e.cause)try{yield function(i,s){return S(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rD(n,r)}else if(e instanceof Ai?n.Q_.Ke(e):e instanceof Eu?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Q.min()))try{let r=yield BD(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{let f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(We.EMPTY_BYTE_STRING,f.snapshotVersion)),qD(s,u);let g=new Po(f.target,u,d,f.sequenceNumber);Xg(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield rD(n,r)}})}function rD(n,e,t){return S(this,null,function*(){if(!Vo(e))throw e;n.L_.add(1),yield Uo(n),n.q_.set("Offline"),t||(t=()=>BD(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield qu(n)}))})}function iD(n,e){return S(this,null,function*(){let t=ae(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=jo(t);t.L_.add(3),yield Uo(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield qu(t)})}function dk(n,e){return S(this,null,function*(){let t=ae(n);e?(t.L_.delete(2),yield qu(t)):e||(t.L_.add(2),yield Uo(t),t.q_.set("Unknown"))})}function zi(n){return n.K_||(n.K_=function(t,r,i){let s=ae(t);return s.w_(),new Eg(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:ak.bind(null,n),Ro:ck.bind(null,n),mo:uk.bind(null,n),d_:lk.bind(null,n)}),n.B_.push(e=>S(this,null,function*(){e?(n.K_.s_(),tm(n)?em(n):n.q_.set("Unknown")):(yield n.K_.stop(),zD(n))}))),n.K_}var Cg=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function GD(n,e){if(un("AsyncQueue",`${e}: ${n}`),Vo(n))return new V(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Ru=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||j.comparator(t.key,r.key):(t,r)=>j.comparator(t.key,r.key),this.keyedMap=Io(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Nu=class{constructor(){this.W_=new be(j.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):W():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Hi=class n{constructor(e,t,r,i,s,o,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Ru.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Sg=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Ag=class{constructor(){this.queries=sD(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ae(t),s=i.queries;i.queries=sD(),s.forEach((o,c)=>{for(let u of c.j_)u.onError(r)})})(this,new V(P.ABORTED,"Firestore shutting down"))}};function sD(){return new Fn(n=>TD(n),$u)}function hk(n,e){return S(this,null,function*(){let t=ae(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Sg,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=GD(o,`Initialization of query '${Ti(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&nm(t)})}function fk(n,e){return S(this,null,function*(){let t=ae(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function pk(n,e){let t=ae(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&nm(t)}function gk(n,e,t){let r=ae(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function nm(n){n.Y_.forEach(e=>{e.next()})}var Rg,oD;(oD=Rg||(Rg={})).ea="default",oD.Cache="cache";var Ng=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Hi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Hi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rg.Cache}};var Mu=class{constructor(e){this.key=e}},xu=class{constructor(e){this.key=e}},Mg=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=bD(e),this.Ra=new Ru(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Nu,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{let _=i.get(f),I=Hu(this.query,g)?g:null,A=!!_&&this.mutatedKeys.has(_.key),N=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),R=!1;_&&I?_.data.isEqual(I.data)?A!==N&&(r.track({type:3,doc:I}),R=!0):this.ga(_,I)||(r.track({type:2,doc:I}),R=!0,(u&&this.Aa(I,u)>0||d&&this.Aa(I,d)<0)&&(c=!0)):!_&&I?(r.track({type:0,doc:I}),R=!0):_&&!I&&(r.track({type:1,doc:_}),R=!0,(u||d)&&(c=!0)),R&&(I?(o=o.add(I),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,g)=>function(I,A){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return N(I)-N(A)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Hi(this.query,e.Ra,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Nu,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new xu(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Mu(r))}),t}ba(e){this.Ta=e.Ts,this.da=ue();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Hi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},xg=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Pg=class{constructor(e){this.key=e,this.va=!1}},Og=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Fn(c=>TD(c),$u),this.Ma=new Map,this.xa=new Set,this.Oa=new be(j.comparator),this.Na=new Map,this.La=new ko,this.Ba={},this.ka=new Map,this.qa=Oo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function mk(n,e,t=!0){return S(this,null,function*(){let r=ZD(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield WD(r,e,t,!0),i})}function yk(n,e){return S(this,null,function*(){let t=ZD(n);yield WD(t,e,!0,!1)})}function WD(n,e,t,r){return S(this,null,function*(){let i=yield ik(n.localStore,jt(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield vk(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&HD(n.remoteStore,i),c})}function vk(n,e,t,r,i){return S(this,null,function*(){n.Ka=(g,_,I)=>function(N,R,F,B){return S(this,null,function*(){let X=R.view.ma(F);X.ns&&(X=yield nD(N.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,X)));let fe=B&&B.targetChanges.get(R.targetId),Ce=B&&B.targetMismatches.get(R.targetId)!=null,Y=R.view.applyChanges(X,N.isPrimaryClient,fe,Ce);return cD(N,R.targetId,Y.wa),Y.snapshot})}(n,g,_,I);let s=yield nD(n.localStore,e,!0),o=new Mg(e,s.Ts),c=o.ma(s.documents),u=xo.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,u);cD(n,t,d.wa);let f=new xg(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function _k(n,e,t){return S(this,null,function*(){let r=ae(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!$u(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield mg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Jg(r.remoteStore,i.targetId),kg(r,i.targetId)}).catch(zg))):(kg(r,i.targetId),yield mg(r.localStore,i.targetId,!0))})}function Ik(n,e){return S(this,null,function*(){let t=ae(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Jg(t.remoteStore,r.targetId))})}function KD(n,e){return S(this,null,function*(){let t=ae(n);try{let r=yield nk(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Te(o.va):i.removedDocuments.size>0&&(Te(o.va),o.va=!1))}),yield YD(t,r,e)}catch(r){yield zg(r)}})}function aD(n,e,t){let r=ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=ae(o);u.onlineState=c;let d=!1;u.queries.forEach((f,g)=>{for(let _ of g.j_)_.Z_(c)&&(d=!0)}),d&&nm(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wk(n,e,t){return S(this,null,function*(){let r=ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new be(j.comparator);o=o.insert(s,Mt.newNoDocument(s,Q.min()));let c=ue().add(s),u=new wu(Q.min(),new Map,new be(he),o,c);yield KD(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),rm(r)}else yield mg(r.localStore,e,!1).then(()=>kg(r,e,t)).catch(zg)})}function kg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||QD(n,r)})}function QD(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Jg(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),rm(n))}function cD(n,e,t){for(let r of t)r instanceof Mu?(n.La.addReference(r.key,e),Ek(n,r)):r instanceof xu?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||QD(n,r.key)):W()}function Ek(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),rm(n))}function rm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new j(Ne.fromString(e)),r=n.qa.next();n.Na.set(r,new Pg(t)),n.Oa=n.Oa.insert(t,r),HD(n.remoteStore,new Po(jt(Zg(t.path)),r,"TargetPurposeLimboResolution",mD.oe))}}function YD(n,e,t){return S(this,null,function*(){let r=ae(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);let g=hg.Wi(u.targetId,d);s.push(g)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,d){return S(this,null,function*(){let f=ae(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>M.forEach(d,_=>M.forEach(_.$i,I=>f.persistence.referenceDelegate.addReference(g,_.targetId,I)).next(()=>M.forEach(_.Ui,I=>f.persistence.referenceDelegate.removeReference(g,_.targetId,I)))))}catch(g){if(!Vo(g))throw g;k("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let _=g.targetId;if(!g.fromCache){let I=f.os.get(_),A=I.snapshotVersion,N=I.withLastLimboFreeSnapshotVersion(A);f.os=f.os.insert(_,N)}}})}(r.localStore,s))})}function Dk(n,e){return S(this,null,function*(){let t=ae(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield jD(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new V(P.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield YD(t,r.hs)}})}function Tk(n,e){let t=ae(n),r=t.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let c=t.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function ZD(n){let e=ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wk.bind(null,e),e.Ca.d_=pk.bind(null,e.eventManager),e.Ca.$a=gk.bind(null,e.eventManager),e}var uD=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=$D(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return tk(this.persistence,new pg,t.initialUser,this.serializer)}Ga(t){return new ug(dg.Zr,this.serializer)}Wa(t){return new yg}terminate(){return S(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var bk=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>aD(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Dk.bind(null,this.syncEngine),yield dk(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Ag}()}createDatastore(t){let r=$D(t.databaseInfo.databaseId),i=function(o){return new Ig(o)}(t.databaseInfo);return function(o,c,u,d){return new Dg(o,c,u,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,c,u){return new bg(i,s,o,c,u)}(this.localStore,this.datastore,t.asyncQueue,r=>aD(this.syncEngine,r,0),function(){return Su.D()?new Su:new vg}())}createSyncEngine(t,r){return function(s,o,c,u,d,f,g){let _=new Og(s,o,c,u,d,f);return g&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){var t,r;yield function(s){return S(this,null,function*(){let o=ae(s);k("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Uo(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Lg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):un("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Fg=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Fe.UNAUTHENTICATED,this.clientId=Tp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>S(this,null,function*(){k("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(k("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=GD(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function mp(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(this,null,function*(){r.isEqual(i)||(yield jD(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function lD(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Ck(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>iD(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>iD(e.remoteStore,i)),n._onlineComponents=e})}function Ck(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield mp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;xi("Error using user provided cache. Falling back to memory cache: "+t),yield mp(n,new uD)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield mp(n,new uD);return n._offlineComponents})}function Sk(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield lD(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield lD(n,new bk))),n._onlineComponents})}function dD(n){return S(this,null,function*(){let e=yield Sk(n),t=e.eventManager;return t.onListen=mk.bind(null,e.syncEngine),t.onUnlisten=_k.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ik.bind(null,e.syncEngine),t})}function JD(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var hD=new Map;function Ak(n,e,t){if(!t)throw new V(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Rk(n,e,t,r){if(e===!0&&r===!0)throw new V(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fD(n){if(j.isDocumentKey(n))throw new V(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nk(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":W()}function fu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new V(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Nk(n);throw new V(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Pu=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Lo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pu({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pu(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yp;switch(r.type){case"firstParty":return new wp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=hD.get(t);r&&(k("ComponentProvider","Removing Datastore"),hD.delete(t),r.terminate())}(this),Promise.resolve()}};function XD(n,e,t,r={}){var i;let s=(n=fu(n,Lo))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Fe.MOCK_USER;else{c=Gw(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new V(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Fe(d)}n._authCredentials=new vp(new pu(c,u))}}var Ou=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},wr=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ni=class n extends Ou{constructor(e,t,r){super(e,t,Zg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new j(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function eT(n,e,...t){if(n=Rn(n),Ak("collection","path",e),n instanceof Lo){let r=Ne.fromString(e,...t);return fD(r),new Ni(n,null,r)}{if(!(n instanceof wr||n instanceof Ni))throw new V(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ne.fromString(e,...t));return fD(r),new Ni(n.firestore,null,r)}}var ku=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Au(this,"async_queue_retry"),this.Vu=()=>{let r=gp();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=gp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=gp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new kn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return S(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Vo(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw un("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Cg.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&W()}verifyOperationInProgress(){}wu(){return S(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function pD(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Fo=class extends Lo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ku,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ku(e),this._firestoreClient=void 0,yield e}})}};function tT(n,e){let t=typeof n=="object"?n:ao(),r=typeof n=="string"?n:e||"(default)",i=Bf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=qw("firestore");s&&XD(i,...s)}return i}function Mk(n){if(n._terminated)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xk(n),n._firestoreClient}function xk(n){var e,t,r;let i=n._freezeSettings(),s=function(c,u,d,f){return new Sp(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,JD(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Fg(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var Vg=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(We.fromBase64String(e))}catch(t){throw new V(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(We.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Lu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new V(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ug=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new V(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new V(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}};var jg=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var Pk=new RegExp("[~\\*/\\[\\]]");function Ok(n,e,t){if(e.search(Pk)>=0)throw gD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lu(...e.split("."))._internalPath}catch{throw gD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gD(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new V(P.INVALID_ARGUMENT,c+n+u)}var Fu=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Bg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(nT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Bg=class extends Fu{data(){return super.data()}};function nT(n,e){return typeof e=="string"?Ok(n,e):e instanceof Lu?e._internalPath:e._delegate._internalPath}function kk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new V(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $g=class{convertValue(e,t="none"){switch(Ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return we(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ln(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw W()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Bu(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>we(o.doubleValue));return new jg(s)}convertGeoPoint(e){return new Ug(we(e.latitude),we(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Wg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Co(e));default:return null}}convertTimestamp(e){let t=ln(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ne.fromString(e);Te(UD(r));let i=new _u(r.get(1),r.get(3)),s=new j(r.popFirst(5));return i.isEqual(t)||un(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var yr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vu=class extends Fu{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Mi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(nT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Mi=class extends Vu{data(e={}){return super.data(e)}},Hg=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mi(this._firestore,this._userDataWriter,r.key,r,new yr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new V(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new Mi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new yr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new Mi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new yr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:Lk(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Lk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}var Uu=class extends $g{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vg(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}};function im(n,...e){var t,r,i;n=Rn(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||pD(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(pD(e[o])){let g=e[o];e[o]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,d,f;if(n instanceof wr)d=fu(n.firestore,Fo),f=Zg(n._key.path),u={next:g=>{e[o]&&e[o](Fk(d,n,g))},error:e[o+1],complete:e[o+2]};else{let g=fu(n,Ou);d=fu(g.firestore,Fo),f=g._query;let _=new Uu(d);u={next:I=>{e[o]&&e[o](new Hg(d,_,g,I))},error:e[o+1],complete:e[o+2]},kk(n._query)}return function(_,I,A,N){let R=new Lg(N),F=new Ng(I,R,A);return _.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return hk(yield dD(_),F)})),()=>{R.Za(),_.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return fk(yield dD(_),F)}))}}(Mk(d),f,c,u)}function Fk(n,e,t){let r=t.docs.get(e._key),i=new Uu(n);return new Vu(n,i,e._key,r,new yr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){qi=i})(Ii),xn(new vt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new Fo(new _p(r.getProvider("auth-internal")),new Dp(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new V(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Le(LE,"4.7.3",e),Le(LE,"4.7.3","esm2017")})();var zu=function(){return zu=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},zu.apply(this,arguments)};var jk={includeMetadataChanges:!1};function rT(n,e){return e===void 0&&(e=jk),new re(function(t){var r=im(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function iT(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:zu(zu({},r),(t={},t[e.idField]=n.id,t))}function sT(n){return rT(n,{includeMetadataChanges:!0}).pipe(ee(function(e){return e.docs}))}function oT(n,e){return e===void 0&&(e={}),sT(n).pipe(ee(function(t){return t.map(function(r){return iT(r,e)})}))}var Er=class{constructor(e){return e}},aT="firestore",sm=class{constructor(){return uo(aT)}};var om=new H("angularfire2.firestore-instances");function Bk(n,e){let t=qf(aT,n,e);return t&&new Er(t)}function $k(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Er(r)}}var Hk={provide:sm,deps:[[new kt,om]]},qk={provide:Er,useFactory:Bk,deps:[[new kt,om],dr]};function cT(n,...e){return Le("angularfire",Ei.full,"fst"),Cn([qk,Hk,{provide:om,useFactory:$k(n),multi:!0,deps:[ve,St,lo,ho,[new kt,au],[new kt,co],...e]}])}var uT=lr(oT,!0);var lT=lr(eT,!0);var dT=lr(tT,!0);var hT=[];var fT={production:!1,firebaseConfig:{apiKey:"AIzaSyBzR2EbaT-ic9VxfXaY6-n4vs2FIBMqXqQ",authDomain:"factory-manager-c71f8.firebaseapp.com",projectId:"factory-manager-c71f8",storageBucket:"factory-manager-c71f8.firebasestorage.app",messagingSenderId:"119966284443",appId:"1:119966284443:web:f26c7c83d9c411cfdca43e"}};var pT={providers:[xI({eventCoalescing:!0}),Uw(hT),pE(()=>gE(fT.firebaseConfig)),cT(()=>dT())]};function zk(n,e){if(n&1&&(ri(0,"li"),vh(1),ii()),n&2){let t=e.$implicit;dh(),_h(" ",t.name," ")}}var Gu=class n{item$;firestore=O(Er);constructor(){let e=lT(this.firestore,"items");this.item$=uT(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=sc({type:n,selectors:[["app-root"]],standalone:!0,features:[wc],decls:6,vars:2,template:function(t,r){t&1&&(ri(0,"p"),vh(1,"Testing..."),ii(),ri(2,"ul"),DI(3,zk,2,1,"li",null,EI),bI(5,"async"),ii()),t&2&&(dh(3),TI(CI(5,0,r.item$)))},dependencies:[GI]})};tw(Gu,pT).catch(n=>console.error(n));
