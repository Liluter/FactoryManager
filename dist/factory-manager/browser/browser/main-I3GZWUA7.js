var GN=Object.defineProperty,KN=Object.defineProperties;var QN=Object.getOwnPropertyDescriptors;var sb=Object.getOwnPropertySymbols,YN=Object.getPrototypeOf,ZN=Object.prototype.hasOwnProperty,JN=Object.prototype.propertyIsEnumerable,XN=Reflect.get;var ab=(t,e,n)=>e in t?GN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})ZN.call(e,n)&&ab(t,n,e[n]);if(sb)for(var n of sb(e))JN.call(e,n)&&ab(t,n,e[n]);return t},ae=(t,e)=>KN(t,QN(e));var xi=(t,e,n)=>XN(YN(t),n,e);var I=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});function cb(t,e){return Object.is(t,e)}var Ct=null,Lc=!1,zl=1,Jn=Symbol("SIGNAL");function _e(t){let e=Ct;return Ct=t,e}function ub(){return Ct}function eP(){return Lc}var Ds={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Gl(t){if(Lc)throw new Error("");if(Ct===null)return;Ct.consumerOnSignalRead(t);let e=Ct.nextProducerIndex++;if(Jl(Ct),e<Ct.producerNode.length&&Ct.producerNode[e]!==t&&Vc(Ct)){let n=Ct.producerNode[e];Zl(n,Ct.producerIndexOfThis[e])}Ct.producerNode[e]!==t&&(Ct.producerNode[e]=t,Ct.producerIndexOfThis[e]=Vc(Ct)?pb(t,Ct,e):0),Ct.producerLastReadVersion[e]=t.version}function tP(){zl++}function lb(t){if(!(Vc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===zl)){if(!t.producerMustRecompute(t)&&!Ql(t)){t.dirty=!1,t.lastCleanEpoch=zl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=zl}}function db(t){if(t.liveConsumerNode===void 0)return;let e=Lc;Lc=!0;try{for(let n of t.liveConsumerNode)n.dirty||fb(n)}finally{Lc=e}}function hb(){return Ct?.consumerAllowSignalWrites!==!1}function fb(t){t.dirty=!0,db(t),t.consumerMarkedDirty?.(t)}function Uc(t){return t&&(t.nextProducerIndex=0),_e(t)}function Kl(t,e){if(_e(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Vc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Zl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ql(t){Jl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(lb(n),r!==n.version))return!0}return!1}function Yl(t){if(Jl(t),Vc(t))for(let e=0;e<t.producerNode.length;e++)Zl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function pb(t,e,n){if(mb(t),t.liveConsumerNode.length===0&&gb(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=pb(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Zl(t,e){if(mb(t),t.liveConsumerNode.length===1&&gb(t))for(let r=0;r<t.producerNode.length;r++)Zl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Jl(i),i.producerIndexOfThis[r]=e}}function Vc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Jl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function mb(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function gb(t){return t.producerNode!==void 0}function vb(t){let e=Object.create(nP);e.computation=t;let n=()=>{if(lb(e),Gl(e),e.value===Wl)throw e.error;return e.value};return n[Jn]=e,n}var Zm=Symbol("UNSET"),Jm=Symbol("COMPUTING"),Wl=Symbol("ERRORED"),nP=ae(L({},Ds),{value:Zm,dirty:!0,error:null,equal:cb,producerMustRecompute(t){return t.value===Zm||t.value===Jm},producerRecomputeValue(t){if(t.value===Jm)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Jm;let n=Uc(t),r;try{r=t.computation()}catch(i){r=Wl,t.error=i}finally{Kl(t,n)}if(e!==Zm&&e!==Wl&&r!==Wl&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function rP(){throw new Error}var yb=rP;function _b(){yb()}function wb(t){yb=t}var iP=null;function Ib(t){let e=Object.create(eg);e.value=t;let n=()=>(Gl(e),e.value);return n[Jn]=e,n}function Xl(t,e){hb()||_b(),t.equal(t.value,e)||(t.value=e,oP(t))}function Eb(t,e){hb()||_b(),Xl(t,e(t.value))}var eg=ae(L({},Ds),{equal:cb,value:void 0});function oP(t){t.version++,tP(),db(t),iP?.()}function bb(t,e,n){let r=Object.create(sP);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=u=>{r.cleanupFn=u};function o(u){return u.fn===null&&u.schedule===null}function s(u){o(u)||(Yl(u),u.cleanupFn(),u.fn=null,u.schedule=null,u.cleanupFn=Xm)}let a=()=>{if(r.fn===null)return;if(eP())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Ql(r))return;r.hasRun=!0;let u=Uc(r);try{r.cleanupFn(),r.cleanupFn=Xm,r.fn(i)}finally{Kl(r,u)}};return r.ref={notify:()=>fb(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[Jn]:r},r.ref}var Xm=()=>{},sP=ae(L({},Ds),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:Xm});function le(t){return typeof t=="function"}function Ts(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ed=Ts(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Co(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var rt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(le(r))try{r()}catch(o){e=o instanceof ed?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Cb(o)}catch(s){e=e??[],s instanceof ed?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ed(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Cb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Co(n,e)}remove(e){let{_finalizers:n}=this;n&&Co(n,e),e instanceof t&&e._removeParent(this)}};rt.EMPTY=(()=>{let t=new rt;return t.closed=!0,t})();var tg=rt.EMPTY;function td(t){return t instanceof rt||t&&"closed"in t&&le(t.remove)&&le(t.add)&&le(t.unsubscribe)}function Cb(t){le(t)?t():t.unsubscribe()}var Xn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ss={setTimeout(t,e,...n){let{delegate:r}=Ss;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ss;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function nd(t){Ss.setTimeout(()=>{let{onUnhandledError:e}=Xn;if(e)e(t);else throw t})}function jc(){}var Db=ng("C",void 0,void 0);function Tb(t){return ng("E",void 0,t)}function Sb(t){return ng("N",t,void 0)}function ng(t,e,n){return{kind:t,value:e,error:n}}var Do=null;function As(t){if(Xn.useDeprecatedSynchronousErrorHandling){let e=!Do;if(e&&(Do={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Do;if(Do=null,n)throw r}}else t()}function Ab(t){Xn.useDeprecatedSynchronousErrorHandling&&Do&&(Do.errorThrown=!0,Do.error=t)}var To=class extends rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,td(e)&&e.add(this)):this.destination=uP}static create(e,n,r){return new Ms(e,n,r)}next(e){this.isStopped?ig(Sb(e),this):this._next(e)}error(e){this.isStopped?ig(Tb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ig(Db,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},aP=Function.prototype.bind;function rg(t,e){return aP.call(t,e)}var og=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){rd(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){rd(r)}else rd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){rd(n)}}},Ms=class extends To{constructor(e,n,r){super();let i;if(le(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Xn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&rg(e.next,o),error:e.error&&rg(e.error,o),complete:e.complete&&rg(e.complete,o)}):i=e}this.destination=new og(i)}};function rd(t){Xn.useDeprecatedSynchronousErrorHandling?Ab(t):nd(t)}function cP(t){throw t}function ig(t,e){let{onStoppedNotification:n}=Xn;n&&Ss.setTimeout(()=>n(t,e))}var uP={closed:!0,next:jc,error:cP,complete:jc};var xs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xt(t){return t}function id(...t){return sg(t)}function sg(t){return t.length===0?Xt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var de=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=dP(n)?n:new Ms(n,r,i);return As(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Mb(r),new r((i,o)=>{let s=new Ms({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[xs](){return this}pipe(...n){return sg(n)(this)}toPromise(n){return n=Mb(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Mb(t){var e;return(e=t??Xn.Promise)!==null&&e!==void 0?e:Promise}function lP(t){return t&&le(t.next)&&le(t.error)&&le(t.complete)}function dP(t){return t&&t instanceof To||lP(t)&&td(t)}function ag(t){return le(t?.lift)}function ve(t){return e=>{if(ag(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function be(t,e,n,r,i){return new cg(t,e,n,r,i)}var cg=class extends To{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Rs(){return ve((t,e)=>{let n=null;t._refCount++;let r=be(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ns=class extends de{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ag(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rt;let n=this.getSubject();e.add(this.source.subscribe(be(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rt.EMPTY)}return e}refCount(){return Rs()(this)}};var xb=Ts(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var lt=(()=>{class t extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new od(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new xb}next(n){As(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){As(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){As(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?tg:(this.currentObservers=null,o.push(n),new rt(()=>{this.currentObservers=null,Co(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new de;return n.source=this,n}}return t.create=(e,n)=>new od(e,n),t})(),od=class extends lt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:tg}};var ct=class extends lt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Bc={now(){return(Bc.delegate||Date).now()},delegate:void 0};var $c=class extends lt{constructor(e=1/0,n=1/0,r=Bc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var sd=class extends rt{constructor(e,n){super()}schedule(e,n=0){return this}};var Hc={setInterval(t,e,...n){let{delegate:r}=Hc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Hc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ps=class extends sd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Hc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Hc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Co(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ks=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ks.now=Bc.now;var Os=class extends ks{constructor(e,n=ks.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Fs=new Os(Ps),ug=Fs;var ad=class extends Ps{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var cd=class extends Os{};var lg=new cd(ad);var Dn=new de(t=>t.complete());function ud(t){return t&&le(t.schedule)}function Rb(t){return t[t.length-1]}function ld(t){return le(Rb(t))?t.pop():void 0}function Ri(t){return ud(Rb(t))?t.pop():void 0}function dg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Pb(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Nb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function So(t){return this instanceof So?(this.v=t,this):new So(t)}function kb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(S){return Promise.resolve(S).then(v,p)}}function a(v,S){r[v]&&(i[v]=function(O){return new Promise(function(k,B){o.push([v,O,k,B])>1||u(v,O)})},S&&(i[v]=S(i[v])))}function u(v,S){try{l(r[v](S))}catch(O){g(o[0][3],O)}}function l(v){v.value instanceof So?Promise.resolve(v.value.v).then(h,p):g(o[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function g(v,S){v(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Ob(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Nb=="function"?Nb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var dd=t=>t&&typeof t.length=="number"&&typeof t!="function";function hd(t){return le(t?.then)}function fd(t){return le(t[xs])}function pd(t){return Symbol.asyncIterator&&le(t?.[Symbol.asyncIterator])}function md(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function hP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var gd=hP();function vd(t){return le(t?.[gd])}function yd(t){return kb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield So(n.read());if(i)return yield So(void 0);yield yield So(r)}}finally{n.releaseLock()}})}function _d(t){return le(t?.getReader)}function dt(t){if(t instanceof de)return t;if(t!=null){if(fd(t))return fP(t);if(dd(t))return pP(t);if(hd(t))return mP(t);if(pd(t))return Fb(t);if(vd(t))return gP(t);if(_d(t))return vP(t)}throw md(t)}function fP(t){return new de(e=>{let n=t[xs]();if(le(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pP(t){return new de(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function mP(t){return new de(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,nd)})}function gP(t){return new de(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Fb(t){return new de(e=>{yP(t,e).catch(n=>e.error(n))})}function vP(t){return Fb(yd(t))}function yP(t,e){var n,r,i,o;return Pb(this,void 0,void 0,function*(){try{for(n=Ob(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function dn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ni(t,e=0){return ve((n,r)=>{n.subscribe(be(r,i=>dn(r,t,()=>r.next(i),e),()=>dn(r,t,()=>r.complete(),e),i=>dn(r,t,()=>r.error(i),e)))})}function Pi(t,e=0){return ve((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Lb(t,e){return dt(t).pipe(Pi(e),Ni(e))}function Vb(t,e){return dt(t).pipe(Pi(e),Ni(e))}function Ub(t,e){return new de(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function jb(t,e){return new de(n=>{let r;return dn(n,e,()=>{r=t[gd](),dn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>le(r?.return)&&r.return()})}function wd(t,e){if(!t)throw new Error("Iterable cannot be null");return new de(n=>{dn(n,e,()=>{let r=t[Symbol.asyncIterator]();dn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Bb(t,e){return wd(yd(t),e)}function $b(t,e){if(t!=null){if(fd(t))return Lb(t,e);if(dd(t))return Ub(t,e);if(hd(t))return Vb(t,e);if(pd(t))return wd(t,e);if(vd(t))return jb(t,e);if(_d(t))return Bb(t,e)}throw md(t)}function Pe(t,e){return e?$b(t,e):dt(t)}function U(...t){let e=Ri(t);return Pe(t,e)}function Ls(t,e){let n=le(t)?t:()=>t,r=i=>i.error(n());return new de(e?i=>e.schedule(r,0,i):r)}function hg(t){return!!t&&(t instanceof de||le(t.lift)&&le(t.subscribe))}var Yr=Ts(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Hb(t){return t instanceof Date&&!isNaN(t)}function q(t,e){return ve((n,r)=>{let i=0;n.subscribe(be(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:_P}=Array;function wP(t,e){return _P(e)?t(...e):t(e)}function Id(t){return q(e=>wP(t,e))}var{isArray:IP}=Array,{getPrototypeOf:EP,prototype:bP,keys:CP}=Object;function Ed(t){if(t.length===1){let e=t[0];if(IP(e))return{args:e,keys:null};if(DP(e)){let n=CP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function DP(t){return t&&typeof t=="object"&&EP(t)===bP}function bd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ao(...t){let e=Ri(t),n=ld(t),{args:r,keys:i}=Ed(t);if(r.length===0)return Pe([],e);let o=new de(TP(r,e,i?s=>bd(i,s):Xt));return n?o.pipe(Id(n)):o}function TP(t,e,n=Xt){return r=>{qb(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)qb(e,()=>{let l=Pe(t[u],e),h=!1;l.subscribe(be(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function qb(t,e,n){t?dn(n,t,e):e()}function zb(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},v=O=>l<r?S(O):u.push(O),S=O=>{o&&e.next(O),l++;let k=!1;dt(n(O,h++)).subscribe(be(e,B=>{i?.(B),o?v(B):e.next(B)},()=>{k=!0},void 0,()=>{if(k)try{for(l--;u.length&&l<r;){let B=u.shift();s?dn(e,s,()=>S(B)):S(B)}g()}catch(B){e.error(B)}}))};return t.subscribe(be(e,v,()=>{p=!0,g()})),()=>{a?.()}}function ht(t,e,n=1/0){return le(e)?ht((r,i)=>q((o,s)=>e(r,o,i,s))(dt(t(r,i))),n):(typeof e=="number"&&(n=e),ve((r,i)=>zb(r,i,t,n)))}function Vs(t=1/0){return ht(Xt,t)}function Wb(){return Vs(1)}function Us(...t){return Wb()(Pe(t,Ri(t)))}function Cd(t){return new de(e=>{dt(t()).subscribe(e)})}function fg(...t){let e=ld(t),{args:n,keys:r}=Ed(t),i=new de(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;dt(n[h]).subscribe(be(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?bd(r,a):a),o.complete())}))}});return e?i.pipe(Id(e)):i}function Gb(t=0,e,n=ug){let r=-1;return e!=null&&(ud(e)?n=e:r=e),new de(i=>{let o=Hb(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function pg(t=0,e=Fs){return t<0&&(t=0),Gb(t,t,e)}function At(t,e){return ve((n,r)=>{let i=0;n.subscribe(be(r,o=>t.call(e,o,i++)&&r.next(o)))})}function ft(t){return ve((e,n)=>{let r=null,i=!1,o;r=e.subscribe(be(n,void 0,void 0,s=>{o=dt(t(s,ft(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Dd(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(be(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Kb(t,e){return ve(Dd(t,e,arguments.length>=2,!1,!0))}var SP=(t,e)=>(t.push(e),t);function mg(){return ve((t,e)=>{Kb(SP,[])(t).subscribe(e)})}function er(t,e){return le(e)?ht(t,e,1):ht(t,1)}function ki(t){return ve((e,n)=>{let r=!1;e.subscribe(be(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Zr(t){return t<=0?()=>Dn:ve((e,n)=>{let r=0;e.subscribe(be(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function gg(t){return q(()=>t)}function Td(t,e=Xt){return t=t??AP,ve((n,r)=>{let i,o=!0;n.subscribe(be(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function AP(t,e){return t===e}function Sd(t=MP){return ve((e,n)=>{let r=!1;e.subscribe(be(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function MP(){return new Yr}function qc(t){return ve((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function mr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?At((i,o)=>t(i,o,r)):Xt,Zr(1),n?ki(e):Sd(()=>new Yr))}function js(t){return t<=0?()=>Dn:ve((e,n)=>{let r=[];e.subscribe(be(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function vg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?At((i,o)=>t(i,o,r)):Xt,js(1),n?ki(e):Sd(()=>new Yr))}function Ad(t,e){return ve(Dd(t,e,arguments.length>=2,!0))}function Mo(...t){let e=Ri(t);return ve((n,r)=>{(e?Us(t,n,e):Us(t,n)).subscribe(r)})}function ke(t,e){return ve((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(be(r,u=>{i?.unsubscribe();let l=0,h=o++;dt(t(u,h)).subscribe(i=be(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function zc(t){return ve((e,n)=>{dt(t).subscribe(be(n,()=>n.complete(),jc)),!n.closed&&e.subscribe(n)})}function Ue(t,e,n){let r=le(t)||e||n?{next:t,error:e,complete:n}:t;return r?ve((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(be(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Xt}var PC="https://g.co/ng/security#xss",G=class extends Error{constructor(e,n){super(Av(e,n)),this.code=e}};function Av(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var kC=Symbol("InputSignalNode#UNSET"),xP=ae(L({},eg),{transformFn:void 0,applyValueToInputSignal(t,e){Xl(t,e)}});function OC(t,e){let n=Object.create(xP);n.value=t,n.transformFn=e?.transform;function r(){if(Gl(n),n.value===kC)throw new G(-950,!1);return n.value}return r[Jn]=n,r}function tu(t){return{toString:t}.toString()}var Md="__parameters__";function RP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function FC(t,e,n){return tu(()=>{let r=RP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Md)?u[Md]:Object.defineProperty(u,Md,{value:[]})[Md];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ro=globalThis;function We(t){for(let e in t)if(t[e]===We)return e;throw Error("Could not find renamed property on target object.")}function NP(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function pn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(pn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Ng(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var PP=We({__forward_ref__:We});function An(t){return t.__forward_ref__=An,t.toString=function(){return pn(this())},t}function en(t){return LC(t)?t():t}function LC(t){return typeof t=="function"&&t.hasOwnProperty(PP)&&t.__forward_ref__===An}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function jo(t){return{providers:t.providers||[],imports:t.imports||[]}}function dh(t){return Qb(t,UC)||Qb(t,jC)}function VC(t){return dh(t)!==null}function Qb(t,e){return t.hasOwnProperty(e)?t[e]:null}function kP(t){let e=t&&(t[UC]||t[jC]);return e||null}function Yb(t){return t&&(t.hasOwnProperty(Zb)||t.hasOwnProperty(OP))?t[Zb]:null}var UC=We({\u0275prov:We}),Zb=We({\u0275inj:We}),jC=We({ngInjectableDef:We}),OP=We({ngInjectorDef:We}),Q=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function BC(t){return t&&!!t.\u0275providers}var FP=We({\u0275cmp:We}),LP=We({\u0275dir:We}),VP=We({\u0275pipe:We}),UP=We({\u0275mod:We}),jd=We({\u0275fac:We}),Gc=We({__NG_ELEMENT_ID__:We}),Jb=We({__NG_ENV_ID__:We});function Gs(t){return typeof t=="string"?t:t==null?"":String(t)}function jP(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Gs(t)}function BP(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new G(-200,t)}function Mv(t,e){throw new G(-201,!1)}var we=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(we||{}),Pg;function $C(){return Pg}function hn(t){let e=Pg;return Pg=t,e}function HC(t,e,n){let r=dh(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&we.Optional)return null;if(e!==void 0)return e;Mv(t,"Injector")}var $P={},Kc=$P,kg="__NG_DI_FLAG__",Bd="ngTempTokenPath",HP="ngTokenPath",qP=/\n/gm,zP="\u0275",Xb="__source",zs;function WP(){return zs}function Oi(t){let e=zs;return zs=t,e}function GP(t,e=we.Default){if(zs===void 0)throw new G(-203,!1);return zs===null?HC(t,void 0,e):zs.get(t,e&we.Optional?null:void 0,e)}function ce(t,e=we.Default){return($C()||GP)(en(t),e)}function N(t,e=we.Default){return ce(t,hh(e))}function hh(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Og(t){let e=[];for(let n=0;n<t.length;n++){let r=en(t[n]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,o=we.Default;for(let s=0;s<r.length;s++){let a=r[s],u=KP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ce(i,o))}else e.push(ce(r))}return e}function qC(t,e){return t[kg]=e,t.prototype[kg]=e,t}function KP(t){return t[kg]}function QP(t,e,n,r){let i=t[Bd];throw e[Xb]&&i.unshift(e[Xb]),t.message=YP(`
`+t.message,i,n,r),t[HP]=i,t[Bd]=null,t}function YP(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==zP?t.slice(2):t;let i=pn(e);if(Array.isArray(e))i=e.map(pn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):pn(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(qP,`
  `)}`}var rn=qC(FC("Optional"),8);var zC=qC(FC("SkipSelf"),4);function Po(t,e){let n=t.hasOwnProperty(jd);return n?t[jd]:null}function xv(t,e){t.forEach(n=>Array.isArray(n)?xv(n,e):e(n))}function WC(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function $d(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ZP(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function JP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function fh(t,e,n){let r=nu(t,e);return r>=0?t[r|1]=n:(r=~r,JP(t,r,e,n)),r}function yg(t,e){let n=nu(t,e);if(n>=0)return t[n|1]}function nu(t,e){return XP(t,e,1)}function XP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ks={},fn=[],Qs=new Q(""),GC=new Q("",-1),KC=new Q(""),Hd=class{get(e,n=Kc){if(n===Kc){let r=new Error(`NullInjectorError: No provider for ${pn(e)}!`);throw r.name="NullInjectorError",r}return n}},QC=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(QC||{}),yr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(yr||{}),Vi=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Vi||{});function ek(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Fg(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];tk(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function YC(t){return t===3||t===4||t===6}function tk(t){return t.charCodeAt(0)===64}function Qc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?eC(t,n,i,null,e[++r]):eC(t,n,i,null,null))}}return t}function eC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var ZC="ng-template";function nk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&ek(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Rv(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Rv(t){return t.type===4&&t.value!==ZC}function rk(t,e,n){let r=t.type===4&&!n?ZC:t.value;return e===r}function ik(t,e,n){let r=4,i=t.attrs,o=i!==null?ak(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!tr(r)&&!tr(u))return!1;if(s&&tr(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!rk(t,u,n)||u===""&&e.length===1){if(tr(r))return!1;s=!0}}else if(r&8){if(i===null||!nk(t,i,u,n)){if(tr(r))return!1;s=!0}}else{let l=e[++a],h=ok(u,i,Rv(t),n);if(h===-1){if(tr(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(tr(r))return!1;s=!0}}}}return tr(r)||s}function tr(t){return(t&1)===0}function ok(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ck(e,t)}function JC(t,e,n=!1){for(let r=0;r<e.length;r++)if(ik(t,e[r],n))return!0;return!1}function sk(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function ak(t){for(let e=0;e<t.length;e++){let n=t[e];if(YC(n))return e}return t.length}function ck(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function uk(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function tC(t,e){return t?":not("+e.trim()+")":e}function lk(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!tr(s)&&(e+=tC(o,i),i=""),r=s,o=o||!tr(r);n++}return i!==""&&(e+=tC(o,i)),e}function dk(t){return t.map(lk).join(",")}function hk(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!tr(i))break;i=o}r++}return{attrs:e,classes:n}}function J(t){return tu(()=>{let e=rD(t),n=ae(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===QC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||yr.Emulated,styles:t.styles||fn,_:null,schemas:t.schemas||null,tView:null,id:""});iD(n);let r=t.dependencies;return n.directiveDefs=rC(r,!1),n.pipeDefs=rC(r,!0),n.id=mk(n),n})}function fk(t){return Ui(t)||XC(t)}function pk(t){return t!==null}function Bo(t){return tu(()=>({type:t.type,bootstrap:t.bootstrap||fn,declarations:t.declarations||fn,imports:t.imports||fn,exports:t.exports||fn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nC(t,e){if(t==null)return Ks;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Vi.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Vi.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Ye(t){return tu(()=>{let e=rD(t);return iD(e),e})}function Nv(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ui(t){return t[FP]||null}function XC(t){return t[LP]||null}function eD(t){return t[VP]||null}function tD(t){let e=Ui(t)||XC(t)||eD(t);return e!==null?e.standalone:!1}function nD(t,e){let n=t[UP]||null;if(!n&&e===!0)throw new Error(`Type ${pn(t)} does not have '\u0275mod' property.`);return n}function rD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ks,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||fn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nC(t.inputs,e),outputs:nC(t.outputs),debugInfo:null}}function iD(t){t.features?.forEach(e=>e(t))}function rC(t,e){if(!t)return null;let n=e?eD:fk;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(pk)}function mk(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ir(t){return{\u0275providers:t}}function gk(...t){return{\u0275providers:oD(!0,t),\u0275fromNgModule:!0}}function oD(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return xv(e,s=>{let a=s;Lg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&sD(i,o),n}function sD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Pv(i,o=>{e(o,r)})}}function Lg(t,e,n,r){if(t=en(t),!t)return!1;let i=null,o=Yb(t),s=!o&&Ui(t);if(!o&&!s){let u=t.ngModule;if(o=Yb(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Lg(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{xv(o.imports,h=>{Lg(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&sD(l,e)}if(!a){let l=Po(i)||(()=>new i);e({provide:i,useFactory:l,deps:fn},i),e({provide:KC,useValue:i,multi:!0},i),e({provide:Qs,useValue:()=>ce(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Pv(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Pv(t,e){for(let n of t)BC(n)&&(n=n.\u0275providers),Array.isArray(n)?Pv(n,e):e(n)}var vk=We({provide:String,useValue:We});function aD(t){return t!==null&&typeof t=="object"&&vk in t}function yk(t){return!!(t&&t.useExisting)}function _k(t){return!!(t&&t.useFactory)}function Ys(t){return typeof t=="function"}function wk(t){return!!t.useClass}var ph=new Q(""),kd={},Ik={},_g;function kv(){return _g===void 0&&(_g=new Hd),_g}var Tn=class{},Yc=class extends Tn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ug(e,s=>this.processProvider(s)),this.records.set(GC,Bs(void 0,this)),i.has("environment")&&this.records.set(Tn,Bs(void 0,this));let o=this.records.get(ph);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(KC,fn,we.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Oi(this),r=hn(void 0),i;try{return e()}finally{Oi(n),hn(r)}}get(e,n=Kc,r=we.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Jb))return e[Jb](this);r=hh(r);let i,o=Oi(this),s=hn(void 0);try{if(!(r&we.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=Tk(e)&&dh(e);l&&this.injectableDefInScope(l)?u=Bs(Vg(e),kd):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&we.Self?kv():this.parent;return n=r&we.Optional&&n===Kc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Bd]=a[Bd]||[]).unshift(pn(e)),o)throw a;return QP(a,e,"R3InjectorError",this.source)}else throw a}finally{hn(s),Oi(o)}}resolveInjectorInitializers(){let e=_e(null),n=Oi(this),r=hn(void 0),i;try{let o=this.get(Qs,fn,we.Self);for(let s of o)s()}finally{Oi(n),hn(r),_e(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(pn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new G(205,!1)}processProvider(e){e=en(e);let n=Ys(e)?e:en(e&&e.provide),r=bk(e);if(!Ys(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Bs(void 0,kd,!0),i.factory=()=>Og(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=_e(null);try{return n.value===kd&&(n.value=Ik,n.value=n.factory()),typeof n.value=="object"&&n.value&&Dk(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{_e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=en(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Vg(t){let e=dh(t),n=e!==null?e.factory:Po(t);if(n!==null)return n;if(t instanceof Q)throw new G(204,!1);if(t instanceof Function)return Ek(t);throw new G(204,!1)}function Ek(t){if(t.length>0)throw new G(204,!1);let n=kP(t);return n!==null?()=>n.factory(t):()=>new t}function bk(t){if(aD(t))return Bs(void 0,t.useValue);{let e=cD(t);return Bs(e,kd)}}function cD(t,e,n){let r;if(Ys(t)){let i=en(t);return Po(i)||Vg(i)}else if(aD(t))r=()=>en(t.useValue);else if(_k(t))r=()=>t.useFactory(...Og(t.deps||[]));else if(yk(t))r=()=>ce(en(t.useExisting));else{let i=en(t&&(t.useClass||t.provide));if(Ck(t))r=()=>new i(...Og(t.deps));else return Po(i)||Vg(i)}return r}function Bs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ck(t){return!!t.deps}function Dk(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Tk(t){return typeof t=="function"||typeof t=="object"&&t instanceof Q}function Ug(t,e){for(let n of t)Array.isArray(n)?Ug(n,e):n&&BC(n)?Ug(n.\u0275providers,e):e(n)}function Er(t,e){t instanceof Yc&&t.assertNotDestroyed();let n,r=Oi(t),i=hn(void 0);try{return e()}finally{Oi(r),hn(i)}}function uD(){return $C()!==void 0||WP()!=null}function ha(t){if(!uD())throw new G(-203,!1)}function Sk(t){return typeof t=="function"}var ei=0,pe=1,oe=2,nn=3,nr=4,mn=5,Zs=6,qd=7,$t=8,Js=9,_r=10,it=11,Zc=12,iC=13,fa=14,Sn=15,Xs=16,$s=17,ea=18,mh=19,lD=20,Fi=21,Od=22,Fn=23,Tt=25,dD=1;var ko=7,zd=8,Wd=9,tn=10,Gd=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Gd||{});function Li(t){return Array.isArray(t)&&typeof t[dD]=="object"}function ti(t){return Array.isArray(t)&&t[dD]===!0}function hD(t){return(t.flags&4)!==0}function gh(t){return t.componentOffset>-1}function Ov(t){return(t.flags&1)===1}function ji(t){return!!t.template}function jg(t){return(t[oe]&512)!==0}var Bg=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function fD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function $i(){return pD}function pD(t){return t.type.prototype.ngOnChanges&&(t.setInput=Mk),Ak}$i.ngInherit=!0;function Ak(){let t=gD(this),e=t?.current;if(e){let n=t.previous;if(n===Ks)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Mk(t,e,n,r,i){let o=this.declaredInputs[r],s=gD(t)||xk(t,{previous:Ks,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Bg(l&&l.currentValue,n,u===Ks),fD(t,e,i,n)}var mD="__ngSimpleChanges__";function gD(t){return t[mD]||null}function xk(t,e){return t[mD]=e}var oC=null;var gr=function(t,e,n){oC?.(t,e,n)},Rk="svg",Nk="math";function wr(t){for(;Array.isArray(t);)t=t[ei];return t}function vD(t,e){return wr(e[t])}function Ln(t,e){return wr(e[t.index])}function Fv(t,e){return t.data[e]}function vh(t,e){return t[e]}function Hi(t,e){let n=e[t];return Li(n)?n:n[ei]}function Lv(t){return(t[oe]&128)===128}function Pk(t){return ti(t[nn])}function ta(t,e){return e==null?null:t[e]}function yD(t){t[$s]=0}function _D(t){t[oe]&1024||(t[oe]|=1024,Lv(t)&&_h(t))}function kk(t,e){for(;t>0;)e=e[fa],t--;return e}function yh(t){return!!(t[oe]&9216||t[Fn]?.dirty)}function $g(t){t[_r].changeDetectionScheduler?.notify(8),t[oe]&64&&(t[oe]|=1024),yh(t)&&_h(t)}function _h(t){t[_r].changeDetectionScheduler?.notify(0);let e=Oo(t);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!Lv(e)));)e=Oo(e)}function wD(t,e){if((t[oe]&256)===256)throw new G(911,!1);t[Fi]===null&&(t[Fi]=[]),t[Fi].push(e)}function Ok(t,e){if(t[Fi]===null)return;let n=t[Fi].indexOf(e);n!==-1&&t[Fi].splice(n,1)}function Oo(t){let e=t[nn];return ti(e)?e[nn]:e}var Ie={lFrame:ND(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ID=!1;function Fk(){return Ie.lFrame.elementDepthCount}function Lk(){Ie.lFrame.elementDepthCount++}function Vk(){Ie.lFrame.elementDepthCount--}function ED(){return Ie.bindingsEnabled}function bD(){return Ie.skipHydrationRootTNode!==null}function Uk(t){return Ie.skipHydrationRootTNode===t}function jk(){Ie.skipHydrationRootTNode=null}function me(){return Ie.lFrame.lView}function gt(){return Ie.lFrame.tView}function Oe(t){return Ie.lFrame.contextLView=t,t[$t]}function Fe(t){return Ie.lFrame.contextLView=null,t}function gn(){let t=CD();for(;t!==null&&t.type===64;)t=t.parent;return t}function CD(){return Ie.lFrame.currentTNode}function Bk(){let t=Ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function pa(t,e){let n=Ie.lFrame;n.currentTNode=t,n.isParent=e}function DD(){return Ie.lFrame.isParent}function TD(){Ie.lFrame.isParent=!1}function SD(){return Ie.lFrame.contextLView}function AD(){return ID}function sC(t){ID=t}function ru(){let t=Ie.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function $k(){return Ie.lFrame.bindingIndex}function Hk(t){return Ie.lFrame.bindingIndex=t}function ma(){return Ie.lFrame.bindingIndex++}function Vv(t){let e=Ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function qk(){return Ie.lFrame.inI18n}function zk(t,e){let n=Ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hg(e)}function Wk(){return Ie.lFrame.currentDirectiveIndex}function Hg(t){Ie.lFrame.currentDirectiveIndex=t}function Gk(t){let e=Ie.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function MD(t){Ie.lFrame.currentQueryIndex=t}function Kk(t){let e=t[pe];return e.type===2?e.declTNode:e.type===1?t[mn]:null}function xD(t,e,n){if(n&we.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&we.Host);)if(i=Kk(o),i===null||(o=o[fa],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Ie.lFrame=RD();return r.currentTNode=e,r.lView=t,!0}function Uv(t){let e=RD(),n=t[pe];Ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function RD(){let t=Ie.lFrame,e=t===null?null:t.child;return e===null?ND(t):e}function ND(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function PD(){let t=Ie.lFrame;return Ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var kD=PD;function jv(){let t=PD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Qk(t){return(Ie.lFrame.contextLView=kk(t,Ie.lFrame.contextLView))[$t]}function br(){return Ie.lFrame.selectedIndex}function Fo(t){Ie.lFrame.selectedIndex=t}function wh(){let t=Ie.lFrame;return Fv(t.tView,t.selectedIndex)}function Yk(){return Ie.lFrame.currentNamespace}var OD=!0;function Bv(){return OD}function $v(t){OD=t}function Zk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=pD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Hv(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Fd(t,e,n){FD(t,e,3,n)}function Ld(t,e,n,r){(t[oe]&3)===n&&FD(t,e,n,r)}function wg(t,e){let n=t[oe];(n&3)===e&&(n&=16383,n+=1,t[oe]=n)}function FD(t,e,n,r){let i=r!==void 0?t[$s]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[$s]+=65536),(a<o||o==-1)&&(Jk(t,n,e,u),t[$s]=(t[$s]&4294901760)+u+2),u++}function aC(t,e){gr(4,t,e);let n=_e(null);try{e.call(t)}finally{_e(n),gr(5,t,e)}}function Jk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[oe]>>14<t[$s]>>16&&(t[oe]&3)===e&&(t[oe]+=16384,aC(a,o)):aC(a,o)}var Ws=-1,Lo=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Xk(t){return t instanceof Lo}function eO(t){return(t.flags&8)!==0}function tO(t){return(t.flags&16)!==0}var Ig={},qg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=hh(r);let i=this.injector.get(e,Ig,r);return i!==Ig||n===Ig?i:this.parentInjector.get(e,n,r)}};function LD(t){return t!==Ws}function Kd(t){return t&32767}function nO(t){return t>>16}function Qd(t,e){let n=nO(t),r=e;for(;n>0;)r=r[fa],n--;return r}var zg=!0;function Yd(t){let e=zg;return zg=t,e}var rO=256,VD=rO-1,UD=5,iO=0,vr={};function oO(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Gc)&&(r=n[Gc]),r==null&&(r=n[Gc]=iO++);let i=r&VD,o=1<<i;e.data[t+(i>>UD)]|=o}function Zd(t,e){let n=jD(t,e);if(n!==-1)return n;let r=e[pe];r.firstCreatePass&&(t.injectorIndex=e.length,Eg(r.data,t),Eg(e,null),Eg(r.blueprint,null));let i=qv(t,e),o=t.injectorIndex;if(LD(i)){let s=Kd(i),a=Qd(i,e),u=a[pe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Eg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function jD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function qv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=zD(i),r===null)return Ws;if(n++,i=i[fa],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ws}function Wg(t,e,n){oO(t,e,n)}function sO(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(YC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function BD(t,e,n){if(n&we.Optional||t!==void 0)return t;Mv(e,"NodeInjector")}function $D(t,e,n,r){if(n&we.Optional&&r===void 0&&(r=null),!(n&(we.Self|we.Host))){let i=t[Js],o=hn(void 0);try{return i?i.get(e,r,n&we.Optional):HC(e,r,n&we.Optional)}finally{hn(o)}}return BD(r,e,n)}function HD(t,e,n,r=we.Default,i){if(t!==null){if(e[oe]&2048&&!(r&we.Self)){let s=dO(t,e,n,r,vr);if(s!==vr)return s}let o=qD(t,e,n,r,vr);if(o!==vr)return o}return $D(e,n,r,i)}function qD(t,e,n,r,i){let o=uO(n);if(typeof o=="function"){if(!xD(e,t,r))return r&we.Host?BD(i,n,r):$D(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&we.Optional))Mv(n);else return s}finally{kD()}}else if(typeof o=="number"){let s=null,a=jD(t,e),u=Ws,l=r&we.Host?e[Sn][mn]:null;for((a===-1||r&we.SkipSelf)&&(u=a===-1?qv(t,e):e[a+8],u===Ws||!uC(r,!1)?a=-1:(s=e[pe],a=Kd(u),e=Qd(u,e)));a!==-1;){let h=e[pe];if(cC(o,a,h.data)){let p=aO(a,e,n,s,r,l);if(p!==vr)return p}u=e[a+8],u!==Ws&&uC(r,e[pe].data[a+8]===l)&&cC(o,a,e)?(s=h,a=Kd(u),e=Qd(u,e)):a=-1}}return i}function aO(t,e,n,r,i,o){let s=e[pe],a=s.data[t+8],u=r==null?gh(a)&&zg:r!=s&&(a.type&3)!==0,l=i&we.Host&&o===a,h=cO(a,s,n,u,l);return h!==null?na(e,s,h,a):vr}function cO(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let v=p;v<g;v++){let S=s[v];if(v<u&&n===S||v>=u&&S.type===n)return v}if(i){let v=s[u];if(v&&ji(v)&&v.type===n)return u}return null}function na(t,e,n,r){let i=t[n],o=e.data;if(Xk(i)){let s=i;s.resolving&&BP(jP(o[n]));let a=Yd(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?hn(s.injectImpl):null,h=xD(t,r,we.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Zk(n,o[n],e)}finally{l!==null&&hn(l),Yd(a),s.resolving=!1,kD()}}return i}function uO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Gc)?t[Gc]:void 0;return typeof e=="number"?e>=0?e&VD:lO:e}function cC(t,e,n){let r=1<<t;return!!(n[e+(t>>UD)]&r)}function uC(t,e){return!(t&we.Self)&&!(t&we.Host&&e)}var No=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return HD(this._tNode,this._lView,e,hh(r),n)}};function lO(){return new No(gn(),me())}function Vn(t){return tu(()=>{let e=t.prototype.constructor,n=e[jd]||Gg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[jd]||Gg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Gg(t){return LC(t)?()=>{let e=Gg(en(t));return e&&e()}:Po(t)}function dO(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!(s[oe]&512);){let a=qD(o,s,n,r|we.Self,vr);if(a!==vr)return a;let u=o.parent;if(!u){let l=s[lD];if(l){let h=l.get(n,vr,r);if(h!==vr)return h}u=zD(s),s=s[fa]}o=u}return i}function zD(t){let e=t[pe],n=e.type;return n===2?e.declTNode:n===1?t[mn]:null}function zv(t){return sO(gn(),t)}function lC(t,e=null,n=null,r){let i=WD(t,e,n,r);return i.resolveInjectorInitializers(),i}function WD(t,e=null,n=null,r,i=new Set){let o=[n||fn,gk(t)];return r=r||(typeof t=="object"?void 0:pn(t)),new Yc(o,e||kv(),r||null,i)}var mt=class t{static{this.THROW_IF_NOT_FOUND=Kc}static{this.NULL=new Hd}static create(e,n){if(Array.isArray(e))return lC({name:""},n,e,"");{let r=e.name??"";return lC({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:t,providedIn:"any",factory:()=>ce(GC)})}static{this.__NG_ELEMENT_ID__=-1}};var hO=new Q("");hO.__NG_ELEMENT_ID__=t=>{let e=gn();if(e===null)throw new G(204,!1);if(e.type&2)return e.value;if(t&we.Optional)return null;throw new G(204,!1)};var fO="ngOriginalError";function bg(t){return t[fO]}var GD=!0,Cr=(()=>{class t{static{this.__NG_ELEMENT_ID__=pO}static{this.__NG_ENV_ID__=n=>n}}return t})(),Kg=class extends Cr{constructor(e){super(),this._lView=e}onDestroy(e){return wD(this._lView,e),()=>Ok(this._lView,e)}};function pO(){return new Kg(me())}var $o=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})();var Qg=class extends lt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,uD()&&(this.destroyRef=N(Cr,{optional:!0})??void 0,this.pendingTasks=N($o,{optional:!0})??void 0)}emit(e){let n=_e(null);try{super.next(e)}finally{_e(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof rt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},pt=Qg;function Jd(...t){}function KD(t){let e,n;function r(){t=Jd;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function dC(t){return queueMicrotask(()=>t()),()=>{t=Jd}}var Wv="isAngularZone",Xd=Wv+"_ID",mO=0,je=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pt(!1),this.onMicrotaskEmpty=new pt(!1),this.onStable=new pt(!1),this.onError=new pt(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=GD}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,yO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Wv)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new G(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,gO,Jd,Jd);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},gO={};function Gv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function vO(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){KD(()=>{t.callbackScheduled=!1,Yg(t),t.isCheckStableRunning=!0,Gv(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Yg(t)}function yO(t){let e=()=>{vO(t)},n=mO++;t._inner=t._inner.fork({name:"angular",properties:{[Wv]:!0,[Xd]:n,[Xd+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(_O(u))return r.invokeTask(o,s,a,u);try{return hC(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),fC(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return hC(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!wO(u)&&e(),fC(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Yg(t),Gv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Yg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function hC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function fC(t){t._nesting--,Gv(t)}var Zg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pt,this.onMicrotaskEmpty=new pt,this.onStable=new pt,this.onError=new pt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function _O(t){return QD(t,"__ignore_ng_zone__")}function wO(t){return QD(t,"__scheduler_tick__")}function QD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var rr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&bg(e);for(;n&&bg(n);)n=bg(n);return n||null}},IO=new Q("",{providedIn:"root",factory:()=>{let t=N(je),e=N(rr);return n=>t.runOutsideAngular(()=>e.handleError(n))}}),Jg=class{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=N(rr,{optional:!0}),this.destroyRef=N(Cr),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new G(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed)throw new G(953,!1);if(this.listeners===null)return;let n=_e(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{_e(n)}}};function ga(t){return new Jg}function pC(t,e){return OC(t,e)}function EO(t){return OC(kC,t)}var vt=(pC.required=EO,pC);function bO(){return Kv(gn(),me())}function Kv(t,e){return new or(Ln(t,e))}var or=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=bO}}return t})();function YD(t){return(t.flags&128)===128}var ZD=new Map,CO=0;function DO(){return CO++}function TO(t){ZD.set(t[mh],t)}function Xg(t){ZD.delete(t[mh])}var mC="__ngContext__";function Vo(t,e){Li(e)?(t[mC]=e[mh],TO(e)):t[mC]=e}function JD(t){return eT(t[Zc])}function XD(t){return eT(t[nr])}function eT(t){for(;t!==null&&!ti(t);)t=t[nr];return t}var ev;function tT(t){ev=t}function SO(){if(ev!==void 0)return ev;if(typeof document<"u")return document;throw new G(210,!1)}var Qv=new Q("",{providedIn:"root",factory:()=>AO}),AO="ng",Yv=new Q(""),Dr=new Q("",{providedIn:"platform",factory:()=>"unknown"});var Zv=new Q("",{providedIn:"root",factory:()=>SO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var MO="h",xO="b";var RO=()=>null;function Jv(t,e,n=!1){return RO(t,e,n)}var nT=!1,NO=new Q("",{providedIn:"root",factory:()=>nT});var xd;function PO(){if(xd===void 0&&(xd=null,Ro.trustedTypes))try{xd=Ro.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return xd}function gC(t){return PO()?.createScriptURL(t)||t}var eh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${PC})`}};function Ho(t){return t instanceof eh?t.changingThisBreaksApplicationSecurity:t}function Xv(t,e){let n=kO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${PC})`)}return n===e}function kO(t){return t instanceof eh&&t.getTypeName()||null}var OO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function rT(t){return t=String(t),t.match(OO)?t:"unsafe:"+t}var Ih=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ih||{});function FO(t){let e=oT();return e?e.sanitize(Ih.URL,t)||"":Xv(t,"URL")?Ho(t):rT(Gs(t))}function LO(t){let e=oT();if(e)return gC(e.sanitize(Ih.RESOURCE_URL,t)||"");if(Xv(t,"ResourceURL"))return gC(Ho(t));throw new G(904,!1)}function VO(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?LO:FO}function iT(t,e,n){return VO(e,n)(t)}function oT(){let t=me();return t&&t[_r].sanitizer}function sT(t){return t instanceof Function?t():t}function UO(t){return(t??N(mt)).get(Dr)==="browser"}var Jr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Jr||{}),jO;function ey(t,e){return jO(t,e)}function Hs(t,e,n,r,i){if(r!=null){let o,s=!1;ti(r)?o=r:Li(r)&&(s=!0,r=r[ei]);let a=wr(r);t===0&&n!==null?i==null?dT(e,n,a):th(e,n,a,i||null,!0):t===1&&n!==null?th(e,n,a,i||null,!0):t===2?XO(e,a,s):t===3&&e.destroyNode(a),o!=null&&tF(e,t,o,n,i)}}function BO(t,e){return t.createText(e)}function $O(t,e,n){t.setValue(e,n)}function aT(t,e,n){return t.createElement(e,n)}function HO(t,e){cT(t,e),e[ei]=null,e[mn]=null}function qO(t,e,n,r,i,o){r[ei]=i,r[mn]=e,bh(t,r,n,1,i,o)}function cT(t,e){e[_r].changeDetectionScheduler?.notify(9),bh(t,e,e[it],2,null,null)}function zO(t){let e=t[Zc];if(!e)return Cg(t[pe],t);for(;e;){let n=null;if(Li(e))n=e[Zc];else{let r=e[tn];r&&(n=r)}if(!n){for(;e&&!e[nr]&&e!==t;)Li(e)&&Cg(e[pe],e),e=e[nn];e===null&&(e=t),Li(e)&&Cg(e[pe],e),n=e&&e[nr]}e=n}}function WO(t,e,n,r){let i=tn+r,o=n.length;r>0&&(n[i-1][nr]=e),r<o-tn?(e[nr]=n[i],WC(n,tn+r,e)):(n.push(e),e[nr]=null),e[nn]=n;let s=e[Xs];s!==null&&n!==s&&uT(s,e);let a=e[ea];a!==null&&a.insertView(t),$g(e),e[oe]|=128}function uT(t,e){let n=t[Wd],r=e[nn];if(Li(r))t[oe]|=Gd.HasTransplantedViews;else{let i=r[nn][Sn];e[Sn]!==i&&(t[oe]|=Gd.HasTransplantedViews)}n===null?t[Wd]=[e]:n.push(e)}function ty(t,e){let n=t[Wd],r=n.indexOf(e);n.splice(r,1)}function Jc(t,e){if(t.length<=tn)return;let n=tn+e,r=t[n];if(r){let i=r[Xs];i!==null&&i!==t&&ty(i,r),e>0&&(t[n-1][nr]=r[nr]);let o=$d(t,tn+e);HO(r[pe],r);let s=o[ea];s!==null&&s.detachView(o[pe]),r[nn]=null,r[nr]=null,r[oe]&=-129}return r}function Eh(t,e){if(!(e[oe]&256)){let n=e[it];n.destroyNode&&bh(t,e,n,3,null,null),zO(e)}}function Cg(t,e){if(e[oe]&256)return;let n=_e(null);try{e[oe]&=-129,e[oe]|=256,e[Fn]&&Yl(e[Fn]),KO(t,e),GO(t,e),e[pe].type===1&&e[it].destroy();let r=e[Xs];if(r!==null&&ti(e[nn])){r!==e[nn]&&ty(r,e);let i=e[ea];i!==null&&i.detachView(t)}Xg(e)}finally{_e(n)}}function GO(t,e){let n=t.cleanup,r=e[qd];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[qd]=null);let i=e[Fi];if(i!==null){e[Fi]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function KO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Lo)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];gr(4,a,u);try{u.call(a)}finally{gr(5,a,u)}}else{gr(4,i,o);try{o.call(i)}finally{gr(5,i,o)}}}}}function lT(t,e,n){return QO(t,e.parent,n)}function QO(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[ei];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===yr.None||o===yr.Emulated)return null}return Ln(r,n)}}function th(t,e,n,r,i){t.insertBefore(e,n,r,i)}function dT(t,e,n){t.appendChild(e,n)}function vC(t,e,n,r,i){r!==null?th(t,e,n,r,i):dT(t,e,n)}function hT(t,e){return t.parentNode(e)}function YO(t,e){return t.nextSibling(e)}function fT(t,e,n){return JO(t,e,n)}function ZO(t,e,n){return t.type&40?Ln(t,n):null}var JO=ZO,yC;function ny(t,e,n,r){let i=lT(t,r,e),o=e[it],s=r.parent||e[mn],a=fT(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)vC(o,i,n[u],a,!1);else vC(o,i,n,a,!1);yC!==void 0&&yC(o,r,e,n,i)}function Wc(t,e){if(e!==null){let n=e.type;if(n&3)return Ln(e,t);if(n&4)return tv(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Wc(t,r);{let i=t[e.index];return ti(i)?tv(-1,i):wr(i)}}else{if(n&128)return Wc(t,e.next);if(n&32)return ey(e,t)()||wr(t[e.index]);{let r=pT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Oo(t[Sn]);return Wc(i,r)}else return Wc(t,e.next)}}}return null}function pT(t,e){if(e!==null){let r=t[Sn][mn],i=e.projection;return r.projection[i]}return null}function tv(t,e){let n=tn+t+1;if(n<e.length){let r=e[n],i=r[pe].firstChild;if(i!==null)return Wc(r,i)}return e[ko]}function XO(t,e,n){t.removeChild(null,e,n)}function ry(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Vo(wr(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)ry(t,e,n.child,r,i,o,!1),Hs(e,t,i,a,o);else if(u&32){let l=ey(n,r),h;for(;h=l();)Hs(e,t,i,h,o);Hs(e,t,i,a,o)}else u&16?mT(t,e,r,n,i,o):Hs(e,t,i,a,o);n=s?n.projectionNext:n.next}}function bh(t,e,n,r,i,o){ry(n,r,t.firstChild,e,i,o,!1)}function eF(t,e,n){let r=e[it],i=lT(t,n,e),o=n.parent||e[mn],s=fT(o,n,e);mT(r,0,e,n,i,s)}function mT(t,e,n,r,i,o){let s=n[Sn],u=s[mn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Hs(e,t,i,h,o)}else{let l=u,h=s[nn];YD(r)&&(l.flags|=128),ry(t,e,l,h,i,o,!0)}}function tF(t,e,n,r,i){let o=n[ko],s=wr(n);o!==s&&Hs(e,t,r,o,i);for(let a=tn;a<n.length;a++){let u=n[a];bh(u[pe],u,t,e,r,o)}}function nF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Jr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Jr.Important),t.setStyle(n,r,i,o))}}function rF(t,e,n){t.setAttribute(e,"style",n)}function gT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function vT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Fg(t,e,r),i!==null&&gT(t,e,i),o!==null&&rF(t,e,o)}var vn={};function T(t=1){yT(gt(),me(),br()+t,!1)}function yT(t,e,n,r){if(!r)if((e[oe]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Fd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ld(e,o,0,n)}Fo(n)}function ye(t,e=we.Default){let n=me();if(n===null)return ce(t,e);let r=gn();return HD(r,n,en(t),e)}function _T(){let t="invalid";throw new Error(t)}function wT(t,e,n,r,i,o){let s=_e(null);try{let a=null;i&Vi.SignalBased&&(a=e[r][Jn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Vi.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):fD(e,a,r,o)}finally{_e(s)}}function iF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Fo(~i);else{let o=i,s=n[++r],a=n[++r];zk(s,o);let u=e[o];a(2,u)}}}finally{Fo(-1)}}function Ch(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[ei]=i,p[oe]=r|4|128|8|64,(l!==null||t&&t[oe]&2048)&&(p[oe]|=2048),yD(p),p[nn]=p[fa]=t,p[$t]=n,p[_r]=s||t&&t[_r],p[it]=a||t&&t[it],p[Js]=u||t&&t[Js]||null,p[mn]=o,p[mh]=DO(),p[Zs]=h,p[lD]=l,p[Sn]=e.type==2?t[Sn]:p,p}function va(t,e,n,r,i){let o=t.data[e];if(o===null)o=oF(t,e,n,r,i),qk()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Bk();o.injectorIndex=s===null?-1:s.injectorIndex}return pa(o,!0),o}function oF(t,e,n,r,i){let o=CD(),s=DD(),a=s?o:o&&o.parent,u=t.data[e]=lF(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function IT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ET(t,e,n,r,i){let o=br(),s=r&2;try{Fo(-1),s&&e.length>Tt&&yT(t,e,Tt,!1),gr(s?2:0,i),n(r,i)}finally{Fo(o),gr(s?3:1,i)}}function bT(t,e,n){if(hD(e)){let r=_e(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{_e(r)}}}function CT(t,e,n){ED()&&(gF(t,e,n,Ln(n,e)),(n.flags&64)===64&&MT(t,e,n))}function DT(t,e,n=Ln){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function TT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=iy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function iy(t,e,n,r,i,o,s,a,u,l,h){let p=Tt+r,g=p+i,v=sF(p,g),S=typeof l=="function"?l():l;return v[pe]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function sF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:vn);return n}function aF(t,e,n,r){let o=r.get(NO,nT)||n===yr.ShadowDom,s=t.selectRootElement(e,o);return cF(s),s}function cF(t){uF(t)}var uF=()=>null;function lF(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return bD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function _C(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Vi.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?wC(r,n,l,a,u):wC(r,n,l,a)}return r}function wC(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function dF(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],g=n?n.get(p):null,v=g?g.inputs:null,S=g?g.outputs:null;u=_C(0,p.inputs,h,u,v),l=_C(1,p.outputs,h,l,S);let O=u!==null&&s!==null&&!Rv(e)?SF(u,h,s):null;a.push(O)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function hF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function oy(t,e,n,r,i,o,s,a){let u=Ln(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(sy(t,n,h,r,i),gh(e)&&fF(n,e.index)):e.type&3?(r=hF(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function fF(t,e){let n=Hi(e,t);n[oe]&16||(n[oe]|=64)}function ST(t,e,n,r){if(ED()){let i=r===null?null:{"":-1},o=yF(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&AT(t,e,n,s,i,a),i&&_F(n,r,i)}n.mergedAttrs=Qc(n.mergedAttrs,n.attrs)}function AT(t,e,n,r,i,o){for(let l=0;l<r.length;l++)Wg(Zd(n,e),t,r[l].type);IF(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=IT(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Qc(n.mergedAttrs,h.hostAttrs),EF(t,n,e,u,h),wF(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}dF(t,n,o)}function pF(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;mF(s)!=a&&s.push(a),s.push(n,r,o)}}function mF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function gF(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;gh(n)&&bF(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Zd(n,e),Vo(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],l=na(e,t,a,n);if(Vo(l,e),s!==null&&TF(e,a-i,l,u,n,s),ji(u)){let h=Hi(n.index,e);h[$t]=na(e,t,a,n)}}}function MT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Wk();try{Fo(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Hg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&vF(u,l)}}finally{Fo(-1),Hg(s)}}function vF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function yF(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(JC(e,s.selectors,!1))if(r||(r=[]),ji(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;nv(t,e,u)}else r.unshift(s),nv(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function nv(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function _F(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new G(-301,!1);r.push(e[i],o)}}}function wF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ji(e)&&(n[""]=t)}}function IF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function EF(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Po(i.type,!0)),s=new Lo(o,ji(i),ye);t.blueprint[r]=s,n[r]=s,pF(t,e,r,IT(t,n,i.hostVars,vn),i)}function bF(t,e,n){let r=Ln(e,t),i=TT(n),o=t[_r].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Dh(t,Ch(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function CF(t,e,n,r,i,o){let s=Ln(t,e);DF(e[it],s,o,t.value,n,r,i)}function DF(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Gs(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function TF(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];wT(r,n,u,l,h,p)}}function SF(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function xT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function RT(t,e){let n=t.contentQueries;if(n!==null){let r=_e(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];MD(o),a.contentQueries(2,e[s],s)}}}finally{_e(r)}}}function Dh(t,e){return t[Zc]?t[iC][nr]=e:t[Zc]=e,t[iC]=e,e}function rv(t,e,n){MD(0);let r=_e(null);try{e(t,n)}finally{_e(r)}}function AF(t){return t[qd]??=[]}function MF(t){return t.cleanup??=[]}function NT(t,e){let n=t[Js],r=n?n.get(rr,null):null;r&&r.handleError(e)}function sy(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],l=e[s],h=t.data[s];wT(h,l,r,a,u,i)}}function PT(t,e,n){let r=vD(e,t);$O(t[it],r,n)}function xF(t,e){let n=Hi(e,t),r=n[pe];RF(r,n);let i=n[ei];i!==null&&n[Zs]===null&&(n[Zs]=Jv(i,n[Js])),ay(r,n,n[$t])}function RF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ay(t,e,n){Uv(e);try{let r=t.viewQuery;r!==null&&rv(1,r,n);let i=t.template;i!==null&&ET(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ea]?.finishViewCreation(t),t.staticContentQueries&&RT(t,e),t.staticViewQueries&&rv(2,t.viewQuery,n);let o=t.components;o!==null&&NF(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[oe]&=-5,jv()}}function NF(t,e){for(let n=0;n<e.length;n++)xF(t,e[n])}function Th(t,e,n,r){let i=_e(null);try{let o=e.tView,a=t[oe]&4096?4096:16,u=Ch(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Xs]=l;let h=t[ea];return h!==null&&(u[ea]=h.createEmbeddedView(o)),ay(o,u,n),u}finally{_e(i)}}function kT(t,e){let n=tn+e;if(n<t.length)return t[n]}function ra(t,e){return!e||e.firstChild===null||YD(t)}function iu(t,e,n,r=!0){let i=e[pe];if(WO(i,e,t,n),r){let s=tv(n,t),a=e[it],u=hT(a,t[ko]);u!==null&&qO(i,t[mn],a,e,u,s)}let o=e[Zs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function OT(t,e){let n=Jc(t,e);return n!==void 0&&Eh(n[pe],n),n}function nh(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(wr(o)),ti(o)&&PF(o,r);let s=n.type;if(s&8)nh(t,e,n.child,r);else if(s&32){let a=ey(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=pT(e,n);if(Array.isArray(a))r.push(...a);else{let u=Oo(e[Sn]);nh(u[pe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function PF(t,e){for(let n=tn;n<t.length;n++){let r=t[n],i=r[pe].firstChild;i!==null&&nh(r[pe],r,i,e)}t[ko]!==t[ei]&&e.push(t[ko])}var FT=[];function kF(t){return t[Fn]??OF(t)}function OF(t){let e=FT.pop()??Object.create(LF);return e.lView=t,e}function FF(t){t.lView[Fn]!==t&&(t.lView=null,FT.push(t))}var LF=ae(L({},Ds),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{_h(t.lView)},consumerOnSignalRead(){this.lView[Fn]=this}});function VF(t){let e=t[Fn]??Object.create(UF);return e.lView=t,e}var UF=ae(L({},Ds),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Oo(t.lView);for(;e&&!LT(e[pe]);)e=Oo(e);e&&_D(e)},consumerOnSignalRead(){this.lView[Fn]=this}});function LT(t){return t.type!==2}var jF=100;function VT(t,e=!0,n=0){let r=t[_r],i=r.rendererFactory,o=!1;o||i.begin?.();try{BF(t,n)}catch(s){throw e&&NT(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function BF(t,e){let n=AD();try{sC(!0),iv(t,e);let r=0;for(;yh(t);){if(r===jF)throw new G(103,!1);r++,iv(t,1)}}finally{sC(n)}}function $F(t,e,n,r){let i=e[oe];if((i&256)===256)return;let o=!1,s=!1;!o&&e[_r].inlineEffectRunner?.flush(),Uv(e);let a=!0,u=null,l=null;o||(LT(t)?(l=kF(e),u=Uc(l)):ub()===null?(a=!1,l=VF(e),u=Uc(l)):e[Fn]&&(Yl(e[Fn]),e[Fn]=null));try{yD(e),Hk(t.bindingStartIndex),n!==null&&ET(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let v=t.preOrderCheckHooks;v!==null&&Fd(e,v,null)}else{let v=t.preOrderHooks;v!==null&&Ld(e,v,0,null),wg(e,0)}if(s||HF(e),UT(e,0),t.contentQueries!==null&&RT(t,e),!o)if(h){let v=t.contentCheckHooks;v!==null&&Fd(e,v)}else{let v=t.contentHooks;v!==null&&Ld(e,v,1),wg(e,1)}iF(t,e);let p=t.components;p!==null&&BT(e,p,0);let g=t.viewQuery;if(g!==null&&rv(2,g,r),!o)if(h){let v=t.viewCheckHooks;v!==null&&Fd(e,v)}else{let v=t.viewHooks;v!==null&&Ld(e,v,2),wg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Od]){for(let v of e[Od])v();e[Od]=null}o||(e[oe]&=-73)}catch(h){throw o||_h(e),h}finally{l!==null&&(Kl(l,u),a&&FF(l)),jv()}}function UT(t,e){for(let n=JD(t);n!==null;n=XD(n))for(let r=tn;r<n.length;r++){let i=n[r];jT(i,e)}}function HF(t){for(let e=JD(t);e!==null;e=XD(e)){if(!(e[oe]&Gd.HasTransplantedViews))continue;let n=e[Wd];for(let r=0;r<n.length;r++){let i=n[r];_D(i)}}}function qF(t,e,n){let r=Hi(e,t);jT(r,n)}function jT(t,e){Lv(t)&&iv(t,e)}function iv(t,e){let r=t[pe],i=t[oe],o=t[Fn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ql(o)),s||=!1,o&&(o.dirty=!1),t[oe]&=-9217,s)$F(r,t,r.template,t[$t]);else if(i&8192){UT(t,1);let a=r.components;a!==null&&BT(t,a,1)}}function BT(t,e,n){for(let r=0;r<e.length;r++)qF(t,e[r],n)}function cy(t,e){let n=AD()?64:1088;for(t[_r].changeDetectionScheduler?.notify(e);t;){t[oe]|=n;let r=Oo(t);if(jg(t)&&!r)return t;t=r}return null}var ia=class{get rootNodes(){let e=this._lView,n=e[pe];return nh(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$t]}set context(e){this._lView[$t]=e}get destroyed(){return(this._lView[oe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[nn];if(ti(e)){let n=e[zd],r=n?n.indexOf(this):-1;r>-1&&(Jc(e,r),$d(n,r))}this._attachedToViewContainer=!1}Eh(this._lView[pe],this._lView)}onDestroy(e){wD(this._lView,e)}markForCheck(){cy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){$g(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,VT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=jg(this._lView),n=this._lView[Xs];n!==null&&!e&&ty(n,this._lView),cT(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let n=jg(this._lView),r=this._lView[Xs];r!==null&&!n&&uT(r,this._lView),$g(this._lView)}};var xK=new RegExp(`^(\\d+)*(${xO}|${MO})*(.*)`);var zF=()=>null;function oa(t,e){return zF(t,e)}var sa=class{},Sh=new Q("",{providedIn:"root",factory:()=>!1});var $T=new Q(""),HT=new Q(""),ov=class{},rh=class{};function WF(t){let e=Error(`No component factory found for ${pn(t)}.`);return e[GF]=t,e}var GF="ngComponent";var sv=class{resolveComponentFactory(e){throw WF(e)}},aa=class{static{this.NULL=new sv}},ca=class{},Tr=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>KF()}}return t})();function KF(){let t=me(),e=gn(),n=Hi(e.index,t);return(Li(n)?n:t)[it]}var QF=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>null})}}return t})();function av(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ng(i,a);else if(o==2){let u=a,l=e[++s];r=Ng(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ih=class extends aa{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ui(e);return new ua(n,this.ngModule)}};function IC(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Vi.None;e?n.push({propName:s,templateName:r,isSignal:(a&Vi.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function YF(t){let e=t.toLowerCase();return e==="svg"?Rk:e==="math"?Nk:null}var ua=class extends rh{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=IC(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return IC(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=dk(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=_e(null);try{i=i||this.ngModule;let s=i instanceof Tn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new qg(e,s):e,u=a.get(ca,null);if(u===null)throw new G(407,!1);let l=a.get(QF,null),h=a.get(sa,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},g=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",S=r?aF(g,r,this.componentDef.encapsulation,a):aT(g,v,YF(v)),O=512;this.componentDef.signals?O|=4096:this.componentDef.onPush||(O|=16);let k=null;S!==null&&(k=Jv(S,a,!0));let B=iy(0,null,null,1,0,null,null,null,null,null,null),Z=Ch(null,B,null,O,null,null,p,g,a,null,k);Uv(Z);let te,Ce,tt=null;try{let ue=this.componentDef,D,y=null;ue.findHostDirectiveDefs?(D=[],y=new Map,ue.findHostDirectiveDefs(ue,D,y),D.push(ue)):D=[ue];let E=ZF(Z,S);tt=JF(E,S,ue,D,Z,p,g),Ce=Fv(B,Tt),S&&tL(g,ue,S,r),n!==void 0&&nL(Ce,this.ngContentSelectors,n),te=eL(tt,ue,D,y,Z,[rL]),ay(B,Z,null)}catch(ue){throw tt!==null&&Xg(tt),Xg(Z),ue}finally{jv()}return new cv(this.componentType,te,Kv(Ce,Z),Z,Ce)}finally{_e(o)}}},cv=class extends ov{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ia(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;sy(o[pe],o,i,e,n),this.previousInputValues.set(e,n);let s=Hi(this._tNode.index,o);cy(s,1)}}get injector(){return new No(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ZF(t,e){let n=t[pe],r=Tt;return t[r]=e,va(n,r,2,"#host",null)}function JF(t,e,n,r,i,o,s){let a=i[pe];XF(r,t,e,s);let u=null;e!==null&&(u=Jv(e,i[Js]));let l=o.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Ch(i,TT(n),null,h,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&nv(a,t,r.length-1),Dh(i,p),i[t.index]=p}function XF(t,e,n,r){for(let i of t)e.mergedAttrs=Qc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(av(e,e.mergedAttrs,!0),n!==null&&vT(r,n,e))}function eL(t,e,n,r,i,o){let s=gn(),a=i[pe],u=Ln(s,i);AT(a,i,s,n,null,r);for(let h=0;h<n.length;h++){let p=s.directiveStart+h,g=na(i,a,p,s);Vo(g,i)}MT(a,i,s),u&&Vo(u,i);let l=na(i,a,s.directiveStart+s.componentOffset,s);if(t[$t]=i[$t]=l,o!==null)for(let h of o)h(l,e);return bT(a,s,i),l}function tL(t,e,n,r){if(r)Fg(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=hk(e.selectors[0]);i&&Fg(t,n,i),o&&o.length>0&&gT(t,n,o.join(" "))}}function nL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function rL(){let t=gn();Hv(me()[pe],t)}var Ah=(()=>{class t{static{this.__NG_ELEMENT_ID__=iL}}return t})();function iL(){let t=gn();return sL(t,me())}var oL=Ah,qT=class extends oL{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Kv(this._hostTNode,this._hostLView)}get injector(){return new No(this._hostTNode,this._hostLView)}get parentInjector(){let e=qv(this._hostTNode,this._hostLView);if(LD(e)){let n=Qd(e,this._hostLView),r=Kd(e),i=n[pe].data[r+8];return new No(i,n)}else return new No(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=EC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-tn}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=oa(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,ra(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!Sk(e),a;if(s)a=n;else{let S=n||{};a=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new ua(Ui(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let O=(s?l:this.parentInjector).get(Tn,null);O&&(o=O)}let h=Ui(u.componentType??{}),p=oa(this._lContainer,h?.id??null),g=p?.firstChild??null,v=u.create(l,i,g,o);return this.insertImpl(v.hostView,a,ra(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Pk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[nn],l=new qT(u,u[mn],u[nn]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return iu(s,i,o,r),e.attachToViewContainerRef(),WC(Dg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=EC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Jc(this._lContainer,n);r&&($d(Dg(this._lContainer),n),Eh(r[pe],r))}detach(e){let n=this._adjustIndex(e,-1),r=Jc(this._lContainer,n);return r&&$d(Dg(this._lContainer),n)!=null?new ia(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function EC(t){return t[zd]}function Dg(t){return t[zd]||(t[zd]=[])}function sL(t,e){let n,r=e[t.index];return ti(r)?n=r:(n=xT(r,e,null,t),e[t.index]=n,Dh(e,n)),cL(n,e,t,r),new qT(n,t,e)}function aL(t,e){let n=t[it],r=n.createComment(""),i=Ln(e,t),o=hT(n,i);return th(n,o,r,YO(n,i),!1),r}var cL=dL,uL=()=>!1;function lL(t,e,n){return uL(t,e,n)}function dL(t,e,n,r){if(t[ko])return;let i;n.type&8?i=wr(r):i=aL(e,n),t[ko]=i}var bC=new Set;function Sr(t){bC.has(t)||(bC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function hL(t){return typeof t=="function"&&t[Jn]!==void 0}function yn(t,e){Sr("NgSignals");let n=Ib(t),r=n[Jn];return e?.equal&&(r.equal=e.equal),n.set=i=>Xl(r,i),n.update=i=>Eb(r,i),n.asReadonly=fL.bind(n),n}function fL(){let t=this[Jn];if(t.readonlyFn===void 0){let e=()=>this();e[Jn]=t,t.readonlyFn=e}return t.readonlyFn}function zT(t){return hL(t)&&typeof t.set=="function"}function pL(t){return Object.getPrototypeOf(t.prototype).constructor}function on(t){let e=pL(t.type),n=!0,r=[t];for(;e;){let i;if(ji(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Rd(t.inputs),s.inputTransforms=Rd(t.inputTransforms),s.declaredInputs=Rd(t.declaredInputs),s.outputs=Rd(t.outputs);let a=i.hostBindings;a&&_L(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&vL(t,u),l&&yL(t,l),mL(t,i),NP(t.outputs,i.outputs),ji(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===on&&(n=!1)}}e=Object.getPrototypeOf(e)}gL(r)}function mL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function gL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qc(i.hostAttrs,n=Qc(n,i.hostAttrs))}}function Rd(t){return t===Ks?{}:t===fn?[]:t}function vL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function yL(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function _L(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function uy(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Bi=class{},Xc=class{};var uv=class extends Bi{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ih(this);let o=nD(e);this._bootstrapComponents=sT(o.bootstrap),this._r3Injector=WD(e,n,[{provide:Bi,useValue:this},{provide:aa,useValue:this.componentFactoryResolver},...r],pn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},lv=class extends Xc{constructor(e){super(),this.moduleType=e}create(e){return new uv(this.moduleType,e,[])}};var oh=class extends Bi{constructor(e){super(),this.componentFactoryResolver=new ih(this),this.instance=null;let n=new Yc([...e.providers,{provide:Bi,useValue:this},{provide:aa,useValue:this.componentFactoryResolver}],e.parent||kv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Mh(t,e,n=null){return new oh({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function ly(t,e,n){return t[e]=n}function wL(t,e){return t[e]}function ir(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function WT(t,e,n,r){let i=ir(t,e,n);return ir(t,e+1,r)||i}function IL(t){return(t.flags&32)===32}function EL(t,e,n,r,i,o,s,a,u){let l=e.consts,h=va(e,t,4,s||null,a||null);ST(e,n,h,ta(l,u)),Hv(e,h);let p=h.tView=iy(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function sh(t,e,n,r,i,o,s,a,u,l){let h=n+Tt,p=e.firstCreatePass?EL(h,e,t,r,i,o,s,a,u):e.data[h];pa(p,!1);let g=bL(e,t,p,n);Bv()&&ny(e,t,g,p),Vo(g,t);let v=xT(g,t,g,p);return t[h]=v,Dh(t,v),lL(v,p,t),Ov(p)&&CT(e,t,p),u!=null&&DT(t,p,l),p}function Ee(t,e,n,r,i,o,s,a){let u=me(),l=gt(),h=ta(l.consts,o);return sh(u,l,t,e,n,r,i,h,s,a),Ee}var bL=CL;function CL(t,e,n,r){return $v(!0),e[it].createComment("")}var qs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(qs||{}),GT=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})(),dv=class t{constructor(){this.ngZone=N(je),this.scheduler=N(sa),this.errorHandler=N(rr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[qs.EarlyRead,qs.Write,qs.MixedReadWrite,qs.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}},hv=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function dy(t,e){!e?.injector&&ha(dy);let n=e?.injector??N(mt);return UO(n)?(Sr("NgAfterNextRender"),TL(t,n,e,!0)):SL}function DL(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function TL(t,e,n,r){let i=e.get(GT);i.impl??=e.get(dv);let o=n?.phase??qs.MixedReadWrite,s=n?.manualCleanup!==!0?e.get(Cr):null,a=new hv(i.impl,DL(t,o),r,s);return i.impl.register(a),a}var SL={destroy(){}};function qo(t,e,n,r){let i=me(),o=ma();if(ir(i,o,e)){let s=gt(),a=wh();CF(a,i,t,e,n,r)}return qo}function KT(t,e,n,r){return ir(t,ma(),n)?e+Gs(n)+r:vn}function AL(t,e,n,r,i,o){let s=$k(),a=WT(t,s,n,i);return Vv(2),a?e+Gs(n)+r+Gs(i)+o:vn}function Nd(t,e){return t<<17|e<<2}function Uo(t){return t>>17&32767}function ML(t){return(t&2)==2}function xL(t,e){return t&131071|e<<17}function fv(t){return t|2}function la(t){return(t&131068)>>2}function Tg(t,e){return t&-131069|e<<2}function RL(t){return(t&1)===1}function pv(t){return t|1}function NL(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Uo(s),u=la(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||nu(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Uo(t[a+1]);t[r+1]=Nd(g,a),g!==0&&(t[g+1]=Tg(t[g+1],r)),t[a+1]=xL(t[a+1],r)}else t[r+1]=Nd(a,0),a!==0&&(t[a+1]=Tg(t[a+1],r)),a=r;else t[r+1]=Nd(u,0),a===0?a=r:t[u+1]=Tg(t[u+1],r),u=r;l&&(t[r+1]=fv(t[r+1])),CC(t,h,r,!0),CC(t,h,r,!1),PL(e,h,t,r,o),s=Nd(a,u),o?e.classBindings=s:e.styleBindings=s}function PL(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&nu(o,e)>=0&&(n[r+1]=pv(n[r+1]))}function CC(t,e,n,r){let i=t[n+1],o=e===null,s=r?Uo(i):la(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];kL(u,e)&&(a=!0,t[s+1]=r?pv(l):fv(l)),s=r?Uo(l):la(l)}a&&(t[n+1]=r?fv(i):pv(i))}function kL(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?nu(t,e)>=0:!1}var Dt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function QT(t){return t.substring(Dt.key,Dt.keyEnd)}function OL(t){return t.substring(Dt.value,Dt.valueEnd)}function FL(t){return JT(t),YT(t,da(t,0,Dt.textEnd))}function YT(t,e){let n=Dt.textEnd;return n===e?-1:(e=Dt.keyEnd=VL(t,Dt.key=e,n),da(t,e,n))}function LL(t){return JT(t),ZT(t,da(t,0,Dt.textEnd))}function ZT(t,e){let n=Dt.textEnd,r=Dt.key=da(t,e,n);return n===r?-1:(r=Dt.keyEnd=UL(t,r,n),r=DC(t,r,n,58),r=Dt.value=da(t,r,n),r=Dt.valueEnd=jL(t,r,n),DC(t,r,n,59))}function JT(t){Dt.key=0,Dt.keyEnd=0,Dt.value=0,Dt.valueEnd=0,Dt.textEnd=t.length}function da(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function VL(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function UL(t,e,n){let r;for(;e<n&&((r=t.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function DC(t,e,n,r){return e=da(t,e,n),e<n&&e++,e}function jL(t,e,n){let r=-1,i=-1,o=-1,s=e,a=s;for(;s<n;){let u=t.charCodeAt(s++);if(u===59)return a;u===34||u===39?a=s=TC(t,u,s,n):e===s-4&&o===85&&i===82&&r===76&&u===40?a=s=TC(t,41,s,n):u>32&&(a=s),o=i,i=r,r=u&-33}return a}function TC(t,e,n,r){let i=-1,o=n;for(;o<r;){let s=t.charCodeAt(o++);if(s==e&&i!==92)return o;s==92&&i===92?i=0:i=s}throw new Error}function W(t,e,n){let r=me(),i=ma();if(ir(r,i,e)){let o=gt(),s=wh();oy(o,s,r,t,e,r[it],n,!1)}return W}function mv(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";sy(t,n,o[s],s,r)}function qi(t,e){return HL(t,e,null,!0),qi}function XT(t){eS(rS,BL,t,!1)}function BL(t,e){for(let n=LL(e);n>=0;n=ZT(e,n))rS(t,QT(e),OL(e))}function sn(t){eS(QL,$L,t,!0)}function $L(t,e){for(let n=FL(e);n>=0;n=YT(e,n))fh(t,QT(e),!0)}function HL(t,e,n,r){let i=me(),o=gt(),s=Vv(2);if(o.firstUpdatePass&&nS(o,t,s,r),e!==vn&&ir(i,s,e)){let a=o.data[br()];iS(o,a,i,i[it],t,i[s+1]=ZL(e,n),r,s)}}function eS(t,e,n,r){let i=gt(),o=Vv(2);i.firstUpdatePass&&nS(i,null,o,r);let s=me();if(n!==vn&&ir(s,o,n)){let a=i.data[br()];if(oS(a,r)&&!tS(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=Ng(u,n||"")),mv(i,a,s,n,r)}else YL(i,a,s,s[it],s[o+1],s[o+1]=KL(t,e,n),r,o)}}function tS(t,e){return e>=t.expandoStartIndex}function nS(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[br()],s=tS(t,n);oS(o,r)&&e===null&&!s&&(e=!1),e=qL(i,o,e,r),NL(i,o,e,n,s,r)}}function qL(t,e,n,r){let i=Gk(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Sg(null,t,e,n,r),n=eu(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Sg(i,t,e,n,r),o===null){let u=zL(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Sg(null,t,e,u[1],r),u=eu(u,e.attrs,r),WL(t,e,r,u))}else o=GL(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function zL(t,e,n){let r=n?e.classBindings:e.styleBindings;if(la(r)!==0)return t[Uo(r)]}function WL(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Uo(i)]=r}function GL(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=eu(r,s,n)}return eu(r,e.attrs,n)}function Sg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=eu(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function eu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),fh(t,s,n?!0:e[++o]))}return t===void 0?null:t}function KL(t,e,n){if(n==null||n==="")return fn;let r=[],i=Ho(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function rS(t,e,n){fh(t,e,Ho(n))}function QL(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&fh(t,r,n)}function YL(t,e,n,r,i,o,s,a){i===vn&&(i=fn);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,v=l<o.length?o[l+1]:void 0,S=null,O;h===p?(u+=2,l+=2,g!==v&&(S=p,O=v)):p===null||h!==null&&h<p?(u+=2,S=h):(l+=2,S=p,O=v),S!==null&&iS(t,e,n,r,S,O,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function iS(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=RL(l)?SC(u,e,n,i,la(l),s):void 0;if(!ah(h)){ah(o)||ML(l)&&(o=SC(u,null,n,i,a,s));let p=vD(br(),n);nF(r,s,p,i,o)}}function SC(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===vn&&(g=p?fn:void 0);let v=p?yg(g,r):h===r?g:void 0;if(l&&!ah(v)&&(v=yg(u,r)),ah(v)&&(a=v,s))return a;let S=t[i+1];i=s?Uo(S):la(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=yg(u,r))}return a}function ah(t){return t!==void 0}function ZL(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=pn(Ho(t)))),t}function oS(t,e){return(t.flags&(e?8:16))!==0}var gv=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Ag(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function JL(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Ag(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),v=e[u],S=Ag(s,g,u,v,n);if(S!==0){S<0&&t.updateValue(s,v),s--,u--;continue}let O=n(o,l),k=n(s,g),B=n(o,h);if(Object.is(B,k)){let Z=n(u,v);Object.is(Z,O)?(t.swap(o,s),t.updateValue(s,v),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new ch,i??=MC(t,o,s,n),vv(t,r,o,B))t.updateValue(o,h),o++,s++;else if(i.has(B))r.set(O,t.detach(o)),s--;else{let Z=t.create(o,e[o]);t.attach(o,Z),o++,s++}}for(;o<=u;)AC(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=Ag(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new ch,i??=MC(t,o,s,n);let v=n(o,p);if(vv(t,r,o,v))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(v))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let S=n(o,h);r.set(S,t.detach(o)),s--}}}for(;!l.done;)AC(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function vv(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function AC(t,e,n,r,i){if(vv(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function MC(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var ch=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function he(t,e){Sr("NgControlFlow");let n=me(),r=ma(),i=n[r]!==vn?n[r]:-1,o=i!==-1?uh(n,Tt+i):void 0,s=0;if(ir(n,r,t)){let a=_e(null);try{if(o!==void 0&&OT(o,s),t!==-1){let u=Tt+t,l=uh(n,u),h=Iv(n[pe],u),p=oa(l,h.tView.ssrId),g=Th(n,h,e,{dehydratedView:p});iu(l,g,s,ra(h,p))}}finally{_e(a)}}else if(o!==void 0){let a=kT(o,s);a!==void 0&&(a[$t]=e)}}var yv=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-tn}};function _n(t){return t}function ni(t,e){return e}var _v=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function ot(t,e,n,r,i,o,s,a,u,l,h,p,g){Sr("NgControlFlow");let v=me(),S=gt(),O=u!==void 0,k=me(),B=a?s.bind(k[Sn][$t]):s,Z=new _v(O,B);k[Tt+t]=Z,sh(v,S,t+1,e,n,r,i,ta(S.consts,o)),O&&sh(v,S,t+2,u,l,h,p,ta(S.consts,g))}var wv=class extends gv{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-tn}at(e){return this.getLView(e)[$t].$implicit}attach(e,n){let r=n[Zs];this.needsIndexUpdate||=e!==this.length,iu(this.lContainer,n,e,ra(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,XL(this.lContainer,e)}create(e,n){let r=oa(this.lContainer,this.templateTNode.tView.ssrId),i=Th(this.hostLView,this.templateTNode,new yv(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Eh(e[pe],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[$t].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[$t].$index=e}getLView(e){return eV(this.lContainer,e)}};function st(t){let e=_e(null),n=br();try{let r=me(),i=r[pe],o=r[n],s=n+1,a=uh(r,s);if(o.liveCollection===void 0){let l=Iv(i,s);o.liveCollection=new wv(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(JL(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=ma(),h=u.length===0;if(ir(r,l,h)){let p=n+2,g=uh(r,p);if(h){let v=Iv(i,p),S=oa(g,v.tView.ssrId),O=Th(r,v,void 0,{dehydratedView:S});iu(g,O,0,ra(v,S))}else OT(g,0)}}}finally{_e(e)}}function uh(t,e){return t[e]}function XL(t,e){return Jc(t,e)}function eV(t,e){return kT(t,e)}function Iv(t,e){return Fv(t,e)}function tV(t,e,n,r,i,o){let s=e.consts,a=ta(s,i),u=va(e,t,2,r,a);return ST(e,n,u,ta(s,o)),u.attrs!==null&&av(u,u.attrs,!1),u.mergedAttrs!==null&&av(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function _(t,e,n,r){let i=me(),o=gt(),s=Tt+t,a=i[it],u=o.firstCreatePass?tV(s,o,i,e,n,r):o.data[s],l=nV(o,i,u,a,e,t);i[s]=l;let h=Ov(u);return pa(u,!0),vT(a,l,u),!IL(u)&&Bv()&&ny(o,i,l,u),Fk()===0&&Vo(l,i),Lk(),h&&(CT(o,i,u),bT(o,u,i)),r!==null&&DT(i,u),_}function w(){let t=gn();DD()?TD():(t=t.parent,pa(t,!1));let e=t;Uk(e)&&jk(),Vk();let n=gt();return n.firstCreatePass&&(Hv(n,t),hD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&eO(e)&&mv(n,e,me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&tO(e)&&mv(n,e,me(),e.stylesWithoutHost,!1),w}function Y(t,e,n,r){return _(t,e,n,r),w(),Y}var nV=(t,e,n,r,i,o)=>($v(!0),aT(r,i,Yk()));function yt(){return me()}var xo=void 0;function rV(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var iV=["en",[["a","p"],["AM","PM"],xo],[["AM","PM"],xo,xo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xo,"{1} 'at' {0}",xo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",rV],Mg={};function Un(t){let e=oV(t),n=xC(e);if(n)return n;let r=e.split("-")[0];if(n=xC(r),n)return n;if(r==="en")return iV;throw new G(701,!1)}function xC(t){return t in Mg||(Mg[t]=Ro.ng&&Ro.ng.common&&Ro.ng.common.locales&&Ro.ng.common.locales[t]),Mg[t]}var ut=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ut||{});function oV(t){return t.toLowerCase().replace(/_/g,"-")}var lh="en-US";var sV=lh;function aV(t){typeof t=="string"&&(sV=t.toLowerCase().replace(/_/g,"-"))}var cV=(t,e,n)=>{};function Ae(t,e,n,r){let i=me(),o=gt(),s=gn();return sS(o,i,i[it],s,t,e,r),Ae}function uV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[qd],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function sS(t,e,n,r,i,o,s){let a=Ov(r),l=t.firstCreatePass&&MF(t),h=e[$t],p=AF(e),g=!0;if(r.type&3||s){let O=Ln(r,e),k=s?s(O):O,B=p.length,Z=s?Ce=>s(wr(Ce[r.index])):r.index,te=null;if(!s&&a&&(te=uV(t,e,i,r.index)),te!==null){let Ce=te.__ngLastListenerFn__||te;Ce.__ngNextListenerFn__=o,te.__ngLastListenerFn__=o,g=!1}else{o=NC(r,e,h,o),cV(O,i,o);let Ce=n.listen(k,i,o);p.push(o,Ce),l&&l.push(i,Z,B,B+1)}}else o=NC(r,e,h,o);let v=r.outputs,S;if(g&&v!==null&&(S=v[i])){let O=S.length;if(O)for(let k=0;k<O;k+=2){let B=S[k],Z=S[k+1],tt=e[B][Z].subscribe(o),ue=p.length;p.push(o,tt),l&&l.push(i,r.index,ue,-(ue+1))}}}function RC(t,e,n,r){let i=_e(null);try{return gr(6,e,n),n(r)!==!1}catch(o){return NT(t,o),!1}finally{gr(7,e,n),_e(i)}}function NC(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?Hi(t.index,e):e;cy(s,5);let a=RC(e,n,r,o),u=i.__ngNextListenerFn__;for(;u;)a=RC(e,n,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function ne(t=1){return Qk(t)}function lV(t,e){let n=null,r=sk(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?JC(t,o,!0):uk(r,o))return i}return n}function zi(t){let e=me()[Sn][mn];if(!e.projection){let n=t?t.length:1,r=e.projection=ZP(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?lV(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Mn(t,e=0,n,r,i,o){let s=me(),a=gt(),u=r?t+1:null;u!==null&&sh(s,a,u,r,i,o,null,n);let l=va(a,Tt+t,16,null,n||null);l.projection===null&&(l.projection=e),TD();let p=!s[Zs]||bD();s[Sn][mn].projection[l.projection]===null&&u!==null?dV(s,a,u):p&&(l.flags&32)!==32&&eF(a,s,l)}function dV(t,e,n){let r=Tt+n,i=e.data[r],o=t[r],s=oa(o,i.tView.ssrId),a=Th(t,i,void 0,{dehydratedView:s});iu(o,a,0,ra(i,s))}function xh(t,e,n){return aS(t,"",e,"",n),xh}function aS(t,e,n,r,i){let o=me(),s=KT(o,e,n,r);if(s!==vn){let a=gt(),u=wh();oy(a,u,o,t,s,o[it],i,!1)}return aS}function hy(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function jn(t){let e=SD();return vh(e,Tt+t)}function x(t,e=""){let n=me(),r=gt(),i=t+Tt,o=r.firstCreatePass?va(r,i,1,e,null):r.data[i],s=hV(r,n,o,e,t);n[i]=s,Bv()&&ny(r,n,s,o),pa(o,!1)}var hV=(t,e,n,r,i)=>($v(!0),BO(e[it],r));function z(t){return Re("",t,""),z}function Re(t,e,n){let r=me(),i=KT(r,t,e,n);return i!==vn&&PT(r,br(),i),Re}function fy(t,e,n,r,i){let o=me(),s=AL(o,t,e,n,r,i);return s!==vn&&PT(o,br(),s),fy}function Ht(t,e,n){zT(e)&&(e=e());let r=me(),i=ma();if(ir(r,i,e)){let o=gt(),s=wh();oy(o,s,r,t,e,r[it],n,!1)}return Ht}function an(t,e){let n=zT(t);return n&&t.set(e),n}function qt(t,e){let n=me(),r=gt(),i=gn();return sS(r,n,n[it],i,t,e),qt}var cS={};function zo(t){let e=gt(),n=me(),r=t+Tt,i=va(e,r,128,null,null);return pa(i,!1),hy(e,n,r,cS),zo}function ya(t){Sr("NgLet");let e=gt(),n=me(),r=br();return hy(e,n,r,t),t}function ri(t){let e=SD(),n=vh(e,Tt+t);if(n===cS)throw new G(314,!1);return n}function fV(t,e,n){let r=gt();if(r.firstCreatePass){let i=ji(t);Ev(n,r.data,r.blueprint,i,!0),Ev(e,r.data,r.blueprint,i,!1)}}function Ev(t,e,n,r,i){if(t=en(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ev(t[o],e,n,r,i);else{let o=gt(),s=me(),a=gn(),u=Ys(t)?t:en(t.provide),l=cD(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Ys(t)||!t.multi){let v=new Lo(l,i,ye),S=Rg(u,e,i?h:h+g,p);S===-1?(Wg(Zd(a,s),o,u),xg(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)):(n[S]=v,s[S]=v)}else{let v=Rg(u,e,h+g,p),S=Rg(u,e,h,h+g),O=v>=0&&n[v],k=S>=0&&n[S];if(i&&!k||!i&&!O){Wg(Zd(a,s),o,u);let B=gV(i?mV:pV,n.length,i,r,l);!i&&k&&(n[S].providerFactory=B),xg(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(B),s.push(B)}else{let B=uS(n[i?S:v],l,!i&&r);xg(o,t,v>-1?v:S,B)}!i&&r&&k&&n[S].componentProviders++}}}function xg(t,e,n,r){let i=Ys(e),o=wk(e);if(i||o){let u=(o?en(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function uS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Rg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function pV(t,e,n,r){return bv(this.multi,[])}function mV(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=na(n,n[pe],this.providerFactory.index,r);o=a.slice(0,s),bv(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],bv(i,o);return o}function bv(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function gV(t,e,n,r,i){let o=new Lo(t,n,ye);return o.multi=[],o.index=e,o.componentProviders=0,uS(o,i,r&&!n),o}function sr(t,e=[]){return n=>{n.providersResolver=(r,i)=>fV(r,i?i(t):t,e)}}var vV=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=oD(!1,n.type),i=r.length>0?Mh([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(ce(Tn))})}}return t})();function X(t){Sr("NgStandalone"),t.getStandaloneInjector=e=>e.get(vV).getOrCreateStandaloneInjector(t)}function ar(t,e,n){let r=ru()+t,i=me();return i[r]===vn?ly(i,r,n?e.call(n):e()):wL(i,r)}function Ar(t,e,n,r){return dS(me(),ru(),t,e,n,r)}function _a(t,e,n,r,i){return hS(me(),ru(),t,e,n,r,i)}function lS(t,e){let n=t[e];return n===vn?void 0:n}function dS(t,e,n,r,i,o){let s=e+n;return ir(t,s,i)?ly(t,s+1,o?r.call(o,i):r(i)):lS(t,s+1)}function hS(t,e,n,r,i,o,s){let a=e+n;return WT(t,a,i,o)?ly(t,a+2,s?r.call(s,i,o):r(i,o)):lS(t,a+2)}function He(t,e){let n=gt(),r,i=t+Tt;n.firstCreatePass?(r=yV(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Po(r.type,!0)),s,a=hn(ye);try{let u=Yd(!1),l=o();return Yd(u),hy(n,me(),i,l),l}finally{hn(a)}}function yV(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function wn(t,e,n){let r=t+Tt,i=me(),o=vh(i,r);return fS(i,r)?dS(i,ru(),e,o.transform,n,o):o.transform(n)}function zt(t,e,n,r){let i=t+Tt,o=me(),s=vh(o,i);return fS(o,i)?hS(o,ru(),e,s.transform,n,r,s):s.transform(n,r)}function fS(t,e){return t[pe].data[e].pure}var Xr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},pS=new Xr("18.2.13");var Rh=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var mS=new Q("");function Wi(t){return!!t&&typeof t.then=="function"}function py(t){return!!t&&typeof t.subscribe=="function"}var Nh=new Q(""),gS=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=N(Nh,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Wi(o))n.push(o);else if(py(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ph=new Q("");function _V(){wb(()=>{throw new G(600,!1)})}function wV(t){return t.isBoundToModule}var IV=10;function EV(t,e,n){try{let r=n();return Wi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Wo=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=N(IO),this.afterRenderManager=N(GT),this.zonelessEnabled=N(Sh),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new lt,this.afterTick=new lt,this.componentTypes=[],this.components=[],this.isStable=N($o).hasPendingTasks.pipe(q(n=>!n)),this._injector=N(Tn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof rh;if(!this._injector.get(gS).done){let g=!i&&tD(n),v=!1;throw new G(405,v)}let s;i?s=n:s=this._injector.get(aa).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=wV(s)?void 0:this._injector.get(Bi),u=r||s.selector,l=s.create(mt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(mS,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Vd(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new G(101,!1);let n=_e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,_e(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(ca,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<IV;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)bV(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>yh(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Vd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Ph,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Vd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new G(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Vd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function bV(t,e,n,r){if(!n&&!yh(t))return;VT(t,e,n&&!r?0:1)}var Cv=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},kh=(()=>{class t{compileModuleSync(n){return new lv(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=nD(n),o=sT(i.declarations).reduce((s,a)=>{let u=Ui(a);return u&&s.push(new ua(u)),s},[]);return new Cv(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var CV=(()=>{class t{constructor(){this.zone=N(je),this.changeDetectionScheduler=N(sa),this.applicationRef=N(Wo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),DV=new Q("",{factory:()=>!1});function vS({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new je(ae(L({},_S()),{scheduleInRootZone:n})),[{provide:je,useFactory:t},{provide:Qs,multi:!0,useFactory:()=>{let r=N(CV,{optional:!0});return()=>r.initialize()}},{provide:Qs,multi:!0,useFactory:()=>{let r=N(TV);return()=>{r.initialize()}}},e===!0?{provide:$T,useValue:!0}:[],{provide:HT,useValue:n??GD}]}function yS(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=vS({ngZoneFactory:()=>{let i=_S(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Sr("NgZone_CoalesceEvent"),new je(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Ir([{provide:DV,useValue:!0},{provide:Sh,useValue:!1},r])}function _S(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var TV=(()=>{class t{constructor(){this.subscription=new rt,this.initialized=!1,this.zone=N(je),this.pendingTasks=N($o)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{je.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{je.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var SV=(()=>{class t{constructor(){this.appRef=N(Wo),this.taskService=N($o),this.ngZone=N(je),this.zonelessEnabled=N(Sh),this.disableScheduling=N($T,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new rt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Xd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(HT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Zg||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?dC:KD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Xd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,dC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function AV(){return typeof $localize<"u"&&$localize.locale||lh}var Oh=new Q("",{providedIn:"root",factory:()=>N(Oh,we.Optional|we.SkipSelf)||AV()});var Dv=new Q("");function Pd(t){return!t.moduleRef}function MV(t){let e=Pd(t)?t.r3Injector:t.moduleRef.injector,n=e.get(je);return n.run(()=>{Pd(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(rr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Pd(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Dv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Dv);s.add(o),t.moduleRef.onDestroy(()=>{Vd(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return EV(r,n,()=>{let o=e.get(gS);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Oh,lh);if(aV(s||lh),Pd(t)){let a=e.get(Wo);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return xV(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function xV(t,e){let n=t.injector.get(Wo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new G(-403,!1);e.push(t)}var Ud=null;function RV(t=[],e){return mt.create({name:e,providers:[{provide:ph,useValue:"platform"},{provide:Dv,useValue:new Set([()=>Ud=null])},...t]})}function NV(t=[]){if(Ud)return Ud;let e=RV(t);return Ud=e,_V(),PV(e),e}function PV(t){t.get(Yv,null)?.forEach(n=>n())}var ii=(()=>{class t{static{this.__NG_ELEMENT_ID__=kV}}return t})();function kV(t){return OV(gn(),me(),(t&16)===16)}function OV(t,e,n){if(gh(t)&&!n){let r=Hi(t.index,e);return new ia(r,r)}else if(t.type&175){let r=e[Sn];return new ia(r,e)}return null}function wS(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=NV(r),o=[vS({}),{provide:sa,useExisting:SV},...n||[]],s=new oh({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return MV({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function oi(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Bn(t,e){Sr("NgSignals");let n=vb(t);return e?.equal&&(n[Jn].equal=e.equal),n}function In(t){let e=_e(null);try{return t()}finally{_e(e)}}var FV=new Q("",{providedIn:"root",factory:()=>N(LV)}),LV=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new Tv})}}return t})(),Tv=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=N($o),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},Sv=class{constructor(e,n,r,i,o,s){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=o,this.watcher=bb(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(rr,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function my(t,e){Sr("NgSignals"),!e?.injector&&ha(my);let n=e?.injector??N(mt),r=e?.manualCleanup!==!0?n.get(Cr):null,i=new Sv(n.get(FV),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),o=n.get(ii,null,{optional:!0});return!o||!(o._lView[oe]&8)?i.watcher.notify():(o._lView[Od]??=[]).push(i.watcher.notify),i}function IS(t){let e=Ui(t);if(!e)return null;let n=new ua(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var TS=null;function ui(){return TS}function SS(t){TS??=t}var qh=class{};var En=new Q(""),Cy=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>N(VV),providedIn:"platform"})}}return t})(),AS=new Q(""),VV=(()=>{class t extends Cy{constructor(){super(),this._doc=N(En),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ui().getBaseHref(this._doc)}onPopState(n){let r=ui().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=ui().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function Dy(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function ES(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function ai(t){return t&&t[0]!=="?"?"?"+t:t}var li=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>N(Ty),providedIn:"root"})}}return t})(),MS=new Q(""),Ty=(()=>{class t extends li{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(En).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Dy(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ai(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ai(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ai(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(ce(Cy),ce(MS,8))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),xS=(()=>{class t extends li{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Dy(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ai(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ai(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(ce(Cy),ce(MS,8))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),wa=(()=>{class t{constructor(n){this._subject=new pt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=BV(ES(bS(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ai(r))}normalize(n){return t.stripTrailingSlash(jV(this._basePath,bS(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ai(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ai(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=ai}static{this.joinWithSlash=Dy}static{this.stripTrailingSlash=ES}static{this.\u0275fac=function(r){return new(r||t)(ce(li))}}static{this.\u0275prov=H({token:t,factory:()=>UV(),providedIn:"root"})}}return t})();function UV(){return new wa(ce(li))}function jV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function bS(t){return t.replace(/\/index.html$/,"")}function BV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var cn=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(cn||{}),Ge=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ge||{}),xn=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(xn||{}),Gi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function $V(t){return Un(t)[ut.LocaleId]}function HV(t,e,n){let r=Un(t),i=[r[ut.DayPeriodsFormat],r[ut.DayPeriodsStandalone]],o=$n(i,e);return $n(o,n)}function qV(t,e,n){let r=Un(t),i=[r[ut.DaysFormat],r[ut.DaysStandalone]],o=$n(i,e);return $n(o,n)}function zV(t,e,n){let r=Un(t),i=[r[ut.MonthsFormat],r[ut.MonthsStandalone]],o=$n(i,e);return $n(o,n)}function WV(t,e){let r=Un(t)[ut.Eras];return $n(r,e)}function Fh(t,e){let n=Un(t);return $n(n[ut.DateFormat],e)}function Lh(t,e){let n=Un(t);return $n(n[ut.TimeFormat],e)}function Vh(t,e){let r=Un(t)[ut.DateTimeFormat];return $n(r,e)}function Gh(t,e){let n=Un(t),r=n[ut.NumberSymbols][e];if(typeof r>"u"){if(e===Gi.CurrencyDecimal)return n[ut.NumberSymbols][Gi.Decimal];if(e===Gi.CurrencyGroup)return n[ut.NumberSymbols][Gi.Group]}return r}function RS(t){if(!t[ut.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ut.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function GV(t){let e=Un(t);return RS(e),(e[ut.ExtraData][2]||[]).map(r=>typeof r=="string"?gy(r):[gy(r[0]),gy(r[1])])}function KV(t,e,n){let r=Un(t);RS(r);let i=[r[ut.ExtraData][0],r[ut.ExtraData][1]],o=$n(i,e)||[];return $n(o,n)||[]}function $n(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function gy(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var QV=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Uh={},YV=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ci=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(ci||{}),Ve=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Ve||{}),Le=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Le||{});function ZV(t,e,n,r){let i=s2(t);e=si(n,e)||e;let s=[],a;for(;e;)if(a=YV.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=PS(r,u),i=o2(i,r,!0));let l="";return s.forEach(h=>{let p=r2(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function zh(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function si(t,e){let n=$V(t);if(Uh[n]??={},Uh[n][e])return Uh[n][e];let r="";switch(e){case"shortDate":r=Fh(t,xn.Short);break;case"mediumDate":r=Fh(t,xn.Medium);break;case"longDate":r=Fh(t,xn.Long);break;case"fullDate":r=Fh(t,xn.Full);break;case"shortTime":r=Lh(t,xn.Short);break;case"mediumTime":r=Lh(t,xn.Medium);break;case"longTime":r=Lh(t,xn.Long);break;case"fullTime":r=Lh(t,xn.Full);break;case"short":let i=si(t,"shortTime"),o=si(t,"shortDate");r=jh(Vh(t,xn.Short),[i,o]);break;case"medium":let s=si(t,"mediumTime"),a=si(t,"mediumDate");r=jh(Vh(t,xn.Medium),[s,a]);break;case"long":let u=si(t,"longTime"),l=si(t,"longDate");r=jh(Vh(t,xn.Long),[u,l]);break;case"full":let h=si(t,"fullTime"),p=si(t,"fullDate");r=jh(Vh(t,xn.Full),[h,p]);break}return r&&(Uh[n][e]=r),r}function jh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function cr(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function JV(t,e){return cr(t,3).substring(0,e)}function _t(t,e,n=0,r=!1,i=!1){return function(o,s){let a=XV(t,o);if((n>0||a>-n)&&(a+=n),t===Ve.Hours)a===0&&n===-12&&(a=12);else if(t===Ve.FractionalSeconds)return JV(a,e);let u=Gh(s,Gi.MinusSign);return cr(a,e,u,r,i)}}function XV(t,e){switch(t){case Ve.FullYear:return e.getFullYear();case Ve.Month:return e.getMonth();case Ve.Date:return e.getDate();case Ve.Hours:return e.getHours();case Ve.Minutes:return e.getMinutes();case Ve.Seconds:return e.getSeconds();case Ve.FractionalSeconds:return e.getMilliseconds();case Ve.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Ke(t,e,n=cn.Format,r=!1){return function(i,o){return e2(i,o,t,e,n,r)}}function e2(t,e,n,r,i,o){switch(n){case Le.Months:return zV(e,i,r)[t.getMonth()];case Le.Days:return qV(e,i,r)[t.getDay()];case Le.DayPeriods:let s=t.getHours(),a=t.getMinutes();if(o){let l=GV(e),h=KV(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[v,S]=g,O=s>=v.hours&&a>=v.minutes,k=s<S.hours||s===S.hours&&a<S.minutes;if(v.hours<S.hours){if(O&&k)return!0}else if(O||k)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return HV(e,i,r)[s<12?0:1];case Le.Eras:return WV(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function Bh(t){return function(e,n,r){let i=-1*r,o=Gh(n,Gi.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case ci.Short:return(i>=0?"+":"")+cr(s,2,o)+cr(Math.abs(i%60),2,o);case ci.ShortGMT:return"GMT"+(i>=0?"+":"")+cr(s,1,o);case ci.Long:return"GMT"+(i>=0?"+":"")+cr(s,2,o)+":"+cr(Math.abs(i%60),2,o);case ci.Extended:return r===0?"Z":(i>=0?"+":"")+cr(s,2,o)+":"+cr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var t2=0,Hh=4;function n2(t){let e=zh(t,t2,1).getDay();return zh(t,0,1+(e<=Hh?Hh:Hh+7)-e)}function NS(t){let e=t.getDay(),n=e===0?-3:Hh-e;return zh(t.getFullYear(),t.getMonth(),t.getDate()+n)}function vy(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=NS(n),s=n2(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return cr(i,t,Gh(r,Gi.MinusSign))}}function $h(t,e=!1){return function(n,r){let o=NS(n).getFullYear();return cr(o,t,Gh(r,Gi.MinusSign),e)}}var yy={};function r2(t){if(yy[t])return yy[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ke(Le.Eras,Ge.Abbreviated);break;case"GGGG":e=Ke(Le.Eras,Ge.Wide);break;case"GGGGG":e=Ke(Le.Eras,Ge.Narrow);break;case"y":e=_t(Ve.FullYear,1,0,!1,!0);break;case"yy":e=_t(Ve.FullYear,2,0,!0,!0);break;case"yyy":e=_t(Ve.FullYear,3,0,!1,!0);break;case"yyyy":e=_t(Ve.FullYear,4,0,!1,!0);break;case"Y":e=$h(1);break;case"YY":e=$h(2,!0);break;case"YYY":e=$h(3);break;case"YYYY":e=$h(4);break;case"M":case"L":e=_t(Ve.Month,1,1);break;case"MM":case"LL":e=_t(Ve.Month,2,1);break;case"MMM":e=Ke(Le.Months,Ge.Abbreviated);break;case"MMMM":e=Ke(Le.Months,Ge.Wide);break;case"MMMMM":e=Ke(Le.Months,Ge.Narrow);break;case"LLL":e=Ke(Le.Months,Ge.Abbreviated,cn.Standalone);break;case"LLLL":e=Ke(Le.Months,Ge.Wide,cn.Standalone);break;case"LLLLL":e=Ke(Le.Months,Ge.Narrow,cn.Standalone);break;case"w":e=vy(1);break;case"ww":e=vy(2);break;case"W":e=vy(1,!0);break;case"d":e=_t(Ve.Date,1);break;case"dd":e=_t(Ve.Date,2);break;case"c":case"cc":e=_t(Ve.Day,1);break;case"ccc":e=Ke(Le.Days,Ge.Abbreviated,cn.Standalone);break;case"cccc":e=Ke(Le.Days,Ge.Wide,cn.Standalone);break;case"ccccc":e=Ke(Le.Days,Ge.Narrow,cn.Standalone);break;case"cccccc":e=Ke(Le.Days,Ge.Short,cn.Standalone);break;case"E":case"EE":case"EEE":e=Ke(Le.Days,Ge.Abbreviated);break;case"EEEE":e=Ke(Le.Days,Ge.Wide);break;case"EEEEE":e=Ke(Le.Days,Ge.Narrow);break;case"EEEEEE":e=Ke(Le.Days,Ge.Short);break;case"a":case"aa":case"aaa":e=Ke(Le.DayPeriods,Ge.Abbreviated);break;case"aaaa":e=Ke(Le.DayPeriods,Ge.Wide);break;case"aaaaa":e=Ke(Le.DayPeriods,Ge.Narrow);break;case"b":case"bb":case"bbb":e=Ke(Le.DayPeriods,Ge.Abbreviated,cn.Standalone,!0);break;case"bbbb":e=Ke(Le.DayPeriods,Ge.Wide,cn.Standalone,!0);break;case"bbbbb":e=Ke(Le.DayPeriods,Ge.Narrow,cn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ke(Le.DayPeriods,Ge.Abbreviated,cn.Format,!0);break;case"BBBB":e=Ke(Le.DayPeriods,Ge.Wide,cn.Format,!0);break;case"BBBBB":e=Ke(Le.DayPeriods,Ge.Narrow,cn.Format,!0);break;case"h":e=_t(Ve.Hours,1,-12);break;case"hh":e=_t(Ve.Hours,2,-12);break;case"H":e=_t(Ve.Hours,1);break;case"HH":e=_t(Ve.Hours,2);break;case"m":e=_t(Ve.Minutes,1);break;case"mm":e=_t(Ve.Minutes,2);break;case"s":e=_t(Ve.Seconds,1);break;case"ss":e=_t(Ve.Seconds,2);break;case"S":e=_t(Ve.FractionalSeconds,1);break;case"SS":e=_t(Ve.FractionalSeconds,2);break;case"SSS":e=_t(Ve.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Bh(ci.Short);break;case"ZZZZZ":e=Bh(ci.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Bh(ci.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Bh(ci.Long);break;default:return null}return yy[t]=e,e}function PS(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function i2(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function o2(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),o=PS(e,i);return i2(t,r*(o-i))}function s2(t){if(CS(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return zh(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(QV))return a2(r)}let e=new Date(t);if(!CS(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function a2(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function CS(t){return t instanceof Date&&!isNaN(t.valueOf())}function kS(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var _y=/\s+/,DS=[],Mr=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=DS,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(_y):DS}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(_y):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(_y).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(ye(or),ye(Tr))}}static{this.\u0275dir=Ye({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();function OS(t,e){return new G(2100,!1)}var wy=class{createSubscription(e,n){return In(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){In(()=>e.unsubscribe())}},Iy=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},c2=new Iy,u2=new wy,Ki=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(Wi(n))return c2;if(py(n))return u2;throw OS(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||t)(ye(ii,16))}}static{this.\u0275pipe=Nv({name:"async",type:t,pure:!1,standalone:!0})}}return t})();var l2="mediumDate",d2=new Q(""),h2=new Q(""),Hn=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??l2,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return ZV(n,s,o||this.locale,a)}catch(s){throw OS(t,s.message)}}static{this.\u0275fac=function(r){return new(r||t)(ye(Oh,16),ye(d2,24),ye(h2,24))}}static{this.\u0275pipe=Nv({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var Sy="browser",f2="server";function p2(t){return t===Sy}function Ay(t){return t===f2}var FS=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>p2(N(Dr))?new Ey(N(En),window):new by})}}return t})(),Ey=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=m2(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function m2(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var by=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Wh=class{};var Ry=class extends qh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ny=class t extends Ry{static makeCurrent(){SS(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=v2();return n==null?null:y2(n)}resetBaseElement(){ou=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kS(document.cookie,e)}},ou=null;function v2(){return ou=ou||document.querySelector("base"),ou?ou.getAttribute("href"):null}function y2(t){return new URL(t,document.baseURI).pathname}var _2=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Py=new Q(""),jS=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(ce(Py),ce(je))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Kh=class{constructor(e){this._doc=e}},My="ng-app-id",BS=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ay(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${My}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(My),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(My,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(ce(En),ce(Qv),ce(Zv,8),ce(Dr))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),xy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Oy=/%COMP%/g,$S="%COMP%",w2=`_nghost-${$S}`,I2=`_ngcontent-${$S}`,E2=!0,b2=new Q("",{providedIn:"root",factory:()=>E2});function C2(t){return I2.replace(Oy,t)}function D2(t){return w2.replace(Oy,t)}function HS(t,e){return e.map(n=>n.replace(Oy,t))}var LS=(()=>{class t{constructor(n,r,i,o,s,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ay(a),this.defaultRenderer=new su(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===yr.ShadowDom&&(r=ae(L({},r),{encapsulation:yr.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Qh?i.applyToHost(n):i instanceof au&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case yr.Emulated:o=new Qh(u,l,r,this.appId,h,s,a,p);break;case yr.ShadowDom:return new ky(u,l,n,r,s,a,this.nonce,p);default:o=new au(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(ce(jS),ce(BS),ce(Qv),ce(b2),ce(En),ce(Dr),ce(je),ce(Zv))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),su=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(xy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(VS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(VS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=xy[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=xy[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Jr.DashCase|Jr.Important)?e.style.setProperty(n,r,i&Jr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Jr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ui().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function VS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ky=class extends su{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=HS(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},au=class extends su{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?HS(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Qh=class extends au{constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=C2(l),this.hostAttr=D2(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},T2=(()=>{class t extends Kh{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(ce(En))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),US=["alt","control","meta","shift"],S2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},A2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},M2=(()=>{class t extends Kh{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ui().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),US.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=S2[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),US.forEach(s=>{if(s!==i){let a=A2[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(ce(En))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function qS(t,e){return wS(L({rootComponent:t},x2(e)))}function x2(t){return{appProviders:[...O2,...t?.providers??[]],platformProviders:k2}}function R2(){Ny.makeCurrent()}function N2(){return new rr}function P2(){return tT(document),document}var k2=[{provide:Dr,useValue:Sy},{provide:Yv,useValue:R2,multi:!0},{provide:En,useFactory:P2,deps:[]}];var O2=[{provide:ph,useValue:"root"},{provide:rr,useFactory:N2,deps:[]},{provide:Py,useClass:T2,multi:!0,deps:[En,je,Dr]},{provide:Py,useClass:M2,multi:!0,deps:[En]},LS,BS,jS,{provide:ca,useExisting:LS},{provide:Wh,useClass:_2,deps:[]},[]];var zS=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(ce(En))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ge="primary",Eu=Symbol("RouteTitle"),jy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ta(t){return new jy(t)}function L2(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function V2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!xr(t[n],e[n]))return!1;return!0}function xr(t,e){let n=t?By(t):void 0,r=e?By(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!nA(t[i],e[i]))return!1;return!0}function By(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function nA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function rA(t){return t.length>0?t[t.length-1]:null}function Yi(t){return hg(t)?t:Wi(t)?Pe(Promise.resolve(t)):U(t)}var U2={exact:oA,subset:sA},iA={exact:j2,subset:B2,ignored:()=>!0};function WS(t,e,n){return U2[n.paths](t.root,e.root,n.matrixParams)&&iA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function j2(t,e){return xr(t,e)}function oA(t,e,n){if(!Ko(t.segments,e.segments)||!Jh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!oA(t.children[r],e.children[r],n))return!1;return!0}function B2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>nA(t[n],e[n]))}function sA(t,e,n){return aA(t,e,e.segments,n)}function aA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ko(i,n)||e.hasChildren()||!Jh(i,n,r))}else if(t.segments.length===n.length){if(!Ko(t.segments,n)||!Jh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!sA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ko(t.segments,i)||!Jh(t.segments,i,r)||!t.children[ge]?!1:aA(t.children[ge],e,o,r)}}function Jh(t,e,n){return e.every((r,i)=>iA[n](t[i].parameters,r.parameters))}var hi=class{constructor(e=new Be([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ta(this.queryParams),this._queryParamMap}toString(){return q2.serialize(this)}},Be=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xh(this)}},Go=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ta(this.parameters),this._parameterMap}toString(){return uA(this)}};function $2(t,e){return Ko(t,e)&&t.every((n,r)=>xr(n.parameters,e[r].parameters))}function Ko(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function H2(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ge&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ge&&(n=n.concat(e(i,r)))}),n}var bu=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new Sa,providedIn:"root"})}}return t})(),Sa=class{parse(e){let n=new Hy(e);return new hi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${cu(e.root,!0)}`,r=G2(e.queryParams),i=typeof e.fragment=="string"?`#${z2(e.fragment)}`:"";return`${n}${r}${i}`}},q2=new Sa;function Xh(t){return t.segments.map(e=>uA(e)).join("/")}function cu(t,e){if(!t.hasChildren())return Xh(t);if(e){let n=t.children[ge]?cu(t.children[ge],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ge&&r.push(`${i}:${cu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=H2(t,(r,i)=>i===ge?[cu(t.children[ge],!1)]:[`${i}:${cu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ge]!=null?`${Xh(t)}/${n[0]}`:`${Xh(t)}/(${n.join("//")})`}}function cA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yh(t){return cA(t).replace(/%3B/gi,";")}function z2(t){return encodeURI(t)}function $y(t){return cA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ef(t){return decodeURIComponent(t)}function GS(t){return ef(t.replace(/\+/g,"%20"))}function uA(t){return`${$y(t.path)}${W2(t.parameters)}`}function W2(t){return Object.entries(t).map(([e,n])=>`;${$y(e)}=${$y(n)}`).join("")}function G2(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Yh(n)}=${Yh(i)}`).join("&"):`${Yh(n)}=${Yh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var K2=/^[^\/()?;#]+/;function Fy(t){let e=t.match(K2);return e?e[0]:""}var Q2=/^[^\/()?;=#]+/;function Y2(t){let e=t.match(Q2);return e?e[0]:""}var Z2=/^[^=?&#]+/;function J2(t){let e=t.match(Z2);return e?e[0]:""}var X2=/^[^&#]+/;function eU(t){let e=t.match(X2);return e?e[0]:""}var Hy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Be([],{}):new Be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ge]=new Be(e,n)),r}parseSegment(){let e=Fy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new Go(ef(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Y2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Fy(this.remaining);i&&(r=i,this.capture(r))}e[ef(n)]=ef(r)}parseQueryParam(e){let n=J2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=eU(this.remaining);s&&(r=s,this.capture(r))}let i=GS(n),o=GS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Fy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ge);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ge]:new Be([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function lA(t){return t.segments.length>0?new Be([],{[ge]:t}):t}function dA(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=dA(i);if(r===ge&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Be(t.segments,e);return tU(n)}function tU(t){if(t.numberOfChildren===1&&t.children[ge]){let e=t.children[ge];return new Be(t.segments.concat(e.segments),e.children)}return t}function Qo(t){return t instanceof hi}function nU(t,e,n=null,r=null){let i=hA(t);return fA(i,e,n,r)}function hA(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Be(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=lA(r);return e??i}function fA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Ly(i,i,i,n,r);let o=rU(e);if(o.toRoot())return Ly(i,i,new Be([],{}),n,r);let s=iU(o,i,t),a=s.processChildren?du(s.segmentGroup,s.index,o.commands):mA(s.segmentGroup,s.index,o.commands);return Ly(i,s.segmentGroup,a,n,r)}function tf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function pu(t){return typeof t=="object"&&t!=null&&t.outlets}function Ly(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=pA(t,e,n);let a=lA(dA(s));return new hi(a,o,i)}function pA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=pA(o,e,n)}),new Be(t.segments,r)}var nf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&tf(r[0]))throw new G(4003,!1);let i=r.find(pu);if(i&&i!==rA(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function rU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new nf(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new nf(n,e,r)}var ba=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function iU(t,e,n){if(t.isAbsolute)return new ba(e,!0,0);if(!n)return new ba(e,!1,NaN);if(n.parent===null)return new ba(n,!0,0);let r=tf(t.commands[0])?0:1,i=n.segments.length-1+r;return oU(n,i,t.numberOfDoubleDots)}function oU(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new ba(r,!1,i-o)}function sU(t){return pu(t[0])?t[0].outlets:{[ge]:t}}function mA(t,e,n){if(t??=new Be([],{}),t.segments.length===0&&t.hasChildren())return du(t,e,n);let r=aU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Be(t.segments.slice(0,r.pathIndex),{});return o.children[ge]=new Be(t.segments.slice(r.pathIndex),t.children),du(o,0,i)}else return r.match&&i.length===0?new Be(t.segments,{}):r.match&&!t.hasChildren()?qy(t,e,n):r.match?du(t,0,i):qy(t,e,n)}function du(t,e,n){if(n.length===0)return new Be(t.segments,{});{let r=sU(n),i={};if(Object.keys(r).some(o=>o!==ge)&&t.children[ge]&&t.numberOfChildren===1&&t.children[ge].segments.length===0){let o=du(t.children[ge],e,n);return new Be(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=mA(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Be(t.segments,i)}}function aU(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(pu(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!QS(u,l,s))return o;r+=2}else{if(!QS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function qy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(pu(o)){let u=cU(o.outlets);return new Be(r,u)}if(i===0&&tf(n[0])){let u=t.segments[e];r.push(new Go(u.path,KS(n[0]))),i++;continue}let s=pu(o)?o.outlets[ge]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&tf(a)?(r.push(new Go(s,KS(a))),i+=2):(r.push(new Go(s,{})),i++)}return new Be(r,{})}function cU(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=qy(new Be([],{}),0,r))}),e}function KS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function QS(t,e,n){return t==n.path&&xr(e,n.parameters)}var hu="imperative",Mt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Mt||{}),qn=class{constructor(e,n){this.id=e,this.url=n}},Aa=class extends qn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Mt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},zn=class extends qn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Mt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Nn||{}),rf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(rf||{}),di=class extends qn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Mt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qi=class extends qn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Mt.NavigationSkipped}},mu=class extends qn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Mt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},of=class extends qn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Mt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zy=class extends qn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Mt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wy=class extends qn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Mt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gy=class extends qn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Mt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ky=class extends qn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Mt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qy=class{constructor(e){this.route=e,this.type=Mt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Yy=class{constructor(e){this.route=e,this.type=Mt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zy=class{constructor(e){this.snapshot=e,this.type=Mt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jy=class{constructor(e){this.snapshot=e,this.type=Mt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xy=class{constructor(e){this.snapshot=e,this.type=Mt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},e_=class{constructor(e){this.snapshot=e,this.type=Mt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sf=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Mt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},gu=class{},Ma=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function uU(t,e){return t.providers&&!t._injector&&(t._injector=Mh(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ur(t){return t.outlet||ge}function lU(t,e){let n=t.filter(r=>ur(r)===e);return n.push(...t.filter(r=>ur(r)!==e)),n}function Cu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var t_=class{get injector(){return Cu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Du(this.rootInjector),this.attachRef=null}},Du=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new t_(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(ce(Tn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),af=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=n_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=n_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=r_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return r_(e,this._root).map(n=>n.value)}};function n_(t,e){if(t===e.value)return e;for(let n of e.children){let r=n_(t,n);if(r)return r}return null}function r_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=r_(t,n);if(r.length)return r.unshift(e),r}return[]}var Rn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ea(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var cf=class extends af{constructor(e,n){super(e),this.snapshot=n,h_(this,e)}toString(){return this.snapshot.toString()}};function gA(t){let e=dU(t),n=new ct([new Go("",{})]),r=new ct({}),i=new ct({}),o=new ct({}),s=new ct(""),a=new Rr(n,r,o,s,i,ge,t,e.root);return a.snapshot=e.root,new cf(new Rn(a,[]),e)}function dU(t){let e={},n={},r={},i="",o=new Ca([],e,r,i,n,ge,t,null,{});return new lf("",new Rn(o,[]))}var Rr=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(q(l=>l[Eu]))??U(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(q(e=>Ta(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(q(e=>Ta(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function uf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&yA(i)&&(r.resolve[Eu]=i.title),r}var Ca=class{get title(){return this.data?.[Eu]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ta(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ta(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},lf=class extends af{constructor(e,n){super(n),this.url=e,h_(this,n)}toString(){return vA(this._root)}};function h_(t,e){e.value._routerState=t,e.children.forEach(n=>h_(t,n))}function vA(t){let e=t.children.length>0?` { ${t.children.map(vA).join(", ")} } `:"";return`${t.value}${e}`}function Vy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,xr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),xr(e.params,n.params)||t.paramsSubject.next(n.params),V2(e.url,n.url)||t.urlSubject.next(n.url),xr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function i_(t,e){let n=xr(t.params,e.params)&&$2(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||i_(t.parent,e.parent))}function yA(t){return typeof t.title=="string"||t.title===null}var f_=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=ge,this.activateEvents=new pt,this.deactivateEvents=new pt,this.attachEvents=new pt,this.detachEvents=new pt,this.parentContexts=N(Du),this.location=N(Ah),this.changeDetector=N(ii),this.inputBinder=N(pf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new o_(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Ye({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$i]})}}return t})(),o_=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Rr?this.route:e===Du?this.childContexts:this.parent.get(e,n)}},pf=new Q(""),YS=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Ao([r.queryParams,r.params,r.data]).pipe(ke(([o,s,a],u)=>(a=L(L(L({},o),s),a),u===0?U(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=IS(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function hU(t,e,n){let r=vu(t,e._root,n?n._root:void 0);return new cf(r,e)}function vu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=fU(t,e,n);return new Rn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>vu(t,a)),s}}let r=pU(e.value),i=e.children.map(o=>vu(t,o));return new Rn(r,i)}}function fU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return vu(t,r,i);return vu(t,r)})}function pU(t){return new Rr(new ct(t.url),new ct(t.params),new ct(t.queryParams),new ct(t.fragment),new ct(t.data),t.outlet,t.component,t)}var yu=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},_A="ngNavigationCancelingError";function df(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Qo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wA(!1,Nn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function wA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[_A]=!0,n.cancellationCode=e,n}function mU(t){return IA(t)&&Qo(t.url)}function IA(t){return!!t&&t[_A]}var gU=(t,e,n,r)=>q(i=>(new s_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),s_=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Vy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ea(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ea(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ea(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ea(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new e_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Jy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Vy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Vy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},hf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Da=class{constructor(e,n){this.component=e,this.route=n}};function vU(t,e,n){let r=t._root,i=e?e._root:null;return uu(r,i,n,[r.value])}function yU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ra(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!VC(t)?t:e.get(t):r}function uu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ea(e);return t.children.forEach(s=>{_U(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>fu(a,n.getContext(s),i)),i}function _U(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=wU(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new hf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?uu(t,e,a?a.children:null,r,i):uu(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Da(a.outlet.component,s))}else s&&fu(e,a,i),i.canActivateChecks.push(new hf(r)),o.component?uu(t,null,a?a.children:null,r,i):uu(t,null,n,r,i);return i}function wU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ko(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ko(t.url,e.url)||!xr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!i_(t,e)||!xr(t.queryParams,e.queryParams);case"paramsChange":default:return!i_(t,e)}}function fu(t,e,n){let r=Ea(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?fu(s,e.children.getContext(o),n):fu(s,null,n):fu(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Da(e.outlet.component,i)):n.canDeactivateChecks.push(new Da(null,i)):n.canDeactivateChecks.push(new Da(null,i))}function Tu(t){return typeof t=="function"}function IU(t){return typeof t=="boolean"}function EU(t){return t&&Tu(t.canLoad)}function bU(t){return t&&Tu(t.canActivate)}function CU(t){return t&&Tu(t.canActivateChild)}function DU(t){return t&&Tu(t.canDeactivate)}function TU(t){return t&&Tu(t.canMatch)}function EA(t){return t instanceof Yr||t?.name==="EmptyError"}var Zh=Symbol("INITIAL_VALUE");function xa(){return ke(t=>Ao(t.map(e=>e.pipe(Zr(1),Mo(Zh)))).pipe(q(e=>{for(let n of e)if(n!==!0){if(n===Zh)return Zh;if(n===!1||SU(n))return n}return!0}),At(e=>e!==Zh),Zr(1)))}function SU(t){return Qo(t)||t instanceof yu}function AU(t,e){return ht(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?U(ae(L({},n),{guardsResult:!0})):MU(s,r,i,t).pipe(ht(a=>a&&IU(a)?xU(r,o,t,e):U(a)),q(a=>ae(L({},n),{guardsResult:a})))})}function MU(t,e,n,r){return Pe(t).pipe(ht(i=>OU(i.component,i.route,n,e,r)),mr(i=>i!==!0,!0))}function xU(t,e,n,r){return Pe(e).pipe(er(i=>Us(NU(i.route.parent,r),RU(i.route,r),kU(t,i.path,n),PU(t,i.route,n))),mr(i=>i!==!0,!0))}function RU(t,e){return t!==null&&e&&e(new Xy(t)),U(!0)}function NU(t,e){return t!==null&&e&&e(new Zy(t)),U(!0)}function PU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return U(!0);let i=r.map(o=>Cd(()=>{let s=Cu(e)??n,a=Ra(o,s),u=bU(a)?a.canActivate(e,t):Er(s,()=>a(e,t));return Yi(u).pipe(mr())}));return U(i).pipe(xa())}function kU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>yU(s)).filter(s=>s!==null).map(s=>Cd(()=>{let a=s.guards.map(u=>{let l=Cu(s.node)??n,h=Ra(u,l),p=CU(h)?h.canActivateChild(r,t):Er(l,()=>h(r,t));return Yi(p).pipe(mr())});return U(a).pipe(xa())}));return U(o).pipe(xa())}function OU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return U(!0);let s=o.map(a=>{let u=Cu(e)??i,l=Ra(a,u),h=DU(l)?l.canDeactivate(t,e,n,r):Er(u,()=>l(t,e,n,r));return Yi(h).pipe(mr())});return U(s).pipe(xa())}function FU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return U(!0);let o=i.map(s=>{let a=Ra(s,t),u=EU(a)?a.canLoad(e,n):Er(t,()=>a(e,n));return Yi(u)});return U(o).pipe(xa(),bA(r))}function bA(t){return id(Ue(e=>{if(typeof e!="boolean")throw df(t,e)}),q(e=>e===!0))}function LU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return U(!0);let o=i.map(s=>{let a=Ra(s,t),u=TU(a)?a.canMatch(e,n):Er(t,()=>a(e,n));return Yi(u)});return U(o).pipe(xa(),bA(r))}var _u=class{constructor(e){this.segmentGroup=e||null}},wu=class extends Error{constructor(e){super(),this.urlTree=e}};function Ia(t){return Ls(new _u(t))}function VU(t){return Ls(new G(4e3,!1))}function UU(t){return Ls(wA(!1,Nn.GuardRejected))}var a_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return U(r);if(i.numberOfChildren>1||!i.children[ge])return VU(`${e.redirectTo}`);i=i.children[ge]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,params:v,data:S,title:O}=i,k=Er(o,()=>a({params:v,data:S,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,title:O}));if(k instanceof hi)throw new wu(k);n=k}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new wu(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new hi(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Be(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},c_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jU(t,e,n,r,i){let o=CA(t,e,n);return o.matched?(r=uU(e,r),LU(r,e,n,i).pipe(q(s=>s===!0?o:L({},c_)))):U(o)}function CA(t,e,n){if(e.path==="**")return BU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},c_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||L2)(n,t,e);if(!i)return L({},c_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function BU(t){return{matched:!0,parameters:t.length>0?rA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ZS(t,e,n,r){return n.length>0&&qU(t,n,r)?{segmentGroup:new Be(e,HU(r,new Be(n,t.children))),slicedSegments:[]}:n.length===0&&zU(t,n,r)?{segmentGroup:new Be(t.segments,$U(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Be(t.segments,t.children),slicedSegments:n}}function $U(t,e,n,r){let i={};for(let o of n)if(mf(t,e,o)&&!r[ur(o)]){let s=new Be([],{});i[ur(o)]=s}return L(L({},r),i)}function HU(t,e){let n={};n[ge]=e;for(let r of t)if(r.path===""&&ur(r)!==ge){let i=new Be([],{});n[ur(r)]=i}return n}function qU(t,e,n){return n.some(r=>mf(t,e,r)&&ur(r)!==ge)}function zU(t,e,n){return n.some(r=>mf(t,e,r))}function mf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function WU(t,e,n){return e.length===0&&!t.children[n]}var u_=class{};function GU(t,e,n,r,i,o,s="emptyOnly"){return new l_(t,e,n,r,i,s,o).recognize()}var KU=31,l_=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new a_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){let e=ZS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(q(({children:n,rootSnapshot:r})=>{let i=new Rn(r,n),o=new lf("",i),s=nU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Ca([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ge,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ge,n).pipe(q(r=>({children:r,rootSnapshot:n})),ft(r=>{if(r instanceof wu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof _u?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(q(s=>s instanceof Rn?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Pe(o).pipe(er(s=>{let a=r.children[s],u=lU(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Ad((s,a)=>(s.push(...a),s)),ki(null),vg(),ht(s=>{if(s===null)return Ia(r);let a=DA(s);return QU(a),U(a)}))}processSegment(e,n,r,i,o,s,a){return Pe(n).pipe(er(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(ft(l=>{if(l instanceof _u)return U(null);throw l}))),mr(u=>!!u),ft(u=>{if(EA(u))return WU(r,i,o)?U(new u_):Ia(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return ur(r)!==s&&(s===ge||!mf(i,o,r))?Ia(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Ia(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=CA(n,i,o);if(!u)return Ia(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KU&&(this.allowRedirects=!1));let v=new Ca(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,JS(i),ur(i),i.component??i._loadedComponent??null,i,XS(i)),S=uf(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(S.params),v.data=Object.freeze(S.data);let O=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,O).pipe(ht(k=>this.processSegment(e,r,n,k.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=jU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ke(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ke(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:v}=u,S=new Ca(g,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,JS(r),ur(r),r.component??r._loadedComponent??null,r,XS(r)),O=uf(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(O.params),S.data=Object.freeze(O.data);let{segmentGroup:k,slicedSegments:B}=ZS(n,g,v,l);if(B.length===0&&k.hasChildren())return this.processChildren(h,l,k,S).pipe(q(te=>new Rn(S,te)));if(l.length===0&&B.length===0)return U(new Rn(S,[]));let Z=ur(r)===o;return this.processSegment(h,l,k,B,Z?ge:o,!0,S).pipe(q(te=>new Rn(S,te instanceof Rn?[te]:[])))}))):Ia(n)))}getChildConfig(e,n,r){return n.children?U({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?U({routes:n._loadedRoutes,injector:n._loadedInjector}):FU(e,n,r,this.urlSerializer).pipe(ht(i=>i?this.configLoader.loadChildren(e,n).pipe(Ue(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):UU(n))):U({routes:[],injector:e})}};function QU(t){t.sort((e,n)=>e.value.outlet===ge?-1:n.value.outlet===ge?1:e.value.outlet.localeCompare(n.value.outlet))}function YU(t){let e=t.value.routeConfig;return e&&e.path===""}function DA(t){let e=[],n=new Set;for(let r of t){if(!YU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=DA(r.children);e.push(new Rn(r.value,i))}return e.filter(r=>!n.has(r))}function JS(t){return t.data||{}}function XS(t){return t.resolve||{}}function ZU(t,e,n,r,i,o){return ht(s=>GU(t,e,n,r,s.extractedUrl,i,o).pipe(q(({state:a,tree:u})=>ae(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function JU(t,e){return ht(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return U(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of TA(u))s.add(l);let a=0;return Pe(s).pipe(er(u=>o.has(u)?XU(u,r,t,e):(u.data=uf(u,u.parent,t).resolve,U(void 0))),Ue(()=>a++),js(1),ht(u=>a===s.size?U(n):Dn))})}function TA(t){let e=t.children.map(n=>TA(n)).flat();return[t,...e]}function XU(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!yA(i)&&(o[Eu]=i.title),ej(o,t,e,r).pipe(q(s=>(t._resolvedData=s,t.data=uf(t,t.parent,n).resolve,null)))}function ej(t,e,n,r){let i=By(t);if(i.length===0)return U({});let o={};return Pe(i).pipe(ht(s=>tj(t[s],e,n,r).pipe(mr(),Ue(a=>{if(a instanceof yu)throw df(new Sa,a);o[s]=a}))),js(1),gg(o),ft(s=>EA(s)?Dn:Ls(s)))}function tj(t,e,n,r){let i=Cu(e)??r,o=Ra(t,i),s=o.resolve?o.resolve(e,n):Er(i,()=>o(e,n));return Yi(s)}function Uy(t){return ke(e=>{let n=t(e);return n?Pe(n).pipe(q(()=>e)):U(e)})}var SA=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ge);return r}getResolvedTitleForRoute(n){return n.data[Eu]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>N(nj),providedIn:"root"})}}return t})(),nj=(()=>{class t extends SA{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(ce(zS))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Su=new Q("",{providedIn:"root",factory:()=>({})}),rj=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=J({type:t,selectors:[["ng-component"]],standalone:!0,features:[X],decls:1,vars:0,template:function(r,i){r&1&&Y(0,"router-outlet")},dependencies:[f_],encapsulation:2})}}return t})();function p_(t){let e=t.children&&t.children.map(p_),n=e?ae(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ge&&(n.component=rj),n}var Iu=new Q(""),m_=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=N(kh)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return U(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Yi(n.loadComponent()).pipe(q(AA),Ue(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),qc(()=>{this.componentLoaders.delete(n)})),i=new Ns(r,()=>new lt).pipe(Rs());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return U({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=ij(r,this.compiler,n,this.onLoadEndListener).pipe(qc(()=>{this.childrenLoaders.delete(r)})),s=new Ns(o,()=>new lt).pipe(Rs());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ij(t,e,n,r){return Yi(t.loadChildren()).pipe(q(AA),ht(i=>i instanceof Xc||Array.isArray(i)?U(i):Pe(e.compileModuleAsync(i))),q(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Iu,[],{optional:!0,self:!0}).flat()),{routes:s.map(p_),injector:o}}))}function oj(t){return t&&typeof t=="object"&&"default"in t}function AA(t){return oj(t)?t.default:t}var g_=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>N(sj),providedIn:"root"})}}return t})(),sj=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),MA=new Q(""),xA=new Q("");function aj(t,e,n){let r=t.get(xA),i=t.get(En);return t.get(je).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),cj(t))),{onViewTransitionCreated:u}=r;return u&&Er(t,()=>u({transition:a,from:e,to:n})),s})}function cj(t){return new Promise(e=>{dy({read:()=>setTimeout(e)},{injector:t})})}var uj=new Q(""),v_=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new lt,this.transitionAbortSubject=new lt,this.configLoader=N(m_),this.environmentInjector=N(Tn),this.urlSerializer=N(bu),this.rootContexts=N(Du),this.location=N(wa),this.inputBindingEnabled=N(pf,{optional:!0})!==null,this.titleStrategy=N(SA),this.options=N(Su,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=N(g_),this.createViewTransition=N(MA,{optional:!0}),this.navigationErrorHandler=N(uj,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>U(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Qy(i)),r=i=>this.events.next(new Yy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ae(L(L({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new ct({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:hu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(At(o=>o.id!==0),q(o=>ae(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ke(o=>{let s=!1,a=!1;return U(o).pipe(ke(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Nn.SupersededByNewNavigation),Dn;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ae(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Qi(u.id,this.urlSerializer.serialize(u.rawUrl),p,rf.IgnoredSameUrlNavigation)),u.resolve(!1),Dn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return U(u).pipe(ke(p=>{let g=this.transitions?.getValue();return this.events.next(new Aa(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),g!==this.transitions?.getValue()?Dn:Promise.resolve(p)}),ZU(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ue(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ae(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let g=new of(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:g,source:v,restoredState:S,extras:O}=u,k=new Aa(p,this.urlSerializer.serialize(g),v,S);this.events.next(k);let B=gA(this.rootComponentType).snapshot;return this.currentTransition=o=ae(L({},u),{targetSnapshot:B,urlAfterRedirects:g,extras:ae(L({},O),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,U(o)}else{let p="";return this.events.next(new Qi(u.id,this.urlSerializer.serialize(u.extractedUrl),p,rf.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Dn}}),Ue(u=>{let l=new zy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),q(u=>(this.currentTransition=o=ae(L({},u),{guards:vU(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),AU(this.environmentInjector,u=>this.events.next(u)),Ue(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw df(this.urlSerializer,u.guardsResult);let l=new Wy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),At(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Nn.GuardRejected),!1)),Uy(u=>{if(u.guards.canActivateChecks.length)return U(u).pipe(Ue(l=>{let h=new Gy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ke(l=>{let h=!1;return U(l).pipe(JU(this.paramsInheritanceStrategy,this.environmentInjector),Ue({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Nn.NoDataFromResolver)}}))}),Ue(l=>{let h=new Ky(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Uy(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ue(g=>{h.component=g}),q(()=>{})));for(let g of h.children)p.push(...l(g));return p};return Ao(l(u.targetSnapshot.root)).pipe(ki(null),Zr(1))}),Uy(()=>this.afterPreactivation()),ke(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Pe(h).pipe(q(()=>o)):U(o)}),q(u=>{let l=hU(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ae(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ue(()=>{this.events.next(new gu)}),gU(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Zr(1),Ue({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new zn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),zc(this.transitionAbortSubject.pipe(Ue(u=>{throw u}))),qc(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Nn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ft(u=>{if(a=!0,IA(u))this.events.next(new di(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),mU(u)?this.events.next(new Ma(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new mu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Er(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof yu){let{message:p,cancellationCode:g}=df(this.urlSerializer,h);this.events.next(new di(o.id,this.urlSerializer.serialize(o.extractedUrl),p,g)),this.events.next(new Ma(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=n.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Dn}))}))}cancelNavigationTransition(n,r,i){let o=new di(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function lj(t){return t!==hu}var dj=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>N(hj),providedIn:"root"})}}return t})(),d_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},hj=(()=>{class t extends d_{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),RA=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>N(fj),providedIn:"root"})}}return t})(),fj=(()=>{class t extends RA{constructor(){super(...arguments),this.location=N(wa),this.urlSerializer=N(bu),this.options=N(Su,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=N(g_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=gA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Aa)this.stateMemento=this.createStateMemento();else if(n instanceof Qi)this.rawUrlTree=r.initialUrl;else if(n instanceof of){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof gu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof di&&(n.code===Nn.GuardRejected||n.code===Nn.NoDataFromResolver)?this.restoreHistory(r):n instanceof mu?this.restoreHistory(r,!0):n instanceof zn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof hi?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=L(L({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),lu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(lu||{});function NA(t,e){t.events.pipe(At(n=>n instanceof zn||n instanceof di||n instanceof mu||n instanceof Qi),q(n=>n instanceof zn||n instanceof Qi?lu.COMPLETE:(n instanceof di?n.code===Nn.Redirect||n.code===Nn.SupersededByNewNavigation:!1)?lu.REDIRECTING:lu.FAILED),At(n=>n!==lu.REDIRECTING),Zr(1)).subscribe(()=>{e()})}function pj(t){throw t}var mj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ot=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=N(Rh),this.stateManager=N(RA),this.options=N(Su,{optional:!0})||{},this.pendingTasks=N($o),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=N(v_),this.urlSerializer=N(bu),this.location=N(wa),this.urlHandlingStrategy=N(g_),this._events=new lt,this.errorHandler=this.options.errorHandler||pj,this.navigated=!1,this.routeReuseStrategy=N(dj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=N(Iu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!N(pf,{optional:!0}),this.eventsSubscription=new rt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof di&&r.code!==Nn.Redirect&&r.code!==Nn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof zn)this.navigated=!0;else if(r instanceof Ma){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||lj(i.source)},s);this.scheduleNavigation(a,hu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}yj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),hu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(p_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=hA(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return fA(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Qo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,hu,null,r)}navigate(n,r={skipLocationChange:!1}){return vj(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=L({},mj):r===!1?i=L({},gj):i=r,Qo(n))return WS(this.currentUrlTree,n,i);let o=this.parseUrl(n);return WS(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return NA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function vj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new G(4008,!1)}function yj(t){return!(t instanceof gu)&&!(t instanceof Ma)}var bn=(()=>{class t{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new lt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof zn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Qo(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:iT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Qo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||t)(ye(Ot),ye(Rr),zv("tabindex"),ye(Tr),ye(or),ye(li))}}static{this.\u0275dir=Ye({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&qo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",oi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",oi],replaceUrl:[2,"replaceUrl","replaceUrl",oi],routerLink:"routerLink"},standalone:!0,features:[uy,$i]})}}return t})();var ff=class{};var _j=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(At(n=>n instanceof zn),er(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Mh(o.providers,n,`Route: ${o.path}`));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Pe(i).pipe(Vs())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=U(null);let o=i.pipe(ht(s=>s===null?U(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Pe([o,s]).pipe(Vs())}else return o})}static{this.\u0275fac=function(r){return new(r||t)(ce(Ot),ce(kh),ce(Tn),ce(ff),ce(m_))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),PA=new Q(""),wj=(()=>{class t{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Aa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof zn?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Qi&&n.code===rf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof sf&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new sf(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){_T()}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function kA(t,...e){return Ir([{provide:Iu,multi:!0,useValue:t},[],{provide:Rr,useFactory:OA,deps:[Ot]},{provide:Ph,multi:!0,useFactory:FA},e.map(n=>n.\u0275providers)])}function OA(t){return t.routerState.root}function Au(t,e){return{\u0275kind:t,\u0275providers:e}}function FA(){let t=N(mt);return e=>{let n=t.get(Wo);if(e!==n.components[0])return;let r=t.get(Ot),i=t.get(LA);t.get(y_)===1&&r.initialNavigation(),t.get(VA,null,we.Optional)?.setUpPreloading(),t.get(PA,null,we.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var LA=new Q("",{factory:()=>new lt}),y_=new Q("",{providedIn:"root",factory:()=>1});function Ij(){return Au(2,[{provide:y_,useValue:0},{provide:Nh,multi:!0,deps:[mt],useFactory:e=>{let n=e.get(AS,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Ot),o=e.get(LA);NA(i,()=>{r(!0)}),e.get(v_).afterPreactivation=()=>(r(!0),o.closed?U(void 0):o),i.initialNavigation()}))}}])}function Ej(){return Au(3,[{provide:Nh,multi:!0,useFactory:()=>{let e=N(Ot);return()=>{e.setUpLocationChangeListener()}}},{provide:y_,useValue:2}])}var VA=new Q("");function bj(t){return Au(0,[{provide:VA,useExisting:_j},{provide:ff,useExisting:t}])}function __(){return Au(8,[YS,{provide:pf,useExisting:YS}])}function Cj(t){let e=[{provide:MA,useValue:aj},{provide:xA,useValue:L({skipNextTransition:!!t?.skipInitialTransition},t)}];return Au(9,e)}var eA=new Q("ROUTER_FORROOT_GUARD"),Dj=[wa,{provide:bu,useClass:Sa},Ot,Du,{provide:Rr,useFactory:OA,deps:[Ot]},m_,[]],xt=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[Dj,[],{provide:Iu,multi:!0,useValue:n},{provide:eA,useFactory:Mj,deps:[[Ot,new rn,new zC]]},{provide:Su,useValue:r||{}},r?.useHash?Sj():Aj(),Tj(),r?.preloadingStrategy?bj(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?xj(r):[],r?.bindToComponentInputs?__().\u0275providers:[],r?.enableViewTransitions?Cj().\u0275providers:[],Rj()]}}static forChild(n){return{ngModule:t,providers:[{provide:Iu,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(ce(eA,8))}}static{this.\u0275mod=Bo({type:t})}static{this.\u0275inj=jo({})}}return t})();function Tj(){return{provide:PA,useFactory:()=>{let t=N(FS),e=N(je),n=N(Su),r=N(v_),i=N(bu);return n.scrollOffset&&t.setOffset(n.scrollOffset),new wj(i,r,t,e,n)}}}function Sj(){return{provide:li,useClass:xS}}function Aj(){return{provide:li,useClass:Ty}}function Mj(t){return"guarded"}function xj(t){return[t.initialNavigation==="disabled"?Ej().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Ij().\u0275providers:[]]}var tA=new Q("");function Rj(){return[{provide:tA,useFactory:FA},{provide:Ph,multi:!0,useExisting:tA}]}var jA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Nj=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},BA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,v=l&63;u||(v=64,s||(g=64)),r.push(n[h],n[p],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Nj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new I_;let g=o<<2|a>>4;if(r.push(g),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},I_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Pj=function(t){let e=jA(t);return BA.encodeByteArray(e,!0)},Mu=function(t){return Pj(t).replace(/\./g,"")},b_=function(t){try{return BA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Oj=()=>kj().__FIREBASE_DEFAULTS__,Fj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Lj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&b_(t[1]);return e&&JSON.parse(e)},vf=()=>{try{return Oj()||Fj()||Lj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},C_=t=>{var e,n;return(n=(e=vf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$A=t=>{let e=C_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},D_=()=>{var t;return(t=vf())===null||t===void 0?void 0:t.config},T_=t=>{var e;return(e=vf())===null||e===void 0?void 0:e[`_${t}`]};var gf=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function HA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Mu(JSON.stringify(n)),Mu(JSON.stringify(s)),""].join(".")}function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function Vj(){var t;let e=(t=vf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KA(){let t=Rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QA(){return!Vj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S_(){try{return typeof indexedDB=="object"}catch{return!1}}function YA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var Uj="FirebaseError",Pn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Uj,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fi.prototype.create)}},fi=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?jj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Pn(i,a,r)}};function jj(t,e){return t.replace(Bj,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Bj=/\{\$([^}]+)}/g;function ZA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(UA(o)&&UA(s)){if(!pi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function UA(t){return t!==null&&typeof t=="object"}function xu(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Na(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Pa(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function JA(t,e){let n=new E_(t,e);return n.subscribe.bind(n)}var E_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$j(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=w_),i.error===void 0&&(i.error=w_),i.complete===void 0&&(i.complete=w_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function $j(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function w_(){}var QQ=4*60*60*1e3;function wt(t){return t&&t._delegate?t._delegate:t}var Wn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Zo="[DEFAULT]";var A_=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new gf;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qj(e))try{this.getOrInitializeService({instanceIdentifier:Zo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return I(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Zo){return this.instances.has(e)}getOptions(e=Zo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Hj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zo){return this.component?this.component.multipleInstances?e:Zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Hj(t){return t===Zo?void 0:t}function qj(t){return t.instantiationMode==="EAGER"}var yf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new A_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var zj=[],Te=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Te||{}),Wj={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},Gj=Te.INFO,Kj={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},Qj=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Kj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Zi=class{constructor(e){this.name=e,this._logLevel=Gj,this._logHandler=Qj,this._userLogHandler=null,zj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}};var Yj=(t,e)=>e.some(n=>t instanceof n),XA,eM;function Zj(){return XA||(XA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jj(){return eM||(eM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var tM=new WeakMap,x_=new WeakMap,nM=new WeakMap,M_=new WeakMap,N_=new WeakMap;function Xj(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Nr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&tM.set(n,t)}).catch(()=>{}),N_.set(e,t),e}function eB(t){if(x_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});x_.set(t,e)}var R_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return x_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rM(t){R_=t(R_)}function tB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(_f(this),e,...n);return nM.set(r,e.sort?e.sort():[e]),Nr(r)}:Jj().includes(t)?function(...e){return t.apply(_f(this),e),Nr(tM.get(this))}:function(...e){return Nr(t.apply(_f(this),e))}}function nB(t){return typeof t=="function"?tB(t):(t instanceof IDBTransaction&&eB(t),Yj(t,Zj())?new Proxy(t,R_):t)}function Nr(t){if(t instanceof IDBRequest)return Xj(t);if(M_.has(t))return M_.get(t);let e=nB(t);return e!==t&&(M_.set(t,e),N_.set(e,t)),e}var _f=t=>N_.get(t);function oM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Nr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Nr(s.result),u.oldVersion,u.newVersion,Nr(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var rB=["get","getKey","getAll","getAllKeys","count"],iB=["put","add","delete","clear"],P_=new Map;function iM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(P_.get(e))return P_.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=iB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rB.includes(n)))return;let o=function(s,...a){return I(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return P_.set(e,o),o}rM(t=>ae(L({},t),{get:(e,n,r)=>iM(e,n)||t.get(e,n,r),has:(e,n)=>!!iM(e,n)||t.has(e,n)}));var O_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oB(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function oB(t){let e=t.getComponent();return e?.type==="VERSION"}var F_="@firebase/app",sM="0.10.13";var mi=new Zi("@firebase/app"),sB="@firebase/app-compat",aB="@firebase/analytics-compat",cB="@firebase/analytics",uB="@firebase/app-check-compat",lB="@firebase/app-check",dB="@firebase/auth",hB="@firebase/auth-compat",fB="@firebase/database",pB="@firebase/data-connect",mB="@firebase/database-compat",gB="@firebase/functions",vB="@firebase/functions-compat",yB="@firebase/installations",_B="@firebase/installations-compat",wB="@firebase/messaging",IB="@firebase/messaging-compat",EB="@firebase/performance",bB="@firebase/performance-compat",CB="@firebase/remote-config",DB="@firebase/remote-config-compat",TB="@firebase/storage",SB="@firebase/storage-compat",AB="@firebase/firestore",MB="@firebase/vertexai-preview",xB="@firebase/firestore-compat",RB="firebase",NB="10.14.1";var L_="[DEFAULT]",PB={[F_]:"fire-core",[sB]:"fire-core-compat",[cB]:"fire-analytics",[aB]:"fire-analytics-compat",[lB]:"fire-app-check",[uB]:"fire-app-check-compat",[dB]:"fire-auth",[hB]:"fire-auth-compat",[fB]:"fire-rtdb",[pB]:"fire-data-connect",[mB]:"fire-rtdb-compat",[gB]:"fire-fn",[vB]:"fire-fn-compat",[yB]:"fire-iid",[_B]:"fire-iid-compat",[wB]:"fire-fcm",[IB]:"fire-fcm-compat",[EB]:"fire-perf",[bB]:"fire-perf-compat",[CB]:"fire-rc",[DB]:"fire-rc-compat",[TB]:"fire-gcs",[SB]:"fire-gcs-compat",[AB]:"fire-fst",[xB]:"fire-fst-compat",[MB]:"fire-vertex","fire-js":"fire-js",[RB]:"fire-js-all"};var Ru=new Map,kB=new Map,V_=new Map;function aM(t,e){try{t.container.addComponent(e)}catch(n){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xi(t){let e=t.name;if(V_.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;V_.set(e,t);for(let n of Ru.values())aM(n,t);for(let n of kB.values())aM(n,t);return!0}function Pu(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lr(t){return t.settings!==void 0}var OB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new fi("app","Firebase",OB);var U_=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}};var eo=NB;function $_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:L_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ji.create("bad-app-name",{appName:String(i)});if(n||(n=D_()),!n)throw Ji.create("no-options");let o=Ru.get(i);if(o){if(pi(n,o.options)&&pi(r,o.config))return o;throw Ji.create("duplicate-app",{appName:i})}let s=new yf(i);for(let u of V_.values())s.addComponent(u);let a=new U_(n,r,s);return Ru.set(i,a),a}function ka(t=L_){let e=Ru.get(t);if(!e&&t===L_&&D_())return $_();if(!e)throw Ji.create("no-app",{appName:t});return e}function wf(){return Array.from(Ru.values())}function St(t,e,n){var r;let i=(r=PB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(a.join(" "));return}Xi(new Wn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var FB="firebase-heartbeat-database",LB=1,Nu="firebase-heartbeat-store",k_=null;function dM(){return k_||(k_=oM(FB,LB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ji.create("idb-open",{originalErrorMessage:t.message})})),k_}function VB(t){return I(this,null,function*(){try{let n=(yield dM()).transaction(Nu),r=yield n.objectStore(Nu).get(hM(t));return yield n.done,r}catch(e){if(e instanceof Pn)mi.warn(e.message);else{let n=Ji.create("idb-get",{originalErrorMessage:e?.message});mi.warn(n.message)}}})}function cM(t,e){return I(this,null,function*(){try{let r=(yield dM()).transaction(Nu,"readwrite");yield r.objectStore(Nu).put(e,hM(t)),yield r.done}catch(n){if(n instanceof Pn)mi.warn(n.message);else{let r=Ji.create("idb-set",{originalErrorMessage:n?.message});mi.warn(r.message)}}})}function hM(t){return`${t.name}!${t.options.appId}`}var UB=1024,jB=30*24*60*60*1e3,j_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new B_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return I(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=uM();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=jB}),this._storage.overwrite(this._heartbeatsCache))}catch(r){mi.warn(r)}})}getHeartbeatsHeader(){return I(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=uM(),{heartbeatsToSend:r,unsentEntries:i}=BB(this._heartbeatsCache.heartbeats),o=Mu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return mi.warn(n),""}})}};function uM(){return new Date().toISOString().substring(0,10)}function BB(t,e=UB){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),lM(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lM(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var B_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(this,null,function*(){return S_()?YA().then(()=>!0).catch(()=>!1):!1})}read(){return I(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield VB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return cM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return cM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function lM(t){return Mu(JSON.stringify({version:2,heartbeats:t})).length}function $B(t){Xi(new Wn("platform-logger",e=>new O_(e),"PRIVATE")),Xi(new Wn("heartbeat",e=>new j_(e),"PRIVATE")),St(F_,sM,t),St(F_,sM,"esm2017"),St("fire-js","")}$B("");var HB="firebase",qB="10.14.1";St(HB,qB,"app");var Xo=new Xr("ANGULARFIRE2_VERSION");function Ef(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ku=(t,e)=>{let n=e?[e]:wf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Fa=class{constructor(){return ku(zB)}},zB="app-check";function Oa(){}var If=class{zone;delegate;constructor(e,n=lg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},H_=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oa,{},Oa,Oa)),n.pipe(Ue({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},La=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new If(Zone.current)),this.insideAngular=n.run(()=>new If(Zone.current,Fs)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ce(je))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bf(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function WB(t){return bf().ngZone.runOutsideAngular(()=>t())}function Jo(t){return bf().ngZone.run(()=>t())}function GB(t){return KB(bf())(t)}function KB(t){return function(n){return n=n.lift(new H_(t.ngZone)),n.pipe(Pi(t.outsideAngular),Ni(t.insideAngular))}}var QB=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Jo(()=>t.apply(void 0,r))},qe=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=Jo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oa,{},Oa,Oa))),r[o]=QB(r[o],n));let i=WB(()=>t.apply(this,r));if(!e)if(i instanceof de){let o=bf();return i.pipe(Pi(o.outsideAngular),Ni(o.insideAngular))}else return Jo(()=>i);return i instanceof de?i.pipe(GB):i instanceof Promise?Jo(()=>new Promise((o,s)=>i.then(a=>Jo(()=>o(a)),a=>Jo(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Jo(()=>i)};var gi=class{constructor(e){return e}},es=class{constructor(){return wf()}};function YB(t){return t&&t.length===1?t[0]:new gi(ka())}var q_=new Q("angularfire2._apps"),ZB={provide:gi,useFactory:YB,deps:[[new rn,q_]]},JB={provide:es,deps:[[new rn,q_]]};function XB(t){return(e,n)=>{let r=n.get(Dr);St("angularfire",Xo.full,"core"),St("angularfire",Xo.full,"app"),St("angular",pS.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new gi(i)}}function fM(t,...e){return Ir([ZB,JB,{provide:q_,useFactory:XB(t),multi:!0,deps:[je,mt,La,...e]}])}var pM=qe($_,!0);function RM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var NM=RM,PM=new fi("auth","Firebase",RM());var Mf=new Zi("@firebase/auth");function e$(t,...e){Mf.logLevel<=Te.WARN&&Mf.warn(`Auth (${eo}): ${t}`,...e)}function Df(t,...e){Mf.logLevel<=Te.ERROR&&Mf.error(`Auth (${eo}): ${t}`,...e)}function kr(t,...e){throw fw(t,...e)}function ts(t,...e){return fw(t,...e)}function kM(t,e,n){let r=Object.assign(Object.assign({},NM()),{[e]:n});return new fi("auth","Firebase",r).create(e,{appName:t.name})}function _i(t){return kM(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fw(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return PM.create(t,...e)}function re(t,e,...n){if(!t)throw fw(e,...n)}function vi(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Df(e),new Error(e)}function no(t,e){t||vi(e)}function K_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function t$(){return mM()==="http:"||mM()==="https:"}function mM(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function n$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(t$()||WA()||"connection"in navigator)?navigator.onLine:!0}function r$(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ns=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,no(n>e,"Short delay should be less than long delay!"),this.isMobile=qA()||GA()}get(){return n$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function pw(t,e){no(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var xf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var i$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var o$=new ns(3e4,6e4);function ro(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function io(o,s,a,u){return I(this,arguments,function*(t,e,n,r,i={}){return OM(t,i,()=>I(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=xu(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let v=Object.assign({method:e,headers:g},l);return zA()||(v.referrerPolicy="no-referrer"),xf.fetch()(FM(t,t.config.apiHost,n,p),v)}))})}function OM(t,e,n){return I(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},i$),e);try{let i=new Q_(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Cf(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cf(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Cf(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Cf(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw kM(t,h,l);kr(t,h)}}catch(i){if(i instanceof Pn)throw i;kr(t,"network-request-failed",{message:String(i)})}})}function $u(o,s,a,u){return I(this,arguments,function*(t,e,n,r,i={}){let l=yield io(t,e,n,r,i);return"mfaPendingCredential"in l&&kr(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function FM(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?pw(t.config,i):`${t.config.apiScheme}://${i}`}function s$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Q_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ts(this.auth,"network-request-failed")),o$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Cf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ts(t,e,r);return i.customData._tokenResponse=n,i}function gM(t){return t!==void 0&&t.enterprise!==void 0}var Y_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return s$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function a$(t,e){return I(this,null,function*(){return io(t,"GET","/v2/recaptchaConfig",ro(t,e))})}function c$(t,e){return I(this,null,function*(){return io(t,"POST","/v1/accounts:delete",e)})}function LM(t,e){return I(this,null,function*(){return io(t,"POST","/v1/accounts:lookup",e)})}function Ou(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function mw(t,e=!1){return I(this,null,function*(){let n=wt(t),r=yield n.getIdToken(e),i=gw(r);re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ou(z_(i.auth_time)),issuedAtTime:Ou(z_(i.iat)),expirationTime:Ou(z_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function z_(t){return Number(t)*1e3}function gw(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Df("JWT malformed, contained fewer than 3 sections"),null;try{let i=b_(n);return i?JSON.parse(i):(Df("Failed to decode base64 JWT payload"),null)}catch(i){return Df("Caught error parsing JWT payload as JSON",i?.toString()),null}}function vM(t){let e=gw(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Lu(t,e,n=!1){return I(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Pn&&u$(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function u$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Z_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),n)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Vu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ou(this.lastLoginAt),this.creationTime=Ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Rf(t){return I(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Lu(t,LM(n,{idToken:r}));re(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?VM(o.providerUserInfo):[],a=l$(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Vu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function vw(t){return I(this,null,function*(){let e=wt(t);yield Rf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function l$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function VM(t){return t.map(e=>{var{providerId:n}=e,r=dg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function d$(t,e){return I(this,null,function*(){let n=yield OM(t,{},()=>I(this,null,function*(){let r=xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=FM(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",xf.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function h$(t,e){return I(this,null,function*(){return io(t,"POST","/v2/accounts:revokeToken",ro(t,e))})}var Fu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");let n=vM(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return I(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield d$(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(re(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(re(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return vi("not implemented")}};function to(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Va=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let n=yield Lu(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return mw(this,e)}reload(){return vw(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Rf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(lr(this.auth.app))return Promise.reject(_i(this.auth));let e=yield this.getIdToken();return yield Lu(this,c$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,v=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=n.photoURL)!==null&&s!==void 0?s:void 0,O=(a=n.tenantId)!==null&&a!==void 0?a:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,B=(l=n.createdAt)!==null&&l!==void 0?l:void 0,Z=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:te,emailVerified:Ce,isAnonymous:tt,providerData:ue,stsTokenManager:D}=n;re(te&&D,e,"internal-error");let y=Fu.fromJSON(this.name,D);re(typeof te=="string",e,"internal-error"),to(p,e.name),to(g,e.name),re(typeof Ce=="boolean",e,"internal-error"),re(typeof tt=="boolean",e,"internal-error"),to(v,e.name),to(S,e.name),to(O,e.name),to(k,e.name),to(B,e.name),to(Z,e.name);let E=new t({uid:te,auth:e,email:g,emailVerified:Ce,displayName:p,isAnonymous:tt,photoURL:S,phoneNumber:v,tenantId:O,stsTokenManager:y,createdAt:B,lastLoginAt:Z});return ue&&Array.isArray(ue)&&(E.providerData=ue.map(C=>Object.assign({},C))),k&&(E._redirectEventId=k),E}static _fromIdTokenResponse(e,n,r=!1){return I(this,null,function*(){let i=new Fu;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Rf(o),o})}static _fromGetAccountInfoResponse(e,n,r){return I(this,null,function*(){let i=n.users[0];re(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?VM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Fu;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Vu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var yM=new Map;function yi(t){no(t instanceof Function,"Expected a class definition");let e=yM.get(t);return e?(no(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yM.set(t,e),e)}var f$=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(n,r){return I(this,null,function*(){this.storage[n]=r})}_get(n){return I(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return I(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),J_=f$;function Tf(t,e,n){return`firebase:${t}:${e}:${n}`}var Nf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Tf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Tf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Va._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return I(this,null,function*(){if(!n.length)return new t(yi(J_),e,r);let i=(yield Promise.all(n.map(l=>I(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||yi(J_),s=Tf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p=Va._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>I(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function _M(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($M(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qM(e))return"Blackberry";if(zM(e))return"Webos";if(jM(e))return"Safari";if((e.includes("chrome/")||BM(e))&&!e.includes("edge/"))return"Chrome";if(HM(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function UM(t=Rt()){return/firefox\//i.test(t)}function jM(t=Rt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BM(t=Rt()){return/crios\//i.test(t)}function $M(t=Rt()){return/iemobile/i.test(t)}function HM(t=Rt()){return/android/i.test(t)}function qM(t=Rt()){return/blackberry/i.test(t)}function zM(t=Rt()){return/webos/i.test(t)}function yw(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function p$(t=Rt()){var e;return yw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function m$(){return KA()&&document.documentMode===10}function WM(t=Rt()){return yw(t)||HM(t)||zM(t)||qM(t)||/windows phone/i.test(t)||$M(t)}function GM(t,e=[]){let n;switch(t){case"Browser":n=_M(Rt());break;case"Worker":n=`${_M(Rt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${eo}/${r}`}var X_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function g$(n){return I(this,arguments,function*(t,e={}){return io(t,"GET","/v2/passwordPolicy",ro(t,e))})}var v$=6,ew=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:v$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var tw=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pf(this),this.idTokenSubscription=new Pf(this),this.beforeStateQueue=new X_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yi(n)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Nf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let n=yield LM(this,{idToken:e}),r=yield Va._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var n;if(lr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield Rf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=r$()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(lr(this.app))return Promise.reject(_i(this));let n=e?wt(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return I(this,null,function*(){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return lr(this.app)?Promise.reject(_i(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return lr(this.app)?Promise.reject(_i(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(yi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield g$(this),n=new ew(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield h$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&yi(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=yield Nf.create(this,[yi(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return I(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&e$(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function is(t){return wt(t)}var Pf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=JA(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var jf={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y$(t){jf=t}function KM(t){return jf.loadJS(t)}function _$(){return jf.recaptchaEnterpriseScript}function w$(){return jf.gapiScript}function QM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var I$="recaptcha-enterprise",E$="NO_RECAPTCHA",nw=class{constructor(e){this.type=I$,this.auth=is(e)}verify(e="verify",n=!1){return I(this,null,function*(){function r(o){return I(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>I(this,null,function*(){a$(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Y_(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;gM(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(E$)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&gM(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=_$();u.length!==0&&(u+=a),KM(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function wM(t,e,n,r=!1){return I(this,null,function*(){let i=new nw(t),o;try{o=yield i.verify(n)}catch{o=yield i.verify(n,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function rw(t,e,n,r){return I(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield wM(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(o=>I(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield wM(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)}))})}function _w(t,e){let n=Pu(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(pi(o,e??{}))return i;kr(i,"already-initialized")}return n.initialize({options:e})}function b$(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(yi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function ww(t,e,n){let r=is(t);re(r._canInitEmulator,r,"emulator-config-failed"),re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=YM(e),{host:s,port:a}=C$(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||D$()}function YM(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function C$(t){let e=YM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:IM(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:IM(s)}}}function IM(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function D$(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Uu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,n){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}};function T$(t,e){return I(this,null,function*(){return io(t,"POST","/v1/accounts:signUp",e)})}function S$(t,e){return I(this,null,function*(){return $u(t,"POST","/v1/accounts:signInWithPassword",ro(t,e))})}function A$(t,e){return I(this,null,function*(){return $u(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))})}function M$(t,e){return I(this,null,function*(){return $u(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))})}var ju=class t extends Uu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return I(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rw(e,n,"signInWithPassword",S$);case"emailLink":return A$(e,{email:this._email,oobCode:this._password});default:kr(e,"internal-error")}})}_linkToIdToken(e,n){return I(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rw(e,r,"signUpPassword",T$);case"emailLink":return M$(e,{idToken:n,email:this._email,oobCode:this._password});default:kr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function W_(t,e){return I(this,null,function*(){return $u(t,"POST","/v1/accounts:signInWithIdp",ro(t,e))})}function x$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function R$(t){let e=Na(Pa(t)).link,n=e?Na(Pa(e)).deep_link_id:null,r=Na(Pa(t)).deep_link_id;return(r?Na(Pa(r)).link:null)||r||n||e||t}var kf=class t{constructor(e){var n,r,i,o,s,a;let u=Na(Pa(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=x$((i=u.mode)!==null&&i!==void 0?i:null);re(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=R$(e);try{return new t(n)}catch{return null}}};var ZM=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return ju._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=kf.parseLink(r);return re(i,"argument-error"),ju._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Of=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var iw=class extends Of{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function N$(t,e){return I(this,null,function*(){return $u(t,"POST","/v1/accounts:signUp",ro(t,e))})}var Ua=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return I(this,null,function*(){let o=yield Va._fromIdTokenResponse(e,r,i),s=EM(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return I(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=EM(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function EM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ow=class t extends Pn{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function JM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ow._fromErrorAndOperation(t,o,e,r):o})}function P$(t,e,n=!1){return I(this,null,function*(){let r=yield Lu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ua._forOperation(t,"link",r)})}function k$(t,e,n=!1){return I(this,null,function*(){let{auth:r}=t;if(lr(r.app))return Promise.reject(_i(r));let i="reauthenticate";try{let o=yield Lu(t,JM(r,i,e,t),n);re(o.idToken,r,"internal-error");let s=gw(o.idToken);re(s,r,"internal-error");let{sub:a}=s;return re(t.uid===a,r,"user-mismatch"),Ua._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&kr(r,"user-mismatch"),o}})}function XM(t,e,n=!1){return I(this,null,function*(){if(lr(t.app))return Promise.reject(_i(t));let r="signIn",i=yield JM(t,r,e),o=yield Ua._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Iw(t,e){return I(this,null,function*(){return XM(is(t),e)})}function ex(t){return I(this,null,function*(){let e=is(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Ew(t,e,n){return I(this,null,function*(){if(lr(t.app))return Promise.reject(_i(t));let r=is(t),s=yield rw(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",N$).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ex(t),u}),a=yield Ua._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function bw(t,e,n){return lr(t.app)?Promise.reject(_i(t)):Iw(wt(t),ZM.credential(e,n)).catch(r=>I(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&ex(t),r}))}function Hu(t,e,n,r){return wt(t).onIdTokenChanged(e,n,r)}function Cw(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}function Dw(t){return wt(t).signOut()}var Ff="__sak";var Lf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var O$=1e3,F$=10,L$=(()=>{class t extends Lf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WM(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);m$()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,F$):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},O$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return I(this,null,function*(){yield xi(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return I(this,null,function*(){let r=yield xi(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return I(this,null,function*(){yield xi(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),tx=L$;var V$=(()=>{class t extends Lf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Tw=V$;function U$(t){return Promise.all(t.map(e=>I(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var j$=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return I(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>I(this,null,function*(){return h(r.origin,s)})),l=yield U$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function nx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var sw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return I(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=nx("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Pr(){return window}function B$(t){Pr().location.href=t}function rx(){return typeof Pr().WorkerGlobalScope<"u"&&typeof Pr().importScripts=="function"}function $$(){return I(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function H$(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function q$(){return rx()?self:null}var ix="firebaseLocalStorageDb",z$=1,Vf="firebaseLocalStorage",ox="fbase_key",rs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Bf(t,e){return t.transaction([Vf],e?"readwrite":"readonly").objectStore(Vf)}function W$(){let t=indexedDB.deleteDatabase(ix);return new rs(t).toPromise()}function aw(){let t=indexedDB.open(ix,z$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Vf,{keyPath:ox})}catch(i){n(i)}}),t.addEventListener("success",()=>I(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Vf)?e(r):(r.close(),yield W$(),e(yield aw()))}))})}function bM(t,e,n){return I(this,null,function*(){let r=Bf(t,!0).put({[ox]:e,value:n});return new rs(r).toPromise()})}function G$(t,e){return I(this,null,function*(){let n=Bf(t,!1).get(e),r=yield new rs(n).toPromise();return r===void 0?null:r.value})}function CM(t,e){let n=Bf(t,!0).delete(e);return new rs(n).toPromise()}var K$=800,Q$=3,Y$=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return I(this,null,function*(){return this.db?this.db:(this.db=yield aw(),this.db)})}_withRetries(n){return I(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Q$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return I(this,null,function*(){return rx()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return I(this,null,function*(){this.receiver=j$._getInstance(q$()),this.receiver._subscribe("keyChanged",(n,r)=>I(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>I(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return I(this,null,function*(){var n,r;if(this.activeServiceWorker=yield $$(),!this.activeServiceWorker)return;this.sender=new sw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return I(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||H$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return I(this,null,function*(){try{if(!indexedDB)return!1;let n=yield aw();return yield bM(n,Ff,"1"),yield CM(n,Ff),!0}catch{}return!1})}_withPendingWrite(n){return I(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(i=>bM(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return I(this,null,function*(){let r=yield this._withRetries(i=>G$(i,n));return this.localCache[n]=r,r})}_remove(n){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(r=>CM(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return I(this,null,function*(){let n=yield this._withRetries(o=>{let s=Bf(o,!1).getAll();return new rs(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>I(this,null,function*(){return this._poll()}),K$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),sx=Y$;var $Y=QM("rcb"),HY=new ns(3e4,6e4);function Z$(t,e){return e?yi(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Bu=class extends Uu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return W_(e,this._buildIdpRequest())}_linkToIdToken(e,n){return W_(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return W_(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function J$(t){return XM(t.auth,new Bu(t),t.bypassAuthState)}function X$(t){let{auth:e,user:n}=t;return re(n,e,"internal-error"),k$(n,new Bu(t),t.bypassAuthState)}function e3(t){return I(this,null,function*(){let{auth:e,user:n}=t;return re(n,e,"internal-error"),P$(n,new Bu(t),t.bypassAuthState)})}var cw=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>I(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return I(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J$;case"linkViaPopup":case"linkViaRedirect":return e3;case"reauthViaPopup":case"reauthViaRedirect":return X$;default:kr(this.auth,"internal-error")}}resolve(e){no(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){no(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var qY=new ns(2e3,1e4);var t3="pendingRedirect",Sf=new Map,uw=class t extends cw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return I(this,null,function*(){let e=Sf.get(this.auth._key());if(!e){try{let r=(yield n3(this.resolver,this.auth))?yield xi(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return I(this,null,function*(){if(e.type==="signInViaRedirect")return xi(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,xi(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return I(this,null,function*(){})}cleanUp(){}};function n3(t,e){return I(this,null,function*(){let n=o3(e),r=i3(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function r3(t,e){Sf.set(t._key(),e)}function i3(t){return yi(t._redirectPersistence)}function o3(t){return Tf(t3,t.config.apiKey,t.name)}function s3(t,e,n=!1){return I(this,null,function*(){if(lr(t.app))return Promise.reject(_i(t));let r=is(t),i=Z$(r,e),s=yield new uw(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var a3=10*60*1e3,lw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!c3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ax(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ts(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=a3&&this.cachedEventUids.clear(),this.cachedEventUids.has(DM(e))}saveEventToCache(e){this.cachedEventUids.add(DM(e)),this.lastProcessedEventTime=Date.now()}};function DM(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ax({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function c3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ax(t);default:return!1}}function u3(n){return I(this,arguments,function*(t,e={}){return io(t,"GET","/v1/projects",e)})}var l3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d3=/^https?/;function h3(t){return I(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield u3(t);for(let n of e)try{if(f3(n))return}catch{}kr(t,"unauthorized-domain")})}function f3(t){let e=K_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!d3.test(n))return!1;if(l3.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var p3=new ns(3e4,6e4);function TM(){let t=Pr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function m3(t){return new Promise((e,n)=>{var r,i,o;function s(){TM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TM(),n(ts(t,"network-request-failed"))},timeout:p3.get()})}if(!((i=(r=Pr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Pr().gapi)===null||o===void 0)&&o.load)s();else{let a=QM("iframefcb");return Pr()[a]=()=>{gapi.load?s():n(ts(t,"network-request-failed"))},KM(`${w$()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Af=null,e})}var Af=null;function g3(t){return Af=Af||m3(t),Af}var v3=new ns(5e3,15e3),y3="__/auth/iframe",_3="emulator/auth/iframe",w3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},I3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E3(t){let e=t.config;re(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?pw(e,_3):`https://${t.config.authDomain}/${y3}`,r={apiKey:e.apiKey,appName:t.name,v:eo},i=I3.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${xu(r).slice(1)}`}function b3(t){return I(this,null,function*(){let e=yield g3(t),n=Pr().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:E3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:w3,dontclear:!0},r=>new Promise((i,o)=>I(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ts(t,"network-request-failed"),a=Pr().setTimeout(()=>{o(s)},v3.get());function u(){Pr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var C3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},D3=500,T3=600,S3="_blank",A3="http://localhost",Uf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function M3(t,e,n,r=D3,i=T3){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},C3),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Rt().toLowerCase();n&&(a=BM(l)?S3:n),UM(l)&&(e=e||A3,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[v,S])=>`${g}${v}=${S},`,"");if(p$(l)&&a!=="_self")return x3(e||"",a),new Uf(null);let p=window.open(e||"",a,h);re(p,t,"popup-blocked");try{p.focus()}catch{}return new Uf(p)}function x3(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var R3="__/auth/handler",N3="emulator/auth/handler",P3=encodeURIComponent("fac");function SM(t,e,n,r,i,o){return I(this,null,function*(){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:eo,eventId:i};if(e instanceof Of){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",ZA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof iw){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${P3}=${encodeURIComponent(u)}`:"";return`${k3(t)}?${xu(a).slice(1)}${l}`})}function k3({config:t}){return t.emulator?pw(t,N3):`https://${t.authDomain}/${R3}`}var G_="webStorageSupport",dw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tw,this._completeRedirectFn=s3,this._overrideRedirectResult=r3}_openPopup(e,n,r,i){return I(this,null,function*(){var o;no((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield SM(e,n,r,K_(),i);return M3(e,s,nx())})}_openRedirect(e,n,r,i){return I(this,null,function*(){yield this._originValidation(e);let o=yield SM(e,n,r,K_(),i);return B$(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(no(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return I(this,null,function*(){let n=yield b3(e),r=new lw(e);return n.register("authEvent",i=>(re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(G_,{type:G_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[G_];s!==void 0&&n(!!s),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=h3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WM()||jM()||yw()}},cx=dw;var AM="@firebase/auth",MM="1.7.9";var hw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function O3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function F3(t){Xi(new Wn("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;re(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GM(t)},l=new tw(r,i,o,u);return b$(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xi(new Wn("auth-internal",e=>{let n=is(e.getProvider("auth").getImmediate());return(r=>new hw(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),St(AM,MM,O3(t)),St(AM,MM,"esm2017")}var L3=5*60,V3=T_("authIdTokenMaxAge")||L3,xM=null,U3=t=>e=>I(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>V3)return;let i=n?.token;xM!==i&&(xM=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Sw(t=ka()){let e=Pu(t,"auth");if(e.isInitialized())return e.getImmediate();let n=_w(t,{popupRedirectResolver:cx,persistence:[sx,tx,Tw]}),r=T_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=U3(o.toString());Cw(n,s,()=>s(n.currentUser)),Hu(n,a=>s(a))}}let i=C_("auth");return i&&ww(n,`http://${i}`),n}function j3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}y$({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=ts("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",j3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});F3("Browser");function dx(t){return new de(function(e){var n=Hu(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var hx="auth",os=class{constructor(e){return e}},qu=class{constructor(){return ku(hx)}};var Aw=new Q("angularfire2.auth-instances");function A4(t,e){let n=Ef(hx,t,e);return n&&new os(n)}function M4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new os(r)}}var x4={provide:qu,deps:[[new rn,Aw]]},R4={provide:os,useFactory:A4,deps:[[new rn,Aw],gi]};function fx(t,...e){return St("angularfire",Xo.full,"auth"),Ir([R4,x4,{provide:Aw,useFactory:M4(t),multi:!0,deps:[je,mt,La,es,[new rn,Fa],...e]}])}var px=qe(dx,!0);var mx=qe(Ew,!0);var gx=qe(Sw,!0);var vx=qe(bw,!0);var yx=qe(Dw,!0);var _x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wx={};var oo,Mw;(function(){var t;function e(D,y){function E(){}E.prototype=y.prototype,D.D=y.prototype,D.prototype=new E,D.prototype.constructor=D,D.C=function(C,A,R){for(var b=Array(arguments.length-2),Gr=2;Gr<arguments.length;Gr++)b[Gr-2]=arguments[Gr];return y.prototype[A].apply(C,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,y,E){E||(E=0);var C=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)C[A]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(A=0;16>A;++A)C[A]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=D.g[0],E=D.g[1],A=D.g[2];var R=D.g[3],b=y+(R^E&(A^R))+C[0]+3614090360&4294967295;y=E+(b<<7&4294967295|b>>>25),b=R+(A^y&(E^A))+C[1]+3905402710&4294967295,R=y+(b<<12&4294967295|b>>>20),b=A+(E^R&(y^E))+C[2]+606105819&4294967295,A=R+(b<<17&4294967295|b>>>15),b=E+(y^A&(R^y))+C[3]+3250441966&4294967295,E=A+(b<<22&4294967295|b>>>10),b=y+(R^E&(A^R))+C[4]+4118548399&4294967295,y=E+(b<<7&4294967295|b>>>25),b=R+(A^y&(E^A))+C[5]+1200080426&4294967295,R=y+(b<<12&4294967295|b>>>20),b=A+(E^R&(y^E))+C[6]+2821735955&4294967295,A=R+(b<<17&4294967295|b>>>15),b=E+(y^A&(R^y))+C[7]+4249261313&4294967295,E=A+(b<<22&4294967295|b>>>10),b=y+(R^E&(A^R))+C[8]+1770035416&4294967295,y=E+(b<<7&4294967295|b>>>25),b=R+(A^y&(E^A))+C[9]+2336552879&4294967295,R=y+(b<<12&4294967295|b>>>20),b=A+(E^R&(y^E))+C[10]+4294925233&4294967295,A=R+(b<<17&4294967295|b>>>15),b=E+(y^A&(R^y))+C[11]+2304563134&4294967295,E=A+(b<<22&4294967295|b>>>10),b=y+(R^E&(A^R))+C[12]+1804603682&4294967295,y=E+(b<<7&4294967295|b>>>25),b=R+(A^y&(E^A))+C[13]+4254626195&4294967295,R=y+(b<<12&4294967295|b>>>20),b=A+(E^R&(y^E))+C[14]+2792965006&4294967295,A=R+(b<<17&4294967295|b>>>15),b=E+(y^A&(R^y))+C[15]+1236535329&4294967295,E=A+(b<<22&4294967295|b>>>10),b=y+(A^R&(E^A))+C[1]+4129170786&4294967295,y=E+(b<<5&4294967295|b>>>27),b=R+(E^A&(y^E))+C[6]+3225465664&4294967295,R=y+(b<<9&4294967295|b>>>23),b=A+(y^E&(R^y))+C[11]+643717713&4294967295,A=R+(b<<14&4294967295|b>>>18),b=E+(R^y&(A^R))+C[0]+3921069994&4294967295,E=A+(b<<20&4294967295|b>>>12),b=y+(A^R&(E^A))+C[5]+3593408605&4294967295,y=E+(b<<5&4294967295|b>>>27),b=R+(E^A&(y^E))+C[10]+38016083&4294967295,R=y+(b<<9&4294967295|b>>>23),b=A+(y^E&(R^y))+C[15]+3634488961&4294967295,A=R+(b<<14&4294967295|b>>>18),b=E+(R^y&(A^R))+C[4]+3889429448&4294967295,E=A+(b<<20&4294967295|b>>>12),b=y+(A^R&(E^A))+C[9]+568446438&4294967295,y=E+(b<<5&4294967295|b>>>27),b=R+(E^A&(y^E))+C[14]+3275163606&4294967295,R=y+(b<<9&4294967295|b>>>23),b=A+(y^E&(R^y))+C[3]+4107603335&4294967295,A=R+(b<<14&4294967295|b>>>18),b=E+(R^y&(A^R))+C[8]+1163531501&4294967295,E=A+(b<<20&4294967295|b>>>12),b=y+(A^R&(E^A))+C[13]+2850285829&4294967295,y=E+(b<<5&4294967295|b>>>27),b=R+(E^A&(y^E))+C[2]+4243563512&4294967295,R=y+(b<<9&4294967295|b>>>23),b=A+(y^E&(R^y))+C[7]+1735328473&4294967295,A=R+(b<<14&4294967295|b>>>18),b=E+(R^y&(A^R))+C[12]+2368359562&4294967295,E=A+(b<<20&4294967295|b>>>12),b=y+(E^A^R)+C[5]+4294588738&4294967295,y=E+(b<<4&4294967295|b>>>28),b=R+(y^E^A)+C[8]+2272392833&4294967295,R=y+(b<<11&4294967295|b>>>21),b=A+(R^y^E)+C[11]+1839030562&4294967295,A=R+(b<<16&4294967295|b>>>16),b=E+(A^R^y)+C[14]+4259657740&4294967295,E=A+(b<<23&4294967295|b>>>9),b=y+(E^A^R)+C[1]+2763975236&4294967295,y=E+(b<<4&4294967295|b>>>28),b=R+(y^E^A)+C[4]+1272893353&4294967295,R=y+(b<<11&4294967295|b>>>21),b=A+(R^y^E)+C[7]+4139469664&4294967295,A=R+(b<<16&4294967295|b>>>16),b=E+(A^R^y)+C[10]+3200236656&4294967295,E=A+(b<<23&4294967295|b>>>9),b=y+(E^A^R)+C[13]+681279174&4294967295,y=E+(b<<4&4294967295|b>>>28),b=R+(y^E^A)+C[0]+3936430074&4294967295,R=y+(b<<11&4294967295|b>>>21),b=A+(R^y^E)+C[3]+3572445317&4294967295,A=R+(b<<16&4294967295|b>>>16),b=E+(A^R^y)+C[6]+76029189&4294967295,E=A+(b<<23&4294967295|b>>>9),b=y+(E^A^R)+C[9]+3654602809&4294967295,y=E+(b<<4&4294967295|b>>>28),b=R+(y^E^A)+C[12]+3873151461&4294967295,R=y+(b<<11&4294967295|b>>>21),b=A+(R^y^E)+C[15]+530742520&4294967295,A=R+(b<<16&4294967295|b>>>16),b=E+(A^R^y)+C[2]+3299628645&4294967295,E=A+(b<<23&4294967295|b>>>9),b=y+(A^(E|~R))+C[0]+4096336452&4294967295,y=E+(b<<6&4294967295|b>>>26),b=R+(E^(y|~A))+C[7]+1126891415&4294967295,R=y+(b<<10&4294967295|b>>>22),b=A+(y^(R|~E))+C[14]+2878612391&4294967295,A=R+(b<<15&4294967295|b>>>17),b=E+(R^(A|~y))+C[5]+4237533241&4294967295,E=A+(b<<21&4294967295|b>>>11),b=y+(A^(E|~R))+C[12]+1700485571&4294967295,y=E+(b<<6&4294967295|b>>>26),b=R+(E^(y|~A))+C[3]+2399980690&4294967295,R=y+(b<<10&4294967295|b>>>22),b=A+(y^(R|~E))+C[10]+4293915773&4294967295,A=R+(b<<15&4294967295|b>>>17),b=E+(R^(A|~y))+C[1]+2240044497&4294967295,E=A+(b<<21&4294967295|b>>>11),b=y+(A^(E|~R))+C[8]+1873313359&4294967295,y=E+(b<<6&4294967295|b>>>26),b=R+(E^(y|~A))+C[15]+4264355552&4294967295,R=y+(b<<10&4294967295|b>>>22),b=A+(y^(R|~E))+C[6]+2734768916&4294967295,A=R+(b<<15&4294967295|b>>>17),b=E+(R^(A|~y))+C[13]+1309151649&4294967295,E=A+(b<<21&4294967295|b>>>11),b=y+(A^(E|~R))+C[4]+4149444226&4294967295,y=E+(b<<6&4294967295|b>>>26),b=R+(E^(y|~A))+C[11]+3174756917&4294967295,R=y+(b<<10&4294967295|b>>>22),b=A+(y^(R|~E))+C[2]+718787259&4294967295,A=R+(b<<15&4294967295|b>>>17),b=E+(R^(A|~y))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+y&4294967295,D.g[1]=D.g[1]+(A+(b<<21&4294967295|b>>>11))&4294967295,D.g[2]=D.g[2]+A&4294967295,D.g[3]=D.g[3]+R&4294967295}r.prototype.u=function(D,y){y===void 0&&(y=D.length);for(var E=y-this.blockSize,C=this.B,A=this.h,R=0;R<y;){if(A==0)for(;R<=E;)i(this,D,R),R+=this.blockSize;if(typeof D=="string"){for(;R<y;)if(C[A++]=D.charCodeAt(R++),A==this.blockSize){i(this,C),A=0;break}}else for(;R<y;)if(C[A++]=D[R++],A==this.blockSize){i(this,C),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var y=1;y<D.length-8;++y)D[y]=0;var E=8*this.o;for(y=D.length-8;y<D.length;++y)D[y]=E&255,E/=256;for(this.u(D),D=Array(16),y=E=0;4>y;++y)for(var C=0;32>C;C+=8)D[E++]=this.g[y]>>>C&255;return D};function o(D,y){var E=a;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=y(D)}function s(D,y){this.h=y;for(var E=[],C=!0,A=D.length-1;0<=A;A--){var R=D[A]|0;C&&R==y||(E[A]=R,C=!1)}this.g=E}var a={};function u(D){return-128<=D&&128>D?o(D,function(y){return new s([y|0],0>y?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return k(l(-D));for(var y=[],E=1,C=0;D>=E;C++)y[C]=D/E|0,E*=4294967296;return new s(y,0)}function h(D,y){if(D.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(D.charAt(0)=="-")return k(h(D.substring(1),y));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(y,8)),C=p,A=0;A<D.length;A+=8){var R=Math.min(8,D.length-A),b=parseInt(D.substring(A,A+R),y);8>R?(R=l(Math.pow(y,R)),C=C.j(R).add(l(b))):(C=C.j(E),C=C.add(l(b)))}return C}var p=u(0),g=u(1),v=u(16777216);t=s.prototype,t.m=function(){if(O(this))return-k(this).m();for(var D=0,y=1,E=0;E<this.g.length;E++){var C=this.i(E);D+=(0<=C?C:4294967296+C)*y,y*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(O(this))return"-"+k(this).toString(D);for(var y=l(Math.pow(D,6)),E=this,C="";;){var A=Ce(E,y).g;E=B(E,A.j(y));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(D);if(E=A,S(E))return R+C;for(;6>R.length;)R="0"+R;C=R+C}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var y=0;y<D.g.length;y++)if(D.g[y]!=0)return!1;return!0}function O(D){return D.h==-1}t.l=function(D){return D=B(this,D),O(D)?-1:S(D)?0:1};function k(D){for(var y=D.g.length,E=[],C=0;C<y;C++)E[C]=~D.g[C];return new s(E,~D.h).add(g)}t.abs=function(){return O(this)?k(this):this},t.add=function(D){for(var y=Math.max(this.g.length,D.g.length),E=[],C=0,A=0;A<=y;A++){var R=C+(this.i(A)&65535)+(D.i(A)&65535),b=(R>>>16)+(this.i(A)>>>16)+(D.i(A)>>>16);C=b>>>16,R&=65535,b&=65535,E[A]=b<<16|R}return new s(E,E[E.length-1]&-2147483648?-1:0)};function B(D,y){return D.add(k(y))}t.j=function(D){if(S(this)||S(D))return p;if(O(this))return O(D)?k(this).j(k(D)):k(k(this).j(D));if(O(D))return k(this.j(k(D)));if(0>this.l(v)&&0>D.l(v))return l(this.m()*D.m());for(var y=this.g.length+D.g.length,E=[],C=0;C<2*y;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(var A=0;A<D.g.length;A++){var R=this.i(C)>>>16,b=this.i(C)&65535,Gr=D.i(A)>>>16,yc=D.i(A)&65535;E[2*C+2*A]+=b*yc,Z(E,2*C+2*A),E[2*C+2*A+1]+=R*yc,Z(E,2*C+2*A+1),E[2*C+2*A+1]+=b*Gr,Z(E,2*C+2*A+1),E[2*C+2*A+2]+=R*Gr,Z(E,2*C+2*A+2)}for(C=0;C<y;C++)E[C]=E[2*C+1]<<16|E[2*C];for(C=y;C<2*y;C++)E[C]=0;return new s(E,0)};function Z(D,y){for(;(D[y]&65535)!=D[y];)D[y+1]+=D[y]>>>16,D[y]&=65535,y++}function te(D,y){this.g=D,this.h=y}function Ce(D,y){if(S(y))throw Error("division by zero");if(S(D))return new te(p,p);if(O(D))return y=Ce(k(D),y),new te(k(y.g),k(y.h));if(O(y))return y=Ce(D,k(y)),new te(k(y.g),y.h);if(30<D.g.length){if(O(D)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var E=g,C=y;0>=C.l(D);)E=tt(E),C=tt(C);var A=ue(E,1),R=ue(C,1);for(C=ue(C,2),E=ue(E,2);!S(C);){var b=R.add(C);0>=b.l(D)&&(A=A.add(E),R=b),C=ue(C,1),E=ue(E,1)}return y=B(D,A.j(y)),new te(A,y)}for(A=p;0<=D.l(y);){for(E=Math.max(1,Math.floor(D.m()/y.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),R=l(E),b=R.j(y);O(b)||0<b.l(D);)E-=C,R=l(E),b=R.j(y);S(R)&&(R=g),A=A.add(R),D=B(D,b)}return new te(A,D)}t.A=function(D){return Ce(this,D).h},t.and=function(D){for(var y=Math.max(this.g.length,D.g.length),E=[],C=0;C<y;C++)E[C]=this.i(C)&D.i(C);return new s(E,this.h&D.h)},t.or=function(D){for(var y=Math.max(this.g.length,D.g.length),E=[],C=0;C<y;C++)E[C]=this.i(C)|D.i(C);return new s(E,this.h|D.h)},t.xor=function(D){for(var y=Math.max(this.g.length,D.g.length),E=[],C=0;C<y;C++)E[C]=this.i(C)^D.i(C);return new s(E,this.h^D.h)};function tt(D){for(var y=D.g.length+1,E=[],C=0;C<y;C++)E[C]=D.i(C)<<1|D.i(C-1)>>>31;return new s(E,D.h)}function ue(D,y){var E=y>>5;y%=32;for(var C=D.g.length-E,A=[],R=0;R<C;R++)A[R]=0<y?D.i(R+E)>>>y|D.i(R+E+1)<<32-y:D.i(R+E);return new s(A,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Mw=wx.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,oo=wx.Integer=s}).apply(typeof _x<"u"?_x:typeof self<"u"?self:typeof window<"u"?window:{});var $f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wi={};var xw,N4,ja,Rw,zu,Hf,Nw,Pw,kw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof $f=="object"&&$f];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var M=c[m];if(!(M in f))break e;f=f[M]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,M={next:function(){if(!m&&f<c.length){var P=f++;return{value:d(P,c[P]),done:!1}}return m=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,m),c.apply(d,M)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,M,P){for(var j=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)j[ze-2]=arguments[ze];return d.prototype[M].apply(m,j)}}function O(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function k(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let M=c.length||0,P=m.length||0;c.length=M+P;for(let j=0;j<P;j++)c[M+j]=m[j]}else c.push(m)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Z(c){return/^[\s\xa0]*$/.test(c)}function te(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ce(c){return Ce[" "](c),c}Ce[" "]=function(){};var tt=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function ue(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,d){let f,m;for(let M=1;M<arguments.length;M++){m=arguments[M];for(f in m)c[f]=m[f];for(let P=0;P<E.length;P++)f=E[P],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function A(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function R(c){a.setTimeout(()=>{throw c},0)}function b(){var c=Tm;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Gr{constructor(){this.h=this.g=null}add(d,f){let m=yc.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var yc=new B(()=>new fN,c=>c.reset());class fN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let _c,wc=!1,Tm=new Gr,oE=()=>{let c=a.Promise.resolve(void 0);_c=()=>{c.then(pN)}};var pN=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(f){R(f)}var d=yc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}wc=!1};function Ti(){this.s=this.s,this.C=this.C}Ti.prototype.s=!1,Ti.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ti.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Vt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var mN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ic(c,d){if(Vt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(tt){e:{try{Ce(d.nodeName);var M=!0;break e}catch{}M=!1}M||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:gN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ic.aa.h.call(this)}}S(Ic,Vt);var gN={2:"touch",3:"pen",4:"mouse"};Ic.prototype.h=function(){Ic.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ec="closure_listenable_"+(1e6*Math.random()|0),vN=0;function yN(c,d,f,m,M){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=M,this.key=++vN,this.da=this.fa=!1}function Al(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ml(c){this.src=c,this.g={},this.h=0}Ml.prototype.add=function(c,d,f,m,M){var P=c.toString();c=this.g[P],c||(c=this.g[P]=[],this.h++);var j=Am(c,d,m,M);return-1<j?(d=c[j],f||(d.fa=!1)):(d=new yN(d,this.src,P,!!m,M),d.fa=f,c.push(d)),d};function Sm(c,d){var f=d.type;if(f in c.g){var m=c.g[f],M=Array.prototype.indexOf.call(m,d,void 0),P;(P=0<=M)&&Array.prototype.splice.call(m,M,1),P&&(Al(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Am(c,d,f,m){for(var M=0;M<c.length;++M){var P=c[M];if(!P.da&&P.listener==d&&P.capture==!!f&&P.ha==m)return M}return-1}var Mm="closure_lm_"+(1e6*Math.random()|0),xm={};function sE(c,d,f,m,M){if(m&&m.once)return cE(c,d,f,m,M);if(Array.isArray(d)){for(var P=0;P<d.length;P++)sE(c,d[P],f,m,M);return null}return f=km(f),c&&c[Ec]?c.K(d,f,l(m)?!!m.capture:!!m,M):aE(c,d,f,!1,m,M)}function aE(c,d,f,m,M,P){if(!d)throw Error("Invalid event type");var j=l(M)?!!M.capture:!!M,ze=Nm(c);if(ze||(c[Mm]=ze=new Ml(c)),f=ze.add(d,f,m,j,P),f.proxy)return f;if(m=_N(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)mN||(M=j),M===void 0&&(M=!1),c.addEventListener(d.toString(),m,M);else if(c.attachEvent)c.attachEvent(lE(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function _N(){function c(f){return d.call(c.src,c.listener,f)}let d=wN;return c}function cE(c,d,f,m,M){if(Array.isArray(d)){for(var P=0;P<d.length;P++)cE(c,d[P],f,m,M);return null}return f=km(f),c&&c[Ec]?c.L(d,f,l(m)?!!m.capture:!!m,M):aE(c,d,f,!0,m,M)}function uE(c,d,f,m,M){if(Array.isArray(d))for(var P=0;P<d.length;P++)uE(c,d[P],f,m,M);else m=l(m)?!!m.capture:!!m,f=km(f),c&&c[Ec]?(c=c.i,d=String(d).toString(),d in c.g&&(P=c.g[d],f=Am(P,f,m,M),-1<f&&(Al(P[f]),Array.prototype.splice.call(P,f,1),P.length==0&&(delete c.g[d],c.h--)))):c&&(c=Nm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Am(d,f,m,M)),(f=-1<c?d[c]:null)&&Rm(f))}function Rm(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ec])Sm(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(lE(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Nm(d))?(Sm(f,c),f.h==0&&(f.src=null,d[Mm]=null)):Al(c)}}}function lE(c){return c in xm?xm[c]:xm[c]="on"+c}function wN(c,d){if(c.da)c=!0;else{d=new Ic(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Rm(c),c=f.call(m,d)}return c}function Nm(c){return c=c[Mm],c instanceof Ml?c:null}var Pm="__closure_events_fn_"+(1e9*Math.random()>>>0);function km(c){return typeof c=="function"?c:(c[Pm]||(c[Pm]=function(d){return c.handleEvent(d)}),c[Pm])}function Ut(){Ti.call(this),this.i=new Ml(this),this.M=this,this.F=null}S(Ut,Ti),Ut.prototype[Ec]=!0,Ut.prototype.removeEventListener=function(c,d,f,m){uE(this,c,d,f,m)};function Zt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Vt(d,c);else if(d instanceof Vt)d.target=d.target||c;else{var M=d;d=new Vt(m,c),C(d,M)}if(M=!0,f)for(var P=f.length-1;0<=P;P--){var j=d.g=f[P];M=xl(j,m,!0,d)&&M}if(j=d.g=c,M=xl(j,m,!0,d)&&M,M=xl(j,m,!1,d)&&M,f)for(P=0;P<f.length;P++)j=d.g=f[P],M=xl(j,m,!1,d)&&M}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)Al(f[m]);delete c.g[d],c.h--}}this.F=null},Ut.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},Ut.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function xl(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var M=!0,P=0;P<d.length;++P){var j=d[P];if(j&&!j.da&&j.capture==f){var ze=j.listener,kt=j.ha||j.src;j.fa&&Sm(c.i,j),M=ze.call(kt,m)!==!1&&M}}return M&&!m.defaultPrevented}function dE(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function hE(c){c.g=dE(()=>{c.g=null,c.i&&(c.i=!1,hE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class IN extends Ti{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:hE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bc(c){Ti.call(this),this.h=c,this.g={}}S(bc,Ti);var fE=[];function pE(c){ue(c.g,function(d,f){this.g.hasOwnProperty(f)&&Rm(d)},c),c.g={}}bc.prototype.N=function(){bc.aa.N.call(this),pE(this)},bc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Om=a.JSON.stringify,EN=a.JSON.parse,bN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Fm(){}Fm.prototype.h=null;function mE(c){return c.h||(c.h=c.i())}function gE(){}var Cc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lm(){Vt.call(this,"d")}S(Lm,Vt);function Vm(){Vt.call(this,"c")}S(Vm,Vt);var wo={},vE=null;function Rl(){return vE=vE||new Ut}wo.La="serverreachability";function yE(c){Vt.call(this,wo.La,c)}S(yE,Vt);function Dc(c){let d=Rl();Zt(d,new yE(d))}wo.STAT_EVENT="statevent";function _E(c,d){Vt.call(this,wo.STAT_EVENT,c),this.stat=d}S(_E,Vt);function Jt(c){let d=Rl();Zt(d,new _E(d,c))}wo.Ma="timingevent";function wE(c,d){Vt.call(this,wo.Ma,c),this.size=d}S(wE,Vt);function Tc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Sc(){this.g=!0}Sc.prototype.xa=function(){this.g=!1};function CN(c,d,f,m,M,P){c.info(function(){if(c.g)if(P)for(var j="",ze=P.split("&"),kt=0;kt<ze.length;kt++){var xe=ze[kt].split("=");if(1<xe.length){var jt=xe[0];xe=xe[1];var Bt=jt.split("_");j=2<=Bt.length&&Bt[1]=="type"?j+(jt+"="+xe+"&"):j+(jt+"=redacted&")}}else j=null;else j=P;return"XMLHTTP REQ ("+m+") [attempt "+M+"]: "+d+`
`+f+`
`+j})}function DN(c,d,f,m,M,P,j){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+M+"]: "+d+`
`+f+`
`+P+" "+j})}function Is(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+SN(c,f)+(m?" "+m:"")})}function TN(c,d){c.info(function(){return"TIMEOUT: "+d})}Sc.prototype.info=function(){};function SN(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var M=m[1];if(Array.isArray(M)&&!(1>M.length)){var P=M[0];if(P!="noop"&&P!="stop"&&P!="close")for(var j=1;j<M.length;j++)M[j]=""}}}}return Om(f)}catch{return d}}var Nl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},IE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Um;function Pl(){}S(Pl,Fm),Pl.prototype.g=function(){return new XMLHttpRequest},Pl.prototype.i=function(){return{}},Um=new Pl;function Si(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new bc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new EE}function EE(){this.i=null,this.g="",this.h=!1}var bE={},jm={};function Bm(c,d,f){c.L=1,c.v=Ll(Kr(d)),c.m=f,c.P=!0,CE(c,null)}function CE(c,d){c.F=Date.now(),kl(c),c.A=Kr(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),VE(f.i,"t",m),c.C=0,f=c.j.J,c.h=new EE,c.g=nb(c.j,f?d:null,!c.m),0<c.O&&(c.M=new IN(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var M="readystatechange";Array.isArray(M)||(M&&(fE[0]=M.toString()),M=fE);for(var P=0;P<M.length;P++){var j=sE(f,M[P],m||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Dc(),CN(c.i,c.u,c.A,c.l,c.R,c.m)}Si.prototype.ca=function(c){c=c.target;let d=this.M;d&&Qr(c)==3?d.j():this.Y(c)},Si.prototype.Y=function(c){try{if(c==this.g)e:{let Bt=Qr(this.g);var d=this.g.Ba();let Cs=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||zE(this.g)))){this.J||Bt!=4||d==7||(d==8||0>=Cs?Dc(3):Dc(2)),$m(this);var f=this.g.Z();this.X=f;t:if(DE(this)){var m=zE(this.g);c="";var M=m.length,P=Qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Io(this),Ac(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<M;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(P&&d==M-1)});m.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,DN(this.i,this.u,this.A,this.l,this.R,Bt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,kt=this.g;if((ze=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(ze)){var xe=ze;break t}}xe=null}if(f=xe)Is(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hm(this,f);else{this.o=!1,this.s=3,Jt(12),Io(this),Ac(this);break e}}if(this.P){f=!0;let Zn;for(;!this.J&&this.C<j.length;)if(Zn=AN(this,j),Zn==jm){Bt==4&&(this.s=4,Jt(14),f=!1),Is(this.i,this.l,null,"[Incomplete Response]");break}else if(Zn==bE){this.s=4,Jt(15),Is(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Is(this.i,this.l,Zn,null),Hm(this,Zn);if(DE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||j.length!=0||this.h.h||(this.s=1,Jt(16),f=!1),this.o=this.o&&f,!f)Is(this.i,this.l,j,"[Invalid Chunked Response]"),Io(this),Ac(this);else if(0<j.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Qm(jt),jt.M=!0,Jt(11))}}else Is(this.i,this.l,j,null),Hm(this,j);Bt==4&&Io(this),this.o&&!this.J&&(Bt==4?JE(this.j,this):(this.o=!1,kl(this)))}else zN(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Jt(12)):(this.s=0,Jt(13)),Io(this),Ac(this)}}}catch{}finally{}};function DE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function AN(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?jm:(f=Number(d.substring(f,m)),isNaN(f)?bE:(m+=1,m+f>d.length?jm:(d=d.slice(m,m+f),c.C=m+f,d)))}Si.prototype.cancel=function(){this.J=!0,Io(this)};function kl(c){c.S=Date.now()+c.I,TE(c,c.I)}function TE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Tc(g(c.ba,c),d)}function $m(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Si.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(TN(this.i,this.A),this.L!=2&&(Dc(),Jt(17)),Io(this),this.s=2,Ac(this)):TE(this,this.S-c)};function Ac(c){c.j.G==0||c.J||JE(c.j,c)}function Io(c){$m(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,pE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Hm(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||qm(f.h,c))){if(!c.K&&qm(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var M=m;if(M[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)$l(f),jl(f);else break e;Km(f),Jt(18)}}else f.za=M[1],0<f.za-f.T&&37500>M[2]&&f.F&&f.v==0&&!f.C&&(f.C=Tc(g(f.Za,f),6e3));if(1>=ME(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else bo(f,11)}else if((c.K||f.g==c)&&$l(f),!Z(d))for(M=f.Da.g.parse(d),d=0;d<M.length;d++){let xe=M[d];if(f.T=xe[0],xe=xe[1],f.G==2)if(xe[0]=="c"){f.K=xe[1],f.ia=xe[2];let jt=xe[3];jt!=null&&(f.la=jt,f.j.info("VER="+f.la));let Bt=xe[4];Bt!=null&&(f.Aa=Bt,f.j.info("SVER="+f.Aa));let Cs=xe[5];Cs!=null&&typeof Cs=="number"&&0<Cs&&(m=1.5*Cs,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Zn=c.g;if(Zn){let ql=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ql){var P=m.h;P.g||ql.indexOf("spdy")==-1&&ql.indexOf("quic")==-1&&ql.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(zm(P,P.h),P.h=null))}if(m.D){let Ym=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ym&&(m.ya=Ym,Qe(m.I,m.D,Ym))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var j=c;if(m.qa=tb(m,m.J?m.ia:null,m.W),j.K){xE(m.h,j);var ze=j,kt=m.L;kt&&(ze.I=kt),ze.B&&($m(ze),kl(ze)),m.g=j}else YE(m);0<f.i.length&&Bl(f)}else xe[0]!="stop"&&xe[0]!="close"||bo(f,7);else f.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?bo(f,7):Gm(f):xe[0]!="noop"&&f.l&&f.l.ta(xe),f.v=0)}}Dc(4)}catch{}}var MN=class{constructor(c,d){this.g=c,this.map=d}};function SE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function AE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ME(c){return c.h?1:c.g?c.g.size:0}function qm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function zm(c,d){c.g?c.g.add(d):c.h=d}function xE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}SE.prototype.cancel=function(){if(this.i=RE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function RE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return O(c.i)}function xN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function RN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function NE(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=RN(c),m=xN(c),M=m.length,P=0;P<M;P++)d.call(void 0,m[P],f&&f[P],c)}var PE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NN(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),M=null;if(0<=m){var P=c[f].substring(0,m);M=c[f].substring(m+1)}else P=c[f];d(P,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Eo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Eo){this.h=c.h,Ol(this,c.j),this.o=c.o,this.g=c.g,Fl(this,c.s),this.l=c.l;var d=c.i,f=new Rc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),kE(this,f),this.m=c.m}else c&&(d=String(c).match(PE))?(this.h=!1,Ol(this,d[1]||"",!0),this.o=Mc(d[2]||""),this.g=Mc(d[3]||"",!0),Fl(this,d[4]),this.l=Mc(d[5]||"",!0),kE(this,d[6]||"",!0),this.m=Mc(d[7]||"")):(this.h=!1,this.i=new Rc(null,this.h))}Eo.prototype.toString=function(){var c=[],d=this.j;d&&c.push(xc(d,OE,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(xc(d,OE,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(xc(f,f.charAt(0)=="/"?ON:kN,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",xc(f,LN)),c.join("")};function Kr(c){return new Eo(c)}function Ol(c,d,f){c.j=f?Mc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Fl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function kE(c,d,f){d instanceof Rc?(c.i=d,VN(c.i,c.h)):(f||(d=xc(d,FN)),c.i=new Rc(d,c.h))}function Qe(c,d,f){c.i.set(d,f)}function Ll(c){return Qe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Mc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,PN),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function PN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var OE=/[#\/\?@]/g,kN=/[#\?:]/g,ON=/[#\?]/g,FN=/[#\?@]/g,LN=/#/g;function Rc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ai(c){c.g||(c.g=new Map,c.h=0,c.i&&NN(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Rc.prototype,t.add=function(c,d){Ai(this),this.i=null,c=Es(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function FE(c,d){Ai(c),d=Es(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function LE(c,d){return Ai(c),d=Es(c,d),c.g.has(d)}t.forEach=function(c,d){Ai(this),this.g.forEach(function(f,m){f.forEach(function(M){c.call(d,M,m,this)},this)},this)},t.na=function(){Ai(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let M=c[m];for(let P=0;P<M.length;P++)f.push(d[m])}return f},t.V=function(c){Ai(this);let d=[];if(typeof c=="string")LE(this,c)&&(d=d.concat(this.g.get(Es(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Ai(this),this.i=null,c=Es(this,c),LE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function VE(c,d,f){FE(c,d),0<f.length&&(c.i=null,c.g.set(Es(c,d),O(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let P=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var M=P;j[m]!==""&&(M+="="+encodeURIComponent(String(j[m]))),c.push(M)}}return this.i=c.join("&")};function Es(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function VN(c,d){d&&!c.j&&(Ai(c),c.i=null,c.g.forEach(function(f,m){var M=m.toLowerCase();m!=M&&(FE(this,m),VE(this,M,f))},c)),c.j=d}function UN(c,d){let f=new Sc;if(a.Image){let m=new Image;m.onload=v(Mi,f,"TestLoadImage: loaded",!0,d,m),m.onerror=v(Mi,f,"TestLoadImage: error",!1,d,m),m.onabort=v(Mi,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=v(Mi,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function jN(c,d){let f=new Sc,m=new AbortController,M=setTimeout(()=>{m.abort(),Mi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(P=>{clearTimeout(M),P.ok?Mi(f,"TestPingServer: ok",!0,d):Mi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),Mi(f,"TestPingServer: error",!1,d)})}function Mi(c,d,f,m,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),m(f)}catch{}}function BN(){this.g=new bN}function $N(c,d,f){let m=f||"";try{NE(c,function(M,P){let j=M;l(M)&&(j=Om(M)),d.push(m+P+"="+encodeURIComponent(j))})}catch(M){throw d.push(m+"type="+encodeURIComponent("_badmap")),M}}function Nc(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Nc,Fm),Nc.prototype.g=function(){return new Vl(this.l,this.j)},Nc.prototype.i=function(c){return function(){return c}}({});function Vl(c,d){Ut.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Vl,Ut),t=Vl.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,kc(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pc(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,kc(this)),this.g&&(this.readyState=3,kc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;UE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function UE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Pc(this):kc(this),this.readyState==3&&UE(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Pc(this))},t.Qa=function(c){this.g&&(this.response=c,Pc(this))},t.ga=function(){this.g&&Pc(this)};function Pc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,kc(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function kc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function jE(c){let d="";return ue(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Wm(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=jE(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Qe(c,d,f))}function nt(c){Ut.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(nt,Ut);var HN=/^https?$/i,qN=["POST","PUT"];t=nt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Um.g(),this.v=this.o?mE(this.o):mE(Um),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(P){BE(this,P);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var M in m)f.set(M,m[M]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let P of m.keys())f.set(P,m.get(P));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),M=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qN,d,void 0))||m||M||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[P,j]of f)this.g.setRequestHeader(P,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qE(this),this.u=!0,this.g.send(c),this.u=!1}catch(P){BE(this,P)}};function BE(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,$E(c),Ul(c)}function $E(c){c.A||(c.A=!0,Zt(c,"complete"),Zt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Zt(this,"complete"),Zt(this,"abort"),Ul(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ul(this,!0)),nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?HE(this):this.bb())},t.bb=function(){HE(this)};function HE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Qr(c)!=4||c.Z()!=2)){if(c.u&&Qr(c)==4)dE(c.Ea,0,c);else if(Zt(c,"readystatechange"),Qr(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=j===0){var M=String(c.D).match(PE)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),m=!HN.test(M?M.toLowerCase():"")}f=m}if(f)Zt(c,"complete"),Zt(c,"success");else{c.m=6;try{var P=2<Qr(c)?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.Z()+"]",$E(c)}}finally{Ul(c)}}}}function Ul(c,d){if(c.g){qE(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Zt(c,"ready");try{f.onreadystatechange=m}catch{}}}function qE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Qr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Qr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),EN(d)}};function zE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function zN(c){let d={};c=(c.g&&2<=Qr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(Z(c[m]))continue;var f=A(c[m]);let M=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let P=d[M]||[];d[M]=P,P.push(f)}D(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function WE(c){this.Aa=0,this.i=[],this.j=new Sc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oc("baseRetryDelayMs",5e3,c),this.cb=Oc("retryDelaySeedMs",1e4,c),this.Wa=Oc("forwardChannelMaxRetries",2,c),this.wa=Oc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new SE(c&&c.concurrentRequestLimit),this.Da=new BN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=WE.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){Jt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=tb(this,null,this.W),Bl(this)};function Gm(c){if(GE(c),c.G==3){var d=c.U++,f=Kr(c.I);if(Qe(f,"SID",c.K),Qe(f,"RID",d),Qe(f,"TYPE","terminate"),Fc(c,f),d=new Si(c,c.j,d),d.L=2,d.v=Ll(Kr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=nb(d.j,null),d.g.ea(d.v)),d.F=Date.now(),kl(d)}eb(c)}function jl(c){c.g&&(Qm(c),c.g.cancel(),c.g=null)}function GE(c){jl(c),c.u&&(a.clearTimeout(c.u),c.u=null),$l(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Bl(c){if(!AE(c.h)&&!c.s){c.s=!0;var d=c.Ga;_c||oE(),wc||(_c(),wc=!0),Tm.add(d,c),c.B=0}}function WN(c,d){return ME(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Tc(g(c.Ga,c,d),XE(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let M=new Si(this,this.j,c),P=this.o;if(this.S&&(P?(P=y(P),C(P,this.S)):P=this.S),this.m!==null||this.O||(M.H=P,P=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=QE(this,M,d),f=Kr(this.I),Qe(f,"RID",c),Qe(f,"CVER",22),this.D&&Qe(f,"X-HTTP-Session-Id",this.D),Fc(this,f),P&&(this.O?d="headers="+encodeURIComponent(String(jE(P)))+"&"+d:this.m&&Wm(f,this.m,P)),zm(this.h,M),this.Ua&&Qe(f,"TYPE","init"),this.P?(Qe(f,"$req",d),Qe(f,"SID","null"),M.T=!0,Bm(M,f,null)):Bm(M,f,d),this.G=2}}else this.G==3&&(c?KE(this,c):this.i.length==0||AE(this.h)||KE(this))};function KE(c,d){var f;d?f=d.l:f=c.U++;let m=Kr(c.I);Qe(m,"SID",c.K),Qe(m,"RID",f),Qe(m,"AID",c.T),Fc(c,m),c.m&&c.o&&Wm(m,c.m,c.o),f=new Si(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=QE(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),zm(c.h,f),Bm(f,m,d)}function Fc(c,d){c.H&&ue(c.H,function(f,m){Qe(d,m,f)}),c.l&&NE({},function(f,m){Qe(d,m,f)})}function QE(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var M=c.i;let P=-1;for(;;){let j=["count="+f];P==-1?0<f?(P=M[0].g,j.push("ofs="+P)):P=0:j.push("ofs="+P);let ze=!0;for(let kt=0;kt<f;kt++){let xe=M[kt].g,jt=M[kt].map;if(xe-=P,0>xe)P=Math.max(0,M[kt].g-100),ze=!1;else try{$N(jt,j,"req"+xe+"_")}catch{m&&m(jt)}}if(ze){m=j.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function YE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;_c||oE(),wc||(_c(),wc=!0),Tm.add(d,c),c.v=0}}function Km(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Tc(g(c.Fa,c),XE(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,ZE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Tc(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jt(10),jl(this),ZE(this))};function Qm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function ZE(c){c.g=new Si(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Kr(c.qa);Qe(d,"RID","rpc"),Qe(d,"SID",c.K),Qe(d,"AID",c.T),Qe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Qe(d,"TO",c.ja),Qe(d,"TYPE","xmlhttp"),Fc(c,d),c.m&&c.o&&Wm(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Ll(Kr(d)),f.m=null,f.P=!0,CE(f,c)}t.Za=function(){this.C!=null&&(this.C=null,jl(this),Km(this),Jt(19))};function $l(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function JE(c,d){var f=null;if(c.g==d){$l(c),Qm(c),c.g=null;var m=2}else if(qm(c.h,d))f=d.D,xE(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var M=c.B;m=Rl(),Zt(m,new wE(m,f)),Bl(c)}else YE(c);else if(M=d.s,M==3||M==0&&0<d.X||!(m==1&&WN(c,d)||m==2&&Km(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),M){case 1:bo(c,5);break;case 4:bo(c,10);break;case 3:bo(c,6);break;default:bo(c,2)}}}function XE(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function bo(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let M=!m;m=new Eo(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ol(m,"https"),Ll(m),M?UN(m.toString(),f):jN(m.toString(),f)}else Jt(2);c.G=0,c.l&&c.l.sa(d),eb(c),GE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function eb(c){if(c.G=0,c.ka=[],c.l){let d=RE(c.h);(d.length!=0||c.i.length!=0)&&(k(c.ka,d),k(c.ka,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.ra()}}function tb(c,d,f){var m=f instanceof Eo?Kr(f):new Eo(f);if(m.g!="")d&&(m.g=d+"."+m.g),Fl(m,m.s);else{var M=a.location;m=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;var P=new Eo(null);m&&Ol(P,m),d&&(P.g=d),M&&Fl(P,M),f&&(P.l=f),m=P}return f=c.D,d=c.ya,f&&d&&Qe(m,f,d),Qe(m,"VER",c.la),Fc(c,m),m}function nb(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new nt(new Nc({eb:f})):new nt(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rb(){}t=rb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hl(){}Hl.prototype.g=function(c,d){return new Cn(c,d)};function Cn(c,d){Ut.call(this),this.g=new WE(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!Z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new bs(this)}S(Cn,Ut),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Gm(this.g)},Cn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Om(c),c=f);d.i.push(new MN(d.Ya++,c)),d.G==3&&Bl(d)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Gm(this.g),delete this.g,Cn.aa.N.call(this)};function ib(c){Lm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(ib,Lm);function ob(){Vm.call(this),this.status=1}S(ob,Vm);function bs(c){this.g=c}S(bs,rb),bs.prototype.ua=function(){Zt(this.g,"a")},bs.prototype.ta=function(c){Zt(this.g,new ib(c))},bs.prototype.sa=function(c){Zt(this.g,new ob)},bs.prototype.ra=function(){Zt(this.g,"b")},Hl.prototype.createWebChannel=Hl.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,kw=wi.createWebChannelTransport=function(){return new Hl},Pw=wi.getStatEventTarget=function(){return Rl()},Nw=wi.Event=wo,Hf=wi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nl.NO_ERROR=0,Nl.TIMEOUT=8,Nl.HTTP_ERROR=6,zu=wi.ErrorCode=Nl,IE.COMPLETE="complete",Rw=wi.EventType=IE,gE.EventType=Cc,Cc.OPEN="a",Cc.CLOSE="b",Cc.ERROR="c",Cc.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,ja=wi.WebChannel=gE,N4=wi.FetchXmlHttpFactory=Nc,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,xw=wi.XhrIo=nt}).apply(typeof $f<"u"?$f:typeof self<"u"?self:typeof window<"u"?window:{});var Ix="@firebase/firestore";var Nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");var rc="10.14.0";var us=new Zi("@firebase/firestore");function Wu(){return us.logLevel}function K(t,...e){if(us.logLevel<=Te.DEBUG){let n=e.map(II);us.debug(`Firestore (${rc}): ${t}`,...n)}}function Ii(t,...e){if(us.logLevel<=Te.ERROR){let n=e.map(II);us.error(`Firestore (${rc}): ${t}`,...n)}}function Wa(t,...e){if(us.logLevel<=Te.WARN){let n=e.map(II);us.warn(`Firestore (${rc}): ${t}`,...n)}}function II(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ie(t="Unexpected state"){let e=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: `+t;throw Ii(e),new Error(e)}function $e(t,e){t||ie()}function se(t,e){return t}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends Pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Kn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Kf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Uw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}},jw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Bw=class{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Kn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Kn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>I(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Kn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new Kf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Nt(e)}},$w=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Hw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new $w(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},zw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){$e(this.o===void 0);let r=o=>{o.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,K("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string"),this.R=n.token,new qw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function P4(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Qf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=P4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function Ne(t,e){return t<e?-1:t>e?1:0}function Ga(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ft=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var fe=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ft(0,0))}static max(){return new t(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Yf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},et=class t extends Yf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},k4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,On=class t extends Yf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return k4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new $(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var ee=class t{constructor(e){this.path=e}static fromPath(e){return new t(et.fromString(e))}static fromName(e){return new t(et.fromString(e).popFirst(5))}static empty(){return new t(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new et(e.slice()))}};var Ww=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Ww.UNKNOWN_ID=-1;function O4(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(r===1e9?new Ft(n+1,0):new Ft(n,r));return new ls(i,ee.empty(),e)}function F4(t){return new ls(t.readTime,t.key,-1)}var ls=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(fe.min(),ee.empty(),-1)}static max(){return new t(fe.max(),ee.empty(),-1)}};function L4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}var V4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function fl(t){return I(this,null,function*(){if(t.code!==F.FAILED_PRECONDITION||t.message!==V4)throw t;K("LocalStore","Unexpectedly lost primary lease")})}var V=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function U4(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pl(t){return t.name==="IndexedDbTransactionError"}var n1=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Ap(t){return t==null}function Ju(t){return t===0&&1/t==-1/0}function j4(t){return typeof t=="number"&&Number.isInteger(t)&&!Ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var B4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],WZ=[...B4,"documentOverlays"],$4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],H4=$4,q4=[...H4,"indexConfiguration","indexState","indexEntries"];var GZ=[...q4,"globals"];function Ex(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gs(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function z4(t,e){let n=[];for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function r1(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var at=class t{constructor(e,n){this.comparator=e,this.root=n||Fr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ha(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ha(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ha(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ha(this.root,e,this.comparator,!0)}},Ha=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Fr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();let e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}};Fr.EMPTY=null,Fr.RED=!0,Fr.BLACK=!1;Fr.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Fr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Gt=class t{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zf(this.data.getIterator())}getIteratorFrom(e){return new Zf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Zf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gn=class t{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new t([])}unionWith(e){let n=new Gt(On.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ga(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Jf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Qt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Jf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qt.EMPTY_BYTE_STRING=new Qt("");var W4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(t){if($e(!!t),typeof t=="string"){let e=0,n=W4.exec(t);if($e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function co(t){return typeof t=="string"?Qt.fromBase64String(t):Qt.fromUint8Array(t)}function EI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bI(t){let e=t.mapValue.fields.__previous_value__;return EI(e)?bI(e):e}function Xu(t){let e=Ei(t.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}var Kw=class{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Xf=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var qf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?EI(t)?4:o1(t)?9007199254740991:i1(t)?10:11:ie()}function jr(t,e){if(t===e)return!0;let n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xu(t).isEqual(Xu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ei(i.timestampValue),a=Ei(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return co(i.bytesValue).isEqual(co(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ze(i.geoPointValue.latitude)===Ze(o.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ze(i.integerValue)===Ze(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ze(i.doubleValue),a=Ze(o.doubleValue);return s===a?Ju(s)===Ju(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ga(t.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Ex(s)!==Ex(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!jr(s[u],a[u])))return!1;return!0}(t,e);default:return ie()}}function el(t,e){return(t.values||[]).find(n=>jr(n,e))!==void 0}function Ka(t,e){if(t===e)return 0;let n=ds(t),r=ds(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ze(o.integerValue||o.doubleValue),u=Ze(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return bx(t.timestampValue,e.timestampValue);case 4:return bx(Xu(t),Xu(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(o,s){let a=co(o),u=co(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=Ne(a[l],u[l]);if(h!==0)return h}return Ne(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Ne(Ze(o.latitude),Ze(s.latitude));return a!==0?a:Ne(Ze(o.longitude),Ze(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cx(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=g.value)===null||u===void 0?void 0:u.arrayValue,O=Ne(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return O!==0?O:Cx(v,S)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===qf.mapValue&&s===qf.mapValue)return 0;if(o===qf.mapValue)return 1;if(s===qf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=Ne(u[p],h[p]);if(g!==0)return g;let v=Ka(a[u[p]],l[h[p]]);if(v!==0)return v}return Ne(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ie()}}function bx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);let n=Ei(t),r=Ei(e),i=Ne(n.seconds,r.seconds);return i!==0?i:Ne(n.nanos,r.nanos)}function Cx(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ka(n[i],r[i]);if(o)return o}return Ne(n.length,r.length)}function Qa(t){return Qw(t)}function Qw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Ei(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return co(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Qw(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Qw(n.fields[s])}`;return i+"}"}(t.mapValue):ie()}function Dx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yw(t){return!!t&&"integerValue"in t}function CI(t){return!!t&&"arrayValue"in t}function Tx(t){return!!t&&"nullValue"in t}function Sx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wf(t){return!!t&&"mapValue"in t}function i1(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ku(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return gs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ku(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ku(t.arrayValue.values[n]);return e}return Object.assign({},t)}function o1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var kn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ku(n)}setAll(e){let n=On.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Ku(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Wf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Wf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){gs(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Ku(this.value))}};function s1(t){let e=[];return gs(t.fields,(n,r)=>{let i=new On([n]);if(Wf(r)){let o=s1(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gn(e)}var dr=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,fe.min(),fe.min(),fe.min(),kn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,fe.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,fe.min(),fe.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,fe.min(),fe.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ya=class{constructor(e,n){this.position=e,this.inclusive=n}};function Ax(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=ee.comparator(ee.fromName(s.referenceValue),n.key):r=Ka(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jr(t.position[n],e.position[n]))return!1;return!0}var hs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function G4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ep=class{},bt=class t extends ep{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Jw(e,n,r):n==="array-contains"?new t0(e,r):n==="in"?new n0(e,r):n==="not-in"?new r0(e,r):n==="array-contains-any"?new i0(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Xw(e,r):new e0(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ka(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(Ka(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},hr=class t extends ep{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return a1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function a1(t){return t.op==="and"}function c1(t){return K4(t)&&a1(t)}function K4(t){for(let e of t.filters)if(e instanceof hr)return!1;return!0}function Zw(t){if(t instanceof bt)return t.field.canonicalString()+t.op.toString()+Qa(t.value);if(c1(t))return t.filters.map(e=>Zw(e)).join(",");{let e=t.filters.map(n=>Zw(n)).join(",");return`${t.op}(${e})`}}function u1(t,e){return t instanceof bt?function(r,i){return i instanceof bt&&r.op===i.op&&r.field.isEqual(i.field)&&jr(r.value,i.value)}(t,e):t instanceof hr?function(r,i){return i instanceof hr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&u1(s,i.filters[a]),!0):!1}(t,e):void ie()}function l1(t){return t instanceof bt?function(n){return`${n.field.canonicalString()} ${n.op} ${Qa(n.value)}`}(t):t instanceof hr?function(n){return n.op.toString()+" {"+n.getFilters().map(l1).join(" ,")+"}"}(t):"Filter"}var Jw=class extends bt{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){let n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}},Xw=class extends bt{constructor(e,n){super(e,"in",n),this.keys=d1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},e0=class extends bt{constructor(e,n){super(e,"not-in",n),this.keys=d1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function d1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}var t0=class extends bt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return CI(n)&&el(n.arrayValue,this.value)}},n0=class extends bt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&el(this.value.arrayValue,n)}},r0=class extends bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(el(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!el(this.value.arrayValue,n)}},i0=class extends bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!CI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>el(this.value.arrayValue,r))}};var o0=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function xx(t,e=null,n=[],r=[],i=null,o=null,s=null){return new o0(t,e,n,r,i,o,s)}function DI(t){let e=se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ap(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qa(r)).join(",")),e.ue=n}return e.ue}function TI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!G4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!u1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mx(t.startAt,e.startAt)&&Mx(t.endAt,e.endAt)}function s0(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var uo=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Q4(t,e,n,r,i,o,s,a){return new uo(t,e,n,r,i,o,s,a)}function Mp(t){return new uo(t)}function Rx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function h1(t){return t.collectionGroup!==null}function Qu(t){let e=se(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Gt(On.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new hs(o,r))}),n.has(On.keyField().canonicalString())||e.ce.push(new hs(On.keyField(),r))}return e.ce}function Lr(t){let e=se(t);return e.le||(e.le=f1(e,Qu(t))),e.le}function Y4(t){let e=se(t);return e.he||(e.he=f1(e,t.explicitOrderBy)),e.he}function f1(t,e){if(t.limitType==="F")return xx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new hs(i.field,o)});let n=t.endAt?new Ya(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ya(t.startAt.position,t.startAt.inclusive):null;return xx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function a0(t,e){let n=t.filters.concat([e]);return new uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function c0(t,e,n){return new uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xp(t,e){return TI(Lr(t),Lr(e))&&t.limitType===e.limitType}function p1(t){return`${DI(Lr(t))}|lt:${t.limitType}`}function Ba(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>l1(i)).join(", ")}]`),Ap(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Qa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Qa(i)).join(",")),`Target(${r})`}(Lr(t))}; limitType=${t.limitType})`}function Rp(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Qu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=Ax(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Qu(r),i)||r.endAt&&!function(s,a,u){let l=Ax(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Qu(r),i))}(t,e)}function Z4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function m1(t){return(e,n)=>{let r=!1;for(let i of Qu(t)){let o=J4(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function J4(t,e,n){let r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ka(u,l):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}var lo=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gs(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return r1(this.inner)}size(){return this.innerSize}};var X4=new at(ee.comparator);function bi(){return X4}var g1=new at(ee.comparator);function Gu(...t){let e=g1;for(let n of t)e=e.insert(n.key,n);return e}function v1(t){let e=g1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ss(){return Yu()}function y1(){return Yu()}function Yu(){return new lo(t=>t.toString(),(t,e)=>t.isEqual(e))}var eH=new at(ee.comparator),tH=new Gt(ee.comparator);function Se(...t){let e=tH;for(let n of t)e=e.add(n);return e}var nH=new Gt(Ne);function rH(){return nH}function SI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function _1(t){return{integerValue:""+t}}function iH(t,e){return j4(e)?_1(e):SI(t,e)}var Za=class{constructor(){this._=void 0}};function oH(t,e,n){return t instanceof fs?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&EI(o)&&(o=bI(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ho?I1(t,e):t instanceof fo?E1(t,e):function(i,o){let s=w1(i,o),a=Nx(s)+Nx(i.Pe);return Yw(s)&&Yw(i.Pe)?_1(a):SI(i.serializer,a)}(t,e)}function sH(t,e,n){return t instanceof ho?I1(t,e):t instanceof fo?E1(t,e):n}function w1(t,e){return t instanceof Ja?function(r){return Yw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var fs=class extends Za{},ho=class extends Za{constructor(e){super(),this.elements=e}};function I1(t,e){let n=b1(e);for(let r of t.elements)n.some(i=>jr(i,r))||n.push(r);return{arrayValue:{values:n}}}var fo=class extends Za{constructor(e){super(),this.elements=e}};function E1(t,e){let n=b1(e);for(let r of t.elements)n=n.filter(i=>!jr(i,r));return{arrayValue:{values:n}}}var Ja=class extends Za{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function Nx(t){return Ze(t.integerValue||t.doubleValue)}function b1(t){return CI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var tl=class{constructor(e,n){this.field=e,this.transform=n}};function aH(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ho&&i instanceof ho||r instanceof fo&&i instanceof fo?Ga(r.elements,i.elements,jr):r instanceof Ja&&i instanceof Ja?jr(r.Pe,i.Pe):r instanceof fs&&i instanceof fs}(t.transform,e.transform)}var u0=class{constructor(e,n){this.version=e,this.transformResults=n}},Vr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Xa=class{};function C1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nl(t.key,Vr.none()):new ps(t.key,t.data,Vr.none());{let n=t.data,r=kn.empty(),i=new Gt(On.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Br(t.key,r,new Gn(i.toArray()),Vr.none())}}function cH(t,e,n){t instanceof ps?function(i,o,s){let a=i.value.clone(),u=kx(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Br?function(i,o,s){if(!Gf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=kx(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(D1(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Zu(t,e,n,r){return t instanceof ps?function(o,s,a,u){if(!Gf(o.precondition,s))return a;let l=o.value.clone(),h=Ox(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Br?function(o,s,a,u){if(!Gf(o.precondition,s))return a;let l=Ox(o.fieldTransforms,u,s),h=s.data;return h.setAll(D1(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return Gf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function uH(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=w1(r.transform,i||null);o!=null&&(n===null&&(n=kn.empty()),n.set(r.field,o))}return n||null}function Px(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ga(r,i,(o,s)=>aH(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ps=class extends Xa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Br=class extends Xa{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function D1(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function kx(t,e,n){let r=new Map;$e(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,sH(s,a,n[i]))}return r}function Ox(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,oH(o,s,e))}return r}var nl=class extends Xa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},l0=class extends Xa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var d0=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&cH(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Zu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Zu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=y1();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=C1(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&Ga(this.mutations,e.mutations,(n,r)=>Px(n,r))&&Ga(this.baseMutations,e.baseMutations,(n,r)=>Px(n,r))}},h0=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){$e(e.mutations.length===r.length);let i=function(){return eH}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var f0=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var p0=class{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}};var m0=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var It,Me;function lH(t){switch(t){default:return ie();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function T1(t){if(t===void 0)return Ii("GRPC error has no .code"),F.UNKNOWN;switch(t){case It.OK:return F.OK;case It.CANCELLED:return F.CANCELLED;case It.UNKNOWN:return F.UNKNOWN;case It.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case It.INTERNAL:return F.INTERNAL;case It.UNAVAILABLE:return F.UNAVAILABLE;case It.UNAUTHENTICATED:return F.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case It.NOT_FOUND:return F.NOT_FOUND;case It.ALREADY_EXISTS:return F.ALREADY_EXISTS;case It.PERMISSION_DENIED:return F.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case It.ABORTED:return F.ABORTED;case It.OUT_OF_RANGE:return F.OUT_OF_RANGE;case It.UNIMPLEMENTED:return F.UNIMPLEMENTED;case It.DATA_LOSS:return F.DATA_LOSS;default:return ie()}}(Me=It||(It={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";var Fx=null;function dH(){return new TextEncoder}var hH=new oo([4294967295,4294967295],0);function Lx(t){let e=dH().encode(t),n=new Mw;return n.update(e),new Uint8Array(n.digest())}function Vx(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new oo([n,r],0),new oo([i,o],0)]}var g0=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new as(`Invalid padding: ${n}`);if(r<0)throw new as(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new as(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new as(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=oo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(oo.fromNumber(r)));return i.compare(hH)===1&&(i=new oo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=Lx(e),[r,i]=Vx(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=Lx(e),[r,i]=Vx(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},as=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var tp=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,rl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(fe.min(),i,new at(Ne),bi(),Se())}},rl=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Se(),Se(),Se())}};var qa=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},np=class{constructor(e,n){this.targetId=e,this.me=n}},rp=class{constructor(e,n,r=Qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ip=class{constructor(){this.fe=0,this.ge=jx(),this.pe=Qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),n=Se(),r=Se();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ie()}}),new rl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=jx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},v0=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=bi(),this.qe=Ux(),this.Qe=new at(Ne)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(s0(o))if(r===0){let s=new ee(o.path);this.Ue(n,s,dr.newNoDocument(s,fe.min()))}else $e(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}Fx?.et(function(h,p,g,v,S){var O,k,B,Z,te,Ce;let tt={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},ue=p.unchangedNames;return ue&&(tt.bloomFilter={applied:S===0,hashCount:(O=ue?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(Z=(B=(k=ue?.bits)===null||k===void 0?void 0:k.bitmap)===null||B===void 0?void 0:B.length)!==null&&Z!==void 0?Z:0,padding:(Ce=(te=ue?.bits)===null||te===void 0?void 0:te.padding)!==null&&Ce!==void 0?Ce:0,mightContain:D=>{var y;return(y=v?.mightContain(D))!==null&&y!==void 0&&y}}),tt}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=co(r).toUint8Array()}catch(u){if(u instanceof Jf)return Wa("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new g0(s,i,o)}catch(u){return Wa(u instanceof as?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&s0(a.target)){let u=new ee(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,dr.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=Se();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new tp(e,n,this.Qe,this.ke,r);return this.ke=bi(),this.qe=Ux(),this.Qe=new at(Ne),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ip,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Gt(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ip),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function Ux(){return new at(ee.comparator)}function jx(){return new at(ee.comparator)}var fH={asc:"ASCENDING",desc:"DESCENDING"},pH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mH={and:"AND",or:"OR"},y0=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function _0(t,e){return t.useProto3Json||Ap(e)?e:{value:e}}function op(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gH(t,e){return op(t,e.toTimestamp())}function Ur(t){return $e(!!t),fe.fromTimestamp(function(n){let r=Ei(n);return new Ft(r.seconds,r.nanos)}(t))}function AI(t,e){return w0(t,e).canonicalString()}function w0(t,e){let n=function(i){return new et(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function A1(t){let e=et.fromString(t);return $e(k1(e)),e}function I0(t,e){return AI(t.databaseId,e.path)}function Ow(t,e){let n=A1(e);if(n.get(1)!==t.databaseId.projectId)throw new $(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(x1(n))}function M1(t,e){return AI(t.databaseId,e)}function vH(t){let e=A1(t);return e.length===4?et.emptyPath():x1(e)}function E0(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function x1(t){return $e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Bx(t,e,n){return{name:I0(t,e),fields:n.value.mapValue.fields}}function yH(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?($e(h===void 0||typeof h=="string"),Qt.fromBase64String(h||"")):($e(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Qt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?F.UNKNOWN:T1(l.code);return new $(h,l.message||"")}(s);n=new rp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ow(t,r.document.name),o=Ur(r.document.updateTime),s=r.document.createTime?Ur(r.document.createTime):fe.min(),a=new kn({mapValue:{fields:r.document.fields}}),u=dr.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new qa(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ow(t,r.document),o=r.readTime?Ur(r.readTime):fe.min(),s=dr.newNoDocument(i,o),a=r.removedTargetIds||[];n=new qa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ow(t,r.document),o=r.removedTargetIds||[];n=new qa([],o,i,null)}else{if(!("filter"in e))return ie();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new m0(i,o),a=r.targetId;n=new np(a,s)}}return n}function _H(t,e){let n;if(e instanceof ps)n={update:Bx(t,e.key,e.value)};else if(e instanceof nl)n={delete:I0(t,e.key)};else if(e instanceof Br)n={update:Bx(t,e.key,e.data),updateMask:AH(e.fieldMask)};else{if(!(e instanceof l0))return ie();n={verify:I0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof fs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ho)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof fo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ja)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:gH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ie()}(t,e.precondition)),n}function wH(t,e){return t&&t.length>0?($e(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Ur(i.updateTime):Ur(o);return s.isEqual(fe.min())&&(s=Ur(o)),new u0(s,i.transformResults||[])}(n,e))):[]}function IH(t,e){return{documents:[M1(t,e.path)]}}function R1(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=M1(t,i);let o=function(l){if(l.length!==0)return P1(hr.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:so(g.field),direction:DH(g.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=_0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function EH(t,e,n,r){let{_t:i,parent:o}=R1(t,e),s={},a=[],u=0;return n.forEach(l=>{let h=r?l.alias:"aggregate_"+u++;s[h]=l.alias,l.aggregateType==="count"?a.push({alias:h,count:{}}):l.aggregateType==="avg"?a.push({alias:h,avg:{field:so(l.fieldPath)}}):l.aggregateType==="sum"&&a.push({alias:h,sum:{field:so(l.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},ut:s,parent:o}}function bH(t){let e=vH(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$e(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let g=N1(p);return g instanceof hr&&c1(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(S){return new hs($a(S.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Ap(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){let g=!!p.before,v=p.values||[];return new Ya(v,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,v=p.values||[];return new Ya(v,g)}(n.endAt)),Q4(e,i,s,o,a,"F",u,l)}function CH(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function N1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=$a(n.unaryFilter.field);return bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=$a(n.unaryFilter.field);return bt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=$a(n.unaryFilter.field);return bt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=$a(n.unaryFilter.field);return bt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return bt.create($a(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hr.create(n.compositeFilter.filters.map(r=>N1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function DH(t){return fH[t]}function TH(t){return pH[t]}function SH(t){return mH[t]}function so(t){return{fieldPath:t.canonicalString()}}function $a(t){return On.fromServerFormat(t.fieldPath)}function P1(t){return t instanceof bt?function(n){if(n.op==="=="){if(Sx(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NAN"}};if(Tx(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sx(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NAN"}};if(Tx(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(n.field),op:TH(n.op),value:n.value}}}(t):t instanceof hr?function(n){let r=n.getFilters().map(i=>P1(i));return r.length===1?r[0]:{compositeFilter:{op:SH(n.op),filters:r}}}(t):ie()}function AH(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function k1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var il=class t{constructor(e,n,r,i,o=fe.min(),s=fe.min(),a=Qt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var b0=class{constructor(e){this.ct=e}};function MH(t){let e=bH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?c0(e,e.limit,"L"):e}var sp=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ze(e.integerValue));else if("doubleValue"in e){let r=Ze(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Ju(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Ei(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(co(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?o1(e)?this.dt(n,Number.MAX_SAFE_INTEGER):i1(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ie()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let o=e.fields||{};this.dt(n,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ze(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),ee.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};sp.vt=new sp;var C0=class{constructor(){this.un=new D0}addToCollectionParentIndex(e,n){return this.un.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(ls.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}},D0=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Gt(et.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gt(et.comparator)).toArray()}};var QZ=new Uint8Array(0);var Or=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Or.DEFAULT_COLLECTION_PERCENTILE=10,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Or.DEFAULT=new Or(41943040,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Or.DISABLED=new Or(-1,0,0);var ol=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var T0=class{constructor(){this.changes=new lo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var S0=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var A0=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Zu(r.mutation,i,Gn.empty(),Ft.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Se()){let i=ss();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Gu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=ss();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Se()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=bi(),s=Yu(),a=function(){return Yu()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Br)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Zu(h.mutation,l,h.mutation.getFieldMask(),Ft.now())):s.set(l.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new S0(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Yu(),i=new at((s,a)=>s-a),o=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Gn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||Se()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=y1();h.forEach(g=>{if(!o.has(g)){let v=C1(n.get(g),r.get(g));v!==null&&p.set(g,v),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):h1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):V.resolve(ss()),a=-1,u=o;return s.next(l=>V.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Se())).next(h=>({batchId:a,changes:v1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=Gu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Gu();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,u=>{let l=function(p,g){return new uo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,dr.newInvalidDocument(h)))});let a=Gu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Zu(h.mutation,l,Gn.empty(),Ft.now()),Rp(n,l)&&(a=a.insert(u,l))}),a})}};var M0=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return V.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ur(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:MH(i.bundledQuery),readTime:Ur(i.readTime)}}(n)),V.resolve()}};var x0=class{constructor(){this.overlays=new at(ee.comparator),this.Ir=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ss();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),V.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){let i=ss(),o=n.length+1,s=new ee(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new at((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ss(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ss(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return V.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new f0(n,r));let o=this.Ir.get(n);o===void 0&&(o=Se(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}};var R0=class{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}};var sl=class{constructor(){this.Tr=new Gt(Et.Er),this.dr=new Gt(Et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Et(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Et(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new ee(new et([])),r=new Et(n,e),i=new Et(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new ee(new et([])),r=new Et(n,e),i=new Et(n,e+1),o=Se();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Et(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Et=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||Ne(e.wr,n.wr)}static Ar(e,n){return Ne(e.wr,n.wr)||ee.comparator(e.key,n.key)}};var N0=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Gt(Et.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new d0(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,n){return V.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Et(n,0),i=new Et(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gt(Ne);return n.forEach(i=>{let o=new Et(i,0),s=new Et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;ee.isDocumentKey(o)||(o=o.child(""));let s=new Et(new ee(o),0),a=new Gt(Ne);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),V.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){$e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(n.mutations,i=>{let o=new Et(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Et(n,0),i=this.br.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var P0=class{constructor(e){this.Mr=e,this.docs=function(){return new at(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():dr.newInvalidDocument(n))}getEntries(e,n){let r=bi();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():dr.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=bi(),s=n.path,a=new ee(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||L4(F4(h),r)<=0||(i.has(h.key)||Rp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ie()}Or(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new k0(this)}getSize(e){return V.resolve(this.size)}},k0=class extends T0{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var O0=class{constructor(e){this.persistence=e,this.Nr=new lo(n=>DI(n),TI),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new sl,this.targetCount=0,this.kr=ol.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),V.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new ol(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Kn(n),V.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),V.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Br.containsKey(n))}};var F0=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new n1(0),this.Kr=!1,this.Kr=!0,this.$r=new R0,this.referenceDelegate=e(this),this.Ur=new O0(this),this.indexManager=new C0,this.remoteDocumentCache=function(i){return new P0(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new b0(n),this.Gr=new M0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new x0,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new N0(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);let i=new L0(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},L0=class extends Gw{constructor(e){super(),this.currentSequenceNumber=e}},V0=class t{constructor(e){this.persistence=e,this.Jr=new sl,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{let i=ee.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,fe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return V.or([()=>V.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var U0=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Se(),i=Se();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var j0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var B0=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return QA()?8:U4(Rt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new j0;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Wu()<=Te.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Ba(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Wu()<=Te.DEBUG&&K("QueryEngine","Query:",Ba(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Wu()<=Te.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Ba(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lr(n))):V.resolve())}Yi(e,n){if(Rx(n))return V.resolve(null);let r=Lr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=c0(n,null,"F"),r=Lr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Se(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,s,u.readTime)?this.Yi(e,c0(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return Rx(n)||i.isEqual(fe.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(n,o);return this.ns(n,s,r,i)?V.resolve(null):(Wu()<=Te.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ba(n)),this.rs(e,s,n,O4(i,-1)).next(a=>a))})}ts(e,n){let r=new Gt(m1(e));return n.forEach((i,o)=>{Rp(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return Wu()<=Te.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Ba(n)),this.Ji.getDocumentsMatchingQuery(e,n,ls.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var $0=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new at(Ne),this._s=new lo(o=>DI(o),TI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A0(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function xH(t,e,n,r){return new $0(t,e,n,r)}function O1(t,e){return I(this,null,function*(){let n=se(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=Se();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function RH(t,e){let n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),v=V.resolve();return g.forEach(S=>{v=v.next(()=>h.getEntry(u,S)).next(O=>{let k=l.docVersions.get(S);$e(k!==null),O.version.compareTo(k)<0&&(p.applyToRemoteDocument(O,l),O.isValidDocument()&&(O.setReadTime(l.commitVersion),h.addEntry(O)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function F1(t){let e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function NH(t,e){let n=se(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Qt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(O,k,B){return O.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(g,v,h)&&a.push(n.Ur.updateTargetData(o,v))});let u=bi(),l=Se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(PH(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(fe.min())){let h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.os=i,o))}function PH(t,e,n){let r=Se(),i=Se();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=bi();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(fe.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function kH(t,e){let n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OH(t,e){let n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new il(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function H0(t,e,n){return I(this,null,function*(){let r=se(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!pl(s))throw s;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function $x(t,e,n){let r=se(t),i=fe.min(),o=Se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=se(u),g=p._s.get(h);return g!==void 0?V.resolve(p.os.get(g)):p.Ur.getTargetData(l,h)}(r,s,Lr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:fe.min(),n?o:Se())).next(a=>(FH(r,Z4(e),a),{documents:a,Ts:o})))}function FH(t,e,n){let r=t.us.get(e)||fe.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}var ap=class{constructor(){this.activeTargetIds=rH()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var q0=class{constructor(){this.so=new ap,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ap,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var z0=class{_o(e){}shutdown(){}};var cp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var zf=null;function Fw(){return zf===null?zf=function(){return 268435456+Math.round(2147483648*Math.random())}():zf++,"0x"+zf.toString(16)}var LH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var W0=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Wt="WebChannelConnection",G0=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){let a=Fw(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(n,u,l,i).then(h=>(K("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Wa("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){let i=LH[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let o=Fw();return new Promise((s,a)=>{let u=new xw;u.setWithCredentials(!0),u.listenOnce(Rw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case zu.NO_ERROR:let h=u.getResponseJson();K(Wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case zu.TIMEOUT:K(Wt,`RPC '${e}' ${o} timed out`),a(new $(F.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:let p=u.getStatus();if(K(Wt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let v=g?.error;if(v&&v.status&&v.message){let S=function(k){let B=k.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(B)>=0?B:F.UNKNOWN}(v.status);a(new $(S,v.message))}else a(new $(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new $(F.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{K(Wt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);K(Wt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Fw(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=kw(),a=Pw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");K(Wt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),g=!1,v=!1,S=new W0({Io:k=>{v?K(Wt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(g||(K(Wt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),K(Wt,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},To:()=>p.close()}),O=(k,B,Z)=>{k.listen(B,te=>{try{Z(te)}catch(Ce){setTimeout(()=>{throw Ce},0)}})};return O(p,ja.EventType.OPEN,()=>{v||(K(Wt,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),O(p,ja.EventType.CLOSE,()=>{v||(v=!0,K(Wt,`RPC '${e}' stream ${i} transport closed`),S.So())}),O(p,ja.EventType.ERROR,k=>{v||(v=!0,Wa(Wt,`RPC '${e}' stream ${i} transport errored:`,k),S.So(new $(F.UNAVAILABLE,"The operation could not be completed")))}),O(p,ja.EventType.MESSAGE,k=>{var B;if(!v){let Z=k.data[0];$e(!!Z);let te=Z,Ce=te.error||((B=te[0])===null||B===void 0?void 0:B.error);if(Ce){K(Wt,`RPC '${e}' stream ${i} received error:`,Ce);let tt=Ce.status,ue=function(E){let C=It[E];if(C!==void 0)return T1(C)}(tt),D=Ce.message;ue===void 0&&(ue=F.INTERNAL,D="Unknown error status: "+tt+" with message "+Ce.message),v=!0,S.So(new $(ue,D)),p.close()}else K(Wt,`RPC '${e}' stream ${i} received:`,Z),S.bo(Z)}}),O(a,Nw.STAT_EVENT,k=>{k.stat===Hf.PROXY?K(Wt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Hf.NOPROXY&&K(Wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function Lw(){return typeof document<"u"?document:null}function Np(t){return new y0(t,!0)}var up=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var lp=class{constructor(e,n,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new up(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return I(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return I(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return I(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Ii(n.toString()),Ii("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new $(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>I(this,null,function*(){this.state=0,this.start()}))}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},K0=class extends lp{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=yH(this.serializer,e),r=function(o){if(!("targetChange"in o))return fe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?fe.min():s.readTime?Ur(s.readTime):fe.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=E0(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=s0(u)?{documents:IH(o,u)}:{query:R1(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=S1(o,s.resumeToken);let l=_0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(fe.min())>0){a.readTime=op(o,s.snapshotVersion.toTimestamp());let l=_0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=CH(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=E0(this.serializer),n.removeTarget=e,this.a_(n)}},Q0=class extends lp{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=wH(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=E0(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>_H(this.serializer,r))};this.a_(n)}};var Y0=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,w0(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(F.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,w0(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(F.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Z0=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ii(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var J0=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>I(this,null,function*(){vs(this)&&(K("RemoteStore","Restarting streams for network reachability change."),yield function(u){return I(this,null,function*(){let l=se(u);l.L_.add(4),yield ml(l),l.q_.set("Unknown"),l.L_.delete(4),yield Pp(l)})}(this))}))}),this.q_=new Z0(r,i)}};function Pp(t){return I(this,null,function*(){if(vs(t))for(let e of t.B_)yield e(!0)})}function ml(t){return I(this,null,function*(){for(let e of t.B_)yield e(!1)})}function L1(t,e){let n=se(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),NI(n)?RI(n):ic(n).r_()&&xI(n,e))}function MI(t,e){let n=se(t),r=ic(n);n.N_.delete(e),r.r_()&&V1(n,e),n.N_.size===0&&(r.r_()?r.o_():vs(n)&&n.q_.set("Unknown"))}function xI(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ic(t).A_(e)}function V1(t,e){t.Q_.xe(e),ic(t).R_(e)}function RI(t){t.Q_=new v0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ic(t).start(),t.q_.v_()}function NI(t){return vs(t)&&!ic(t).n_()&&t.N_.size>0}function vs(t){return se(t).L_.size===0}function U1(t){t.Q_=void 0}function VH(t){return I(this,null,function*(){t.q_.set("Online")})}function UH(t){return I(this,null,function*(){t.N_.forEach((e,n)=>{xI(t,e)})})}function jH(t,e){return I(this,null,function*(){U1(t),NI(t)?(t.q_.M_(e),RI(t)):t.q_.set("Unknown")})}function BH(t,e,n){return I(this,null,function*(){if(t.q_.set("Online"),e instanceof rp&&e.state===2&&e.cause)try{yield function(i,o){return I(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dp(t,r)}else if(e instanceof qa?t.Q_.Ke(e):e instanceof np?t.Q_.He(e):t.Q_.We(e),!n.isEqual(fe.min()))try{let r=yield F1(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Qt.EMPTY_BYTE_STRING,h.snapshotVersion)),V1(o,u);let p=new il(h.target,u,l,h.sequenceNumber);xI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){K("RemoteStore","Failed to raise snapshot:",r),yield dp(t,r)}})}function dp(t,e,n){return I(this,null,function*(){if(!pl(e))throw e;t.L_.add(1),yield ml(t),t.q_.set("Offline"),n||(n=()=>F1(t.localStore)),t.asyncQueue.enqueueRetryable(()=>I(this,null,function*(){K("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Pp(t)}))})}function j1(t,e){return e().catch(n=>dp(t,n,e))}function kp(t){return I(this,null,function*(){let e=se(t),n=po(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$H(e);)try{let i=yield kH(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,HH(e,i)}catch(i){yield dp(e,i)}B1(e)&&$1(e)})}function $H(t){return vs(t)&&t.O_.length<10}function HH(t,e){t.O_.push(e);let n=po(t);n.r_()&&n.V_&&n.m_(e.mutations)}function B1(t){return vs(t)&&!po(t).n_()&&t.O_.length>0}function $1(t){po(t).start()}function qH(t){return I(this,null,function*(){po(t).p_()})}function zH(t){return I(this,null,function*(){let e=po(t);for(let n of t.O_)e.m_(n.mutations)})}function WH(t,e,n){return I(this,null,function*(){let r=t.O_.shift(),i=h0.from(r,e,n);yield j1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield kp(t)})}function GH(t,e){return I(this,null,function*(){e&&po(t).V_&&(yield function(r,i){return I(this,null,function*(){if(function(s){return lH(s)&&s!==F.ABORTED}(i.code)){let o=r.O_.shift();po(r).s_(),yield j1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield kp(r)}})}(t,e)),B1(t)&&$1(t)})}function Hx(t,e){return I(this,null,function*(){let n=se(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");let r=vs(n);n.L_.add(3),yield ml(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Pp(n)})}function KH(t,e){return I(this,null,function*(){let n=se(t);e?(n.L_.delete(2),yield Pp(n)):e||(n.L_.add(2),yield ml(n),n.q_.set("Unknown"))})}function ic(t){return t.K_||(t.K_=function(n,r,i){let o=se(n);return o.w_(),new K0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:VH.bind(null,t),Ro:UH.bind(null,t),mo:jH.bind(null,t),d_:BH.bind(null,t)}),t.B_.push(e=>I(this,null,function*(){e?(t.K_.s_(),NI(t)?RI(t):t.q_.set("Unknown")):(yield t.K_.stop(),U1(t))}))),t.K_}function po(t){return t.U_||(t.U_=function(n,r,i){let o=se(n);return o.w_(),new Q0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qH.bind(null,t),mo:GH.bind(null,t),f_:zH.bind(null,t),g_:WH.bind(null,t)}),t.B_.push(e=>I(this,null,function*(){e?(t.U_.s_(),yield kp(t)):(yield t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var X0=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function PI(t,e){if(Ii("AsyncQueue",`${e}: ${t}`),pl(t))return new $(F.UNAVAILABLE,`${e}: ${t}`);throw t}var hp=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Gu(),this.sortedSet=new at(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var fp=class{constructor(){this.W_=new at(ee.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},ec=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,hp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var eI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},tI=class{constructor(){this.queries=qx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=se(n),o=i.queries;i.queries=qx(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new $(F.ABORTED,"Firestore shutting down"))}};function qx(){return new lo(t=>p1(t),xp)}function kI(t,e){return I(this,null,function*(){let n=se(t),r=3,i=e.query,o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new eI,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=PI(s,`Initialization of query '${Ba(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&FI(n)})}function OI(t,e){return I(this,null,function*(){let n=se(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function QH(t,e){let n=se(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&FI(n)}function YH(t,e,n){let r=se(t),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(n);r.queries.delete(e)}function FI(t){t.Y_.forEach(e=>{e.next()})}var nI,zx;(zx=nI||(nI={})).ea="default",zx.Cache="cache";var al=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==nI.Cache}};var pp=class{constructor(e){this.key=e}},mp=class{constructor(e){this.key=e}},rI=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=m1(e),this.Ra=new hp(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new fp,i=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),v=Rp(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),O=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),k=!1;g&&v?g.data.isEqual(v.data)?S!==O&&(r.track({type:3,doc:v}),k=!0):this.ga(g,v)||(r.track({type:2,doc:v}),k=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!g&&v?(r.track({type:0,doc:v}),k=!0):g&&!v&&(r.track({type:1,doc:g}),k=!0,(u||l)&&(a=!0)),k&&(v?(s=s.add(v),o=O?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,S){let O=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return O(v)-O(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new ec(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new mp(r))}),this.da.forEach(r=>{e.has(r)||n.push(new pp(r))}),n}ba(e){this.Ta=e.Ts,this.da=Se();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ec.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},iI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},oI=class{constructor(e){this.key=e,this.va=!1}},sI=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new lo(a=>p1(a),xp),this.Ma=new Map,this.xa=new Set,this.Oa=new at(ee.comparator),this.Na=new Map,this.La=new sl,this.Ba={},this.ka=new Map,this.qa=ol.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function ZH(t,e,n=!0){return I(this,null,function*(){let r=K1(t),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield H1(r,e,n,!0),i})}function JH(t,e){return I(this,null,function*(){let n=K1(t);yield H1(n,e,!0,!1)})}function H1(t,e,n,r){return I(this,null,function*(){let i=yield OH(t.localStore,Lr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield XH(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&L1(t.remoteStore,i),a})}function XH(t,e,n,r,i){return I(this,null,function*(){t.Ka=(p,g,v)=>function(O,k,B,Z){return I(this,null,function*(){let te=k.view.ma(B);te.ns&&(te=yield $x(O.localStore,k.query,!1).then(({documents:D})=>k.view.ma(D,te)));let Ce=Z&&Z.targetChanges.get(k.targetId),tt=Z&&Z.targetMismatches.get(k.targetId)!=null,ue=k.view.applyChanges(te,O.isPrimaryClient,Ce,tt);return Gx(O,k.targetId,ue.wa),ue.snapshot})}(t,p,g,v);let o=yield $x(t.localStore,e,!0),s=new rI(e,o.Ts),a=s.ma(o.documents),u=rl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);Gx(t,n,l.wa);let h=new iI(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function eq(t,e,n){return I(this,null,function*(){let r=se(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!xp(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield H0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&MI(r.remoteStore,i.targetId),aI(r,i.targetId)}).catch(fl))):(aI(r,i.targetId),yield H0(r.localStore,i.targetId,!0))})}function tq(t,e){return I(this,null,function*(){let n=se(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),MI(n.remoteStore,r.targetId))})}function nq(t,e,n){return I(this,null,function*(){let r=uq(t);try{let i=yield function(s,a){let u=se(s),l=Ft.now(),h=a.reduce((v,S)=>v.add(S.key),Se()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let S=bi(),O=Se();return u.cs.getEntries(v,h).next(k=>{S=k,S.forEach((B,Z)=>{Z.isValidDocument()||(O=O.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,S)).next(k=>{p=k;let B=[];for(let Z of a){let te=uH(Z,p.get(Z.key).overlayedDocument);te!=null&&B.push(new Br(Z.key,te,s1(te.value.mapValue),Vr.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,B,a)}).next(k=>{g=k;let B=k.applyToLocalDocumentSet(p,O);return u.documentOverlayCache.saveOverlays(v,k.batchId,B)})}).then(()=>({batchId:g.batchId,changes:v1(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new at(Ne)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,n),yield gl(r,i.changes),yield kp(r.remoteStore)}catch(i){let o=PI(i,"Failed to persist write");n.reject(o)}})}function q1(t,e){return I(this,null,function*(){let n=se(t);try{let r=yield NH(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Na.get(o);s&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?$e(s.va):i.removedDocuments.size>0&&($e(s.va),s.va=!1))}),yield gl(n,r,e)}catch(r){yield fl(r)}})}function Wx(t,e,n){let r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=se(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.j_)g.Z_(a)&&(l=!0)}),l&&FI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rq(t,e,n){return I(this,null,function*(){let r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new at(ee.comparator);s=s.insert(o,dr.newNoDocument(o,fe.min()));let a=Se().add(o),u=new tp(fe.min(),new Map,new at(Ne),s,a);yield q1(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),LI(r)}else yield H0(r.localStore,e,!1).then(()=>aI(r,e,n)).catch(fl)})}function iq(t,e){return I(this,null,function*(){let n=se(t),r=e.batch.batchId;try{let i=yield RH(n.localStore,e);W1(n,r,null),z1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield gl(n,i)}catch(i){yield fl(i)}})}function oq(t,e,n){return I(this,null,function*(){let r=se(t);try{let i=yield function(s,a){let u=se(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>($e(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);W1(r,e,n),z1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield gl(r,i)}catch(i){yield fl(i)}})}function z1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function W1(t,e,n){let r=se(t),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function aI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||G1(t,r)})}function G1(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(MI(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),LI(t))}function Gx(t,e,n){for(let r of n)r instanceof pp?(t.La.addReference(r.key,e),sq(t,r)):r instanceof mp?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||G1(t,r.key)):ie()}function sq(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),LI(t))}function LI(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new ee(et.fromString(e)),r=t.qa.next();t.Na.set(r,new oI(n)),t.Oa=t.Oa.insert(n,r),L1(t.remoteStore,new il(Lr(Mp(n.path)),r,"TargetPurposeLimboResolution",n1.oe))}}function gl(t,e,n){return I(this,null,function*(){let r=se(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=U0.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return I(this,null,function*(){let h=se(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(l,g=>V.forEach(g.$i,v=>h.persistence.referenceDelegate.addReference(p,g.targetId,v)).next(()=>V.forEach(g.Ui,v=>h.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))}catch(p){if(!pl(p))throw p;K("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let v=h.os.get(g),S=v.snapshotVersion,O=v.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(g,O)}}})}(r.localStore,o))})}function aq(t,e){return I(this,null,function*(){let n=se(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());let r=yield O1(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new $(F.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield gl(n,r.hs)}})}function cq(t,e){let n=se(t),r=n.Na.get(e);if(r&&r.va)return Se().add(r.key);{let i=Se(),o=n.Ma.get(e);if(!o)return i;for(let s of o){let a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function K1(t){let e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=q1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rq.bind(null,e),e.Ca.d_=QH.bind(null,e.eventManager),e.Ca.$a=YH.bind(null,e.eventManager),e}function uq(t){let e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oq.bind(null,e),e}var Kx=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return I(this,null,function*(){this.serializer=Np(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return xH(this.persistence,new B0,n.initialUser,this.serializer)}Ga(n){return new F0(V0.Zr,this.serializer)}Wa(n){return new q0}terminate(){return I(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var lq=(()=>{class t{initialize(n,r){return I(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Wx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=aq.bind(null,this.syncEngine),yield KH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new tI}()}createDatastore(n){let r=Np(n.databaseInfo.databaseId),i=function(s){return new G0(s)}(n.databaseInfo);return function(s,a,u,l){return new Y0(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new J0(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>Wx(this.syncEngine,r,0),function(){return cp.D()?new cp:new z0}())}createSyncEngine(n,r){return function(o,s,a,u,l,h,p){let g=new sI(o,s,a,u,l,h);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return I(this,null,function*(){var n,r;yield function(o){return I(this,null,function*(){let s=se(o);K("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ml(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var cl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ii("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var cI=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nt.UNAUTHENTICATED,this.clientId=Qf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>I(this,null,function*(){K("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(K("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=PI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Vw(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>I(this,null,function*(){r.isEqual(i)||(yield O1(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Qx(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield dq(t);K("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Hx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Hx(e.remoteStore,i)),t._onlineComponents=e})}function dq(t){return I(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vw(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Wa("Error using user provided cache. Falling back to memory cache: "+n),yield Vw(t,new Kx)}}else K("FirestoreClient","Using default OfflineComponentProvider"),yield Vw(t,new Kx);return t._offlineComponents})}function VI(t){return I(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),yield Qx(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),yield Qx(t,new lq))),t._onlineComponents})}function hq(t){return VI(t).then(e=>e.syncEngine)}function fq(t){return VI(t).then(e=>e.datastore)}function gp(t){return I(this,null,function*(){let e=yield VI(t),n=e.eventManager;return n.onListen=ZH.bind(null,e.syncEngine),n.onUnlisten=eq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tq.bind(null,e.syncEngine),n})}function pq(t,e,n={}){let r=new Kn;return t.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return function(o,s,a,u,l){let h=new cl({next:g=>{h.Za(),s.enqueueAndForget(()=>OI(o,p));let v=g.docs.has(a);!v&&g.fromCache?l.reject(new $(F.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&u&&u.source==="server"?l.reject(new $(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new al(Mp(a.path),h,{includeMetadataChanges:!0,_a:!0});return kI(o,p)}(yield gp(t),t.asyncQueue,e,n,r)})),r.promise}function mq(t,e,n={}){let r=new Kn;return t.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return function(o,s,a,u,l){let h=new cl({next:g=>{h.Za(),s.enqueueAndForget(()=>OI(o,p)),g.fromCache&&u.source==="server"?l.reject(new $(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new al(a,h,{includeMetadataChanges:!0,_a:!0});return kI(o,p)}(yield gp(t),t.asyncQueue,e,n,r)})),r.promise}function gq(t,e,n){let r=new Kn;return t.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){try{let i=yield fq(t);r.resolve(function(s,a,u){return I(this,null,function*(){var l;let h=se(s),{request:p,ut:g,parent:v}=EH(h.serializer,Y4(a),u);h.connection.Fo||delete p.parent;let S=(yield h.Lo("RunAggregationQuery",h.serializer.databaseId,v,p,1)).filter(k=>!!k.result);$e(S.length===1);let O=(l=S[0].result)===null||l===void 0?void 0:l.aggregateFields;return Object.keys(O).reduce((k,B)=>(k[g[B]]=O[B],k),{})})}(i,e,n))}catch(i){r.reject(i)}})),r.promise}function Q1(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Yx=new Map;function Y1(t,e,n){if(!n)throw new $(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vq(t,e,n,r){if(e===!0&&r===!0)throw new $(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zx(t){if(!ee.isDocumentKey(t))throw new $(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jx(t){if(ee.isDocumentKey(t))throw new $(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Op(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Op(t);throw new $(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var vp=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},tc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Uw;switch(r.type){case"firstParty":return new Hw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return I(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Yx.get(n);r&&(K("ComponentProvider","Removing Datastore"),Yx.delete(n),r.terminate())}(this),Promise.resolve()}};function Z1(t,e,n,r={}){var i;let o=(t=un(t,tc))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Nt.MOCK_USER;else{a=HA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new $(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Nt(l)}t._authCredentials=new jw(new Kf(a,u))}}var mo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Kt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},ao=class t extends mo{constructor(e,n,r){super(e,n,Mp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new ee(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function J1(t,e,...n){if(t=wt(t),Y1("collection","path",e),t instanceof tc){let r=et.fromString(e,...n);return Jx(r),new ao(t,null,r)}{if(!(t instanceof Kt||t instanceof ao))throw new $(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(et.fromString(e,...n));return Jx(r),new ao(t.firestore,null,r)}}function UI(t,e,...n){if(t=wt(t),arguments.length===1&&(e=Qf.newId()),Y1("doc","path",e),t instanceof tc){let r=et.fromString(e,...n);return Zx(r),new Kt(t,null,new ee(r))}{if(!(t instanceof Kt||t instanceof ao))throw new $(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(et.fromString(e,...n));return Zx(r),new Kt(t.firestore,t instanceof ao?t.converter:null,new ee(r))}}var yp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new up(this,"async_queue_retry"),this.Vu=()=>{let r=Lw();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Lw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Lw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Kn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return I(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pl(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ii("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=X0.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ie()}verifyOperationInProgress(){}wu(){return I(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function Xx(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Qn=class extends tc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new yp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return I(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new yp(e),this._firestoreClient=void 0,yield e}})}};function X1(t,e){let n=typeof t=="object"?t:ka(),r=typeof t=="string"?t:e||"(default)",i=Pu(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=$A("firestore");o&&Z1(i,...o)}return i}function vl(t){if(t._terminated)throw new $(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yq(t),t._firestoreClient}function yq(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new Kw(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Q1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new cI(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var uI=class{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}},lI=class{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}};var ul=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Qt.fromBase64String(e))}catch(n){throw new $(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ms=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};function eR(){return new ms("__name__")}var go=class{constructor(e){this._methodName=e}};var ll=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}};var dl=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var _q=/^__.*__$/,dI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Br(e,this.data,this.fieldMask,n,this.fieldTransforms):new ps(e,this.data,n,this.fieldTransforms)}},_p=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Br(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function tR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}var wp=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ep(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(tR(this.Cu)&&_q.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},hI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Np(e)}Qu(e,n,r,i=!1){return new wp({Cu:e,methodName:n,qu:r,path:On.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Fp(t){let e=t._freezeSettings(),n=Np(t._databaseId);return new hI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nR(t,e,n,r,i,o={}){let s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);jI("Data must be an object, but it was:",s,r);let a=iR(r,s),u,l;if(o.merge)u=new Gn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=gI(e,p,n);if(!s.contains(g))throw new $(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);sR(h,g)||h.push(g)}u=new Gn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new dI(new kn(a),u,l)}var Ip=class t extends go{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function rR(t,e,n){return new wp({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var fI=class t extends go{_toFieldTransform(e){return new tl(e.path,new fs)}isEqual(e){return e instanceof t}},pI=class t extends go{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){let n=rR(this,e,!0),r=this.Ku.map(o=>ys(o,n)),i=new ho(r);return new tl(e.path,i)}isEqual(e){return e instanceof t&&pi(this.Ku,e.Ku)}},mI=class t extends go{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){let n=rR(this,e,!0),r=this.Ku.map(o=>ys(o,n)),i=new fo(r);return new tl(e.path,i)}isEqual(e){return e instanceof t&&pi(this.Ku,e.Ku)}};function wq(t,e,n,r){let i=t.Qu(1,e,n);jI("Data must be an object, but it was:",i,r);let o=[],s=kn.empty();gs(r,(u,l)=>{let h=BI(e,u,n);l=wt(l);let p=i.Nu(h);if(l instanceof Ip)o.push(h);else{let g=ys(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Gn(o);return new _p(s,a,i.fieldTransforms)}function Iq(t,e,n,r,i,o){let s=t.Qu(1,e,n),a=[gI(e,r,n)],u=[i];if(o.length%2!=0)throw new $(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(gI(e,o[g])),u.push(o[g+1]);let l=[],h=kn.empty();for(let g=a.length-1;g>=0;--g)if(!sR(l,a[g])){let v=a[g],S=u[g];S=wt(S);let O=s.Nu(v);if(S instanceof Ip)l.push(v);else{let k=ys(S,O);k!=null&&(l.push(v),h.set(v,k))}}let p=new Gn(l);return new _p(h,p,s.fieldTransforms)}function Eq(t,e,n,r=!1){return ys(n,t.Qu(r?4:3,e))}function ys(t,e){if(oR(t=wt(t)))return jI("Unsupported field value:",e,t),iR(t,e);if(t instanceof go)return function(r,i){if(!tR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=ys(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ft.fromDate(r);return{timestampValue:op(i.serializer,o)}}if(r instanceof Ft){let o=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:op(i.serializer,o)}}if(r instanceof ll)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ul)return{bytesValue:S1(i.serializer,r._byteString)};if(r instanceof Kt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:AI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof dl)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return SI(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Op(r)}`)}(t,e)}function iR(t,e){let n={};return r1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gs(t,(r,i)=>{let o=ys(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function oR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof ll||t instanceof ul||t instanceof Kt||t instanceof go||t instanceof dl)}function jI(t,e,n){if(!oR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Op(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function gI(t,e,n){if((e=wt(e))instanceof ms)return e._internalPath;if(typeof e=="string")return BI(t,e);throw Ep("Field path arguments must be of type string or ",t,!1,void 0,n)}var bq=new RegExp("[~\\*/\\[\\]]");function BI(t,e,n){if(e.search(bq)>=0)throw Ep(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ms(...e.split("."))._internalPath}catch{throw Ep(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ep(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(F.INVALID_ARGUMENT,a+t+u)}function sR(t,e){return t.some(n=>n.isEqual(e))}var bp=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new vI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Lp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},vI=class extends bp{data(){return super.data()}};function Lp(t,e){return typeof e=="string"?BI(t,e):e instanceof ms?e._internalPath:e._delegate._internalPath}function aR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hl=class{},Cp=class extends hl{};function cR(t,e,...n){let r=[];e instanceof hl&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof yI).length,a=o.filter(u=>u instanceof Dp).length;if(s>1||s>0&&a>0)throw new $(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Dp=class t extends Cp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return dR(e._query,n),new mo(e.firestore,e.converter,a0(e._query,n))}_parse(e){let n=Fp(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){t1(p,h);let v=[];for(let S of p)v.push(e1(u,o,S));g={arrayValue:{values:v}}}else g=e1(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||t1(p,h),g=Eq(a,s,p,h==="in"||h==="not-in");return bt.create(l,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function uR(t,e,n){let r=e,i=Lp("where",t);return Dp._create(i,r,n)}var yI=class t extends hl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hr.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)dR(s,u),s=a0(s,u)}(e._query,n),new mo(e.firestore,e.converter,a0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var _I=class t extends Cp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new $(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hs(o,s)}(e._query,this._field,this._direction);return new mo(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new uo(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function lR(t,e="asc"){let n=e,r=Lp("orderBy",t);return _I._create(r,n)}function e1(t,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new $(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h1(e)&&n.indexOf("/")!==-1)throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(et.fromString(n));if(!ee.isDocumentKey(r))throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dx(t,new ee(r))}if(n instanceof Kt)return Dx(t,n._key);throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Op(n)}.`)}function t1(t,e){if(!Array.isArray(t)||t.length===0)throw new $(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dR(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var wI=class{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return gs(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ze(s.doubleValue));return new dl(o)}convertGeoPoint(e){return new ll(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=bI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){let n=Ei(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=et.fromString(e);$e(k1(r));let i=new Xf(r.get(1),r.get(3)),o=new ee(r.popFirst(5));return i.isEqual(n)||Ii(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function hR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function fR(){return new uI("count")}var cs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Tp=class extends bp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new za(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Lp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},za=class extends Tp{data(e={}){return super.data(e)}},Sp=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new cs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new za(this._firestore,this._userDataWriter,r.key,r,new cs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new za(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new za(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Cq(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Cq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function pR(t){t=un(t,Kt);let e=un(t.firestore,Qn);return pq(vl(e),t._key).then(n=>wR(e,t,n))}var nc=class extends wI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}};function mR(t){t=un(t,mo);let e=un(t.firestore,Qn),n=vl(e),r=new nc(e);return aR(t._query),mq(n,t._query).then(i=>new Sp(e,r,t,i))}function gR(t,e,n){t=un(t,Kt);let r=un(t.firestore,Qn),i=hR(t.converter,e,n);return Vp(r,[nR(Fp(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Vr.none())])}function vR(t,e,n,...r){t=un(t,Kt);let i=un(t.firestore,Qn),o=Fp(i),s;return s=typeof(e=wt(e))=="string"||e instanceof ms?Iq(o,"updateDoc",t._key,e,n,r):wq(o,"updateDoc",t._key,e),Vp(i,[s.toMutation(t._key,Vr.exists(!0))])}function yR(t){return Vp(un(t.firestore,Qn),[new nl(t._key,Vr.none())])}function _R(t,e){let n=un(t.firestore,Qn),r=UI(t),i=hR(t.converter,e);return Vp(n,[nR(Fp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Vr.exists(!1))]).then(()=>r)}function $I(t,...e){var n,r,i;t=wt(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Xx(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Xx(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof Kt)l=un(t.firestore,Qn),h=Mp(t._key.path),u={next:p=>{e[s]&&e[s](wR(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=un(t,mo);l=un(p.firestore,Qn),h=p._query;let g=new nc(l);u={next:v=>{e[s]&&e[s](new Sp(l,g,p,v))},error:e[s+1],complete:e[s+2]},aR(t._query)}return function(g,v,S,O){let k=new cl(O),B=new al(v,k,S);return g.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return kI(yield gp(g),B)})),()=>{k.Za(),g.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return OI(yield gp(g),B)}))}}(vl(l),h,a,u)}function Vp(t,e){return function(r,i){let o=new Kn;return r.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return nq(yield hq(r),i,o)})),o.promise}(vl(t),e)}function wR(t,e,n){let r=n.docs.get(e._key),i=new nc(t);return new Tp(t,i,e._key,r,new cs(n.hasPendingWrites,n.fromCache),e.converter)}function HI(t){return IR(t,{count:fR()})}function IR(t,e){let n=un(t.firestore,Qn),r=vl(n),i=z4(e,(o,s)=>new p0(s,o.aggregateType,o._internalFieldPath));return gq(r,t._query,i).then(o=>function(a,u,l){let h=new nc(a);return new lI(u,h,l)}(n,t,o))}function ER(){return new fI("serverTimestamp")}function bR(...t){return new pI("arrayUnion",t)}function CR(...t){return new mI("arrayRemove",t)}(function(e,n=!0){(function(i){rc=i})(eo),Xi(new Wn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Qn(new Bw(r.getProvider("auth-internal")),new zw(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xf(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),St(Ix,"4.7.3",e),St(Ix,"4.7.3","esm2017")})();var Up=function(){return Up=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Up.apply(this,arguments)};var Tq={includeMetadataChanges:!1};function qI(t,e){return e===void 0&&(e=Tq),new de(function(n){var r=$I(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function DR(t){return qI(t,{includeMetadataChanges:!0})}function TR(t,e){return e===void 0&&(e={}),DR(t).pipe(q(function(n){return zI(n,e)}))}function zI(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Up(Up({},r),(n={},n[e.idField]=t.id,n))}function SR(t){return qI(t,{includeMetadataChanges:!0}).pipe(q(function(e){return e.docs}))}function AR(t,e){return e===void 0&&(e={}),SR(t).pipe(q(function(n){return n.map(function(r){return zI(r,e)})}))}function MR(t){return Pe(HI(t))}function xR(t){return MR(t).pipe(q(function(e){return e.data().count}))}var ln=class{constructor(e){return e}},RR="firestore",WI=class{constructor(){return ku(RR)}};var GI=new Q("angularfire2.firestore-instances");function Sq(t,e){let n=Ef(RR,t,e);return n&&new ln(n)}function Aq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ln(r)}}var Mq={provide:WI,deps:[[new rn,GI]]},xq={provide:ln,useFactory:Sq,deps:[[new rn,GI],gi]};function NR(t,...e){return St("angularfire",Xo.full,"fst"),Ir([xq,Mq,{provide:GI,useFactory:Aq(t),multi:!0,deps:[je,mt,La,es,[new rn,qu],[new rn,Fa],...e]}])}var fr=qe(AR,!0);var PR=qe(xR,!0);var $r=qe(TR,!0);var yl=qe(_R,!0);var kR=qe(CR,!0),OR=qe(bR,!0);var Yt=qe(J1,!0);var FR=qe(yR,!0);var Lt=qe(UI,!0),LR=qe(eR,!0);var VR=qe(pR,!0);var UR=qe(mR,!0);var jR=qe(X1,!0);var _s=qe(lR,!0);var pr=qe(cR,!0);var oc=qe(ER,!0),BR=qe(gR,!0);var sc=qe(vR,!0);var Ci=qe(uR,!0);var Je=class t{defaultUser=[{name:"none",links:["login"]}];firestore=N(ln);auth=N(os);loggedFSUser=new ct(null);userSubject$=this.loggedFSUser.asObservable();userSubscription;constructor(){this.init()}init(){let e=px(this.auth);this.userSubscription=e.pipe(ke(n=>n?$r(Lt(this.firestore,"users/"+n.uid),{idField:"id"}).pipe(Ue(r=>{this.loggedFSUser.next(r)}),ft(r=>(console.log("Error fetching firastore user",r),U(void 0)))):(this.loggedFSUser.next(null),U(null)))).subscribe()}ngOnDestroy(){this.userSubscription.unsubscribe()}logAuthIn(e,n){return I(this,null,function*(){try{let r=yield vx(this.auth,e,n)}catch(r){throw console.log("LogAuthIn error, error"),r}})}logAuthOut(){return I(this,null,function*(){try{yield yx(this.auth)}catch(e){throw e}})}createUser(e){return I(this,null,function*(){try{let r=(yield mx(this.auth,e.email,e.password)).user;console.log("New Auth user created :",r);let i=Lt(this.firestore,"users/"+r.uid),o={username:e.username,email:e.email,password:e.password,role:e.role,links:e.links,selectedAvatar:e.selectedAvatar,emailverified:r.emailVerified,cratedAt:r.metadata.creationTime,lastSignIn:r.metadata.lastSignInTime,photoURL:r.photoURL};yield BR(i,o),console.log("New user sotore in FireStore : ",o)}catch(n){throw console.log("in userservice ",n),n}})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var Rq=(t,e)=>({selected:t,hoverable:e}),Hr=class t{id="0";selected=!1;hoverable=!1;size="s";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-avatar-image"]],inputs:{id:"id",selected:"selected",hoverable:"hoverable",size:"size"},standalone:!0,features:[X],decls:2,vars:8,consts:[[1,"d-flex","justify-content-center","p-2",3,"ngClass"]],template:function(n,r){n&1&&(_(0,"div",0),Y(1,"div"),w()),n&2&&(sn("wrapper-"+r.size),W("ngClass",_a(5,Rq,r.selected,r.hoverable)),T(),sn("image-"+r.id+"-"+r.size))},dependencies:[Mr],styles:['.image-0-xs[_ngcontent-%COMP%]{width:67px;height:67px;background-image:url("./media/output_kwadrat_avatar_cropped_0_0_2-FZ4CEWTR.png")}.image-0-s[_ngcontent-%COMP%]{width:100px;height:100px;background-image:url("./media/output_kwadrat_avatar_cropped_0_0_3-7DNX2WHM.png")}.image-0-m[_ngcontent-%COMP%]{width:200px;height:200px;background-image:url("./media/output_kwadrat_avatar_cropped_0_0_6-MWB2AEIU.png")}.image-0-l[_ngcontent-%COMP%]{width:266px;height:266px;background-image:url("./media/output_kwadrat_avatar_cropped_0_0_8-3SXUWQQD.png")}.image-0-xl[_ngcontent-%COMP%]{width:333px;height:333px;background-image:url("./media/output_kwadrat_avatar_cropped_0_1-DXYX3C33.png")}.image-1-xs[_ngcontent-%COMP%]{width:67px;height:67px;background-image:url("./media/output_kwadrat_avatar_cropped_1_0_2-HPFABJQQ.png")}.image-1-s[_ngcontent-%COMP%]{width:100px;height:100px;background-image:url("./media/output_kwadrat_avatar_cropped_1_0_3-353XDIJR.png")}.image-1-m[_ngcontent-%COMP%]{width:200px;height:200px;background-image:url("./media/output_kwadrat_avatar_cropped_1_0_6-WBUFOH5H.png")}.image-1-l[_ngcontent-%COMP%]{width:266px;height:266px;background-image:url("./media/output_kwadrat_avatar_cropped_1_0_8-6NKMSZZE.png")}.image-1-xl[_ngcontent-%COMP%]{width:333px;height:333px;background-image:url("./media/output_kwadrat_avatar_cropped_1_1-4AEVBQGK.png")}.image-2-xs[_ngcontent-%COMP%]{width:67px;height:67px;background-image:url("./media/output_kwadrat_avatar_cropped_2_0_2-3DBXIEHE.png")}.image-2-s[_ngcontent-%COMP%]{width:100px;height:100px;background-image:url("./media/output_kwadrat_avatar_cropped_2_0_3-U6DFHFX2.png")}.image-2-m[_ngcontent-%COMP%]{width:200px;height:200px;background-image:url("./media/output_kwadrat_avatar_cropped_2_0_6-4DZZTHKZ.png")}.image-2-l[_ngcontent-%COMP%]{width:266px;height:266px;background-image:url("./media/output_kwadrat_avatar_cropped_2_0_8-UP5XVKL6.png")}.image-2-xl[_ngcontent-%COMP%]{width:333px;height:333px;background-image:url("./media/output_kwadrat_avatar_cropped_2_1-RMQT2BJJ.png")}.image-3-xs[_ngcontent-%COMP%]{width:67px;height:67px;background-image:url("./media/output_kwadrat_avatar_cropped_3_0_2-FV3NFMSN.png")}.image-3-s[_ngcontent-%COMP%]{width:100px;height:100px;background-image:url("./media/output_kwadrat_avatar_cropped_3_0_3-4SRXXILV.png")}.image-3-m[_ngcontent-%COMP%]{width:200px;height:200px;background-image:url("./media/output_kwadrat_avatar_cropped_3_0_6-F4EXNHGI.png")}.image-3-l[_ngcontent-%COMP%]{width:266px;height:266px;background-image:url("./media/output_kwadrat_avatar_cropped_3_0_8-ZASTATRO.png")}.image-3-xl[_ngcontent-%COMP%]{width:333px;height:333px;background-image:url("./media/output_kwadrat_avatar_cropped_3_1-ZWEODA2D.png")}.image-4-xs[_ngcontent-%COMP%]{width:67px;height:67px;background-image:url("./media/output_kwadrat_avatar_cropped_4_0_2-45BC5BD4.png")}.image-4-s[_ngcontent-%COMP%]{width:100px;height:100px;background-image:url("./media/output_kwadrat_avatar_cropped_4_0_3-G3TBMMXH.png")}.image-4-m[_ngcontent-%COMP%]{width:200px;height:200px;background-image:url("./media/output_kwadrat_avatar_cropped_4_0_6-N44UK2YN.png")}.image-4-l[_ngcontent-%COMP%]{width:266px;height:266px;background-image:url("./media/output_kwadrat_avatar_cropped_4_0_8-NXKBAXA6.png")}.image-4-xl[_ngcontent-%COMP%]{width:333px;height:333px;background-image:url("./media/output_kwadrat_avatar_cropped_4_1-O44KZRO2.png")}.image-5-xs[_ngcontent-%COMP%]{width:67px;height:67px;background-image:url("./media/output_kwadrat_avatar_cropped_5_0_2-6XIOJVXC.png")}.image-5-s[_ngcontent-%COMP%]{width:100px;height:100px;background-image:url("./media/output_kwadrat_avatar_cropped_5_0_3-3ZX6UQLR.png")}.image-5-m[_ngcontent-%COMP%]{width:200px;height:200px;background-image:url("./media/output_kwadrat_avatar_cropped_5_0_6-RQZVWF4B.png")}.image-5-l[_ngcontent-%COMP%]{width:266px;height:266px;background-image:url("./media/output_kwadrat_avatar_cropped_5_0_8-IALBKZWF.png")}.image-5-xl[_ngcontent-%COMP%]{width:333px;height:333px;background-image:url("./media/output_kwadrat_avatar_cropped_5_1-D6STBVID.png")}.image-6-xs[_ngcontent-%COMP%]{width:67px;height:67px;background-image:url("./media/output_kwadrat_avatar_cropped_6_0_2-4YRM7E62.png")}.image-6-s[_ngcontent-%COMP%]{width:100px;height:100px;background-image:url("./media/output_kwadrat_avatar_cropped_6_0_3-3XYP6UUL.png")}.image-6-m[_ngcontent-%COMP%]{width:200px;height:200px;background-image:url("./media/output_kwadrat_avatar_cropped_6_0_6-WJAB7OAH.png")}.image-6-l[_ngcontent-%COMP%]{width:266px;height:266px;background-image:url("./media/output_kwadrat_avatar_cropped_6_0_8-LY2LMAOE.png")}.image-6-xl[_ngcontent-%COMP%]{width:333px;height:333px;background-image:url("./media/output_kwadrat_avatar_cropped_6_1-R7JECEYJ.png")}.wrapper-xs[_ngcontent-%COMP%]{transform-origin:top left;border-radius:50%;width:calc(67px + 14%);height:calc(67px + 14%)}.wrapper-xs.hoverable[_ngcontent-%COMP%]:hover{background-color:#0d6dfda6}.image-7-xs[_ngcontent-%COMP%]{width:67px;height:67px;background-image:url("./media/output_kwadrat_avatar_cropped_7_0_2-IL5ACHVW.png")}.wrapper-s[_ngcontent-%COMP%]{transform-origin:top left;border-radius:50%;width:calc(100px + 14%);height:calc(100px + 14%)}.wrapper-s.hoverable[_ngcontent-%COMP%]:hover{background-color:#0d6dfda6}.image-7-s[_ngcontent-%COMP%]{width:100px;height:100px;background-image:url("./media/output_kwadrat_avatar_cropped_7_0_3-NW7CCYCA.png")}.wrapper-m[_ngcontent-%COMP%]{transform-origin:top left;border-radius:50%;width:calc(200px + 14%);height:calc(200px + 14%)}.wrapper-m.hoverable[_ngcontent-%COMP%]:hover{background-color:#0d6dfda6}.image-7-m[_ngcontent-%COMP%]{width:200px;height:200px;background-image:url("./media/output_kwadrat_avatar_cropped_7_0_6-QLYX4PF3.png")}.wrapper-l[_ngcontent-%COMP%]{transform-origin:top left;border-radius:50%;width:calc(266px + 14%);height:calc(266px + 14%)}.wrapper-l.hoverable[_ngcontent-%COMP%]:hover{background-color:#0d6dfda6}.image-7-l[_ngcontent-%COMP%]{width:266px;height:266px;background-image:url("./media/output_kwadrat_avatar_cropped_7_0_8-3J5DLU2I.png")}.wrapper-xl[_ngcontent-%COMP%]{transform-origin:top left;border-radius:50%;width:calc(333px + 14%);height:calc(333px + 14%)}.wrapper-xl.hoverable[_ngcontent-%COMP%]:hover{background-color:#0d6dfda6}.image-7-xl[_ngcontent-%COMP%]{width:333px;height:333px;background-image:url("./media/output_kwadrat_avatar_cropped_7_1-UHGUU2BE.png")}.selected[_ngcontent-%COMP%]{background-color:#0d6dfd}']})};var Nq=()=>["create"];function Pq(t,e){t&1&&(_(0,"button",12),x(1,"Create New"),w()),t&2&&W("routerLink",ar(1,Nq))}function kq(t,e){if(t&1){let n=yt();_(0,"div",1)(1,"div",3),Y(2,"app-avatar-image",4),w(),_(3,"div",5)(4,"h5",6),x(5),w(),_(6,"ul",7)(7,"li",8),x(8),w(),_(9,"li",8),x(10),He(11,"date"),w(),_(12,"li",8),x(13),w(),_(14,"li",8),x(15),w()(),_(16,"div",9)(17,"button",10),Ae("click",function(){Oe(n);let i=ne();return Fe(i.logOut())}),x(18,"Log out"),w(),_(19,"button",11),x(20,"Edit"),w(),Ee(21,Pq,2,2,"button",12),w()(),_(22,"div",13),x(23),He(24,"date"),w()()}if(t&2){let n,r=e;T(2),W("id",(n=r.selectedAvatar)!==null&&n!==void 0?n:"0")("hoverable",!1),T(3),z(r.username),T(3),Re(" Email : ",r.email," "),T(2),Re("Created at : ",wn(11,9,r.cratedAt),""),T(3),Re("Email verified : ",r.emailverified,""),T(2),Re("Role : ",r.role,""),T(6),he(r.role!=="admin"?21:-1),T(2),Re(" Last sign in : ",zt(24,11,r.lastSignIn,"M/d/yy, HH:mm a")," ")}}function Oq(t,e){t&1&&(_(0,"h1",2),x(1,"Nobody logged"),w())}var jp=class t{userService=N(Je);user$=this.userService.userSubject$;logOut(){return I(this,null,function*(){yield this.userService.logAuthOut(),console.log("Logged Out from user page")})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["user-page"]],standalone:!0,features:[X],decls:4,vars:3,consts:[[1,"container","text-center","d-flex","justify-content-center"],[1,"card","text-center","m-5","maxw-320"],[1,"m-5"],[1,"card-header","d-flex","justify-content-center"],["size","m",3,"id","hoverable"],[1,"card-body"],[1,"card-title","text-capitalize"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"d-flex","justify-content-center","my-2"],[1,"btn","btn-primary","me-3",3,"click"],[1,"btn","btn-primary","me-3"],[1,"btn","btn-primary",3,"routerLink"],[1,"card-footer","text-body-secondary"]],template:function(n,r){if(n&1&&(_(0,"div",0),Ee(1,kq,25,14,"div",1),He(2,"async"),Ee(3,Oq,2,0,"h1",2),w()),n&2){let i;T(),he((i=wn(2,1,r.user$))?1:3,i)}},dependencies:[xt,bn,Ki,Hn,Hr]})};var YR=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(ye(Tr),ye(or))}}static{this.\u0275dir=Ye({type:t})}}return t})(),Kp=(()=>{class t extends YR{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})()}static{this.\u0275dir=Ye({type:t,features:[on]})}}return t})(),Dl=new Q("");var Fq={provide:Dl,useExisting:An(()=>qr),multi:!0};function Lq(){let t=ui()?ui().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Vq=new Q(""),qr=(()=>{class t extends YR{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Lq())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(ye(Tr),ye(or),ye(Vq,8))}}static{this.\u0275dir=Ye({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[sr([Fq]),on]})}}return t})();function Qp(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function Uq(t){return t!=null&&typeof t.length=="number"}var dc=new Q(""),ZR=new Q(""),jq=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function Bq(t){return Qp(t.value)?{required:!0}:null}function $q(t){return Qp(t.value)||jq.test(t.value)?null:{email:!0}}function Hq(t){return e=>Qp(e.value)||!Uq(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function qq(t){if(!t)return KI;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Qp(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function KI(t){return null}function JR(t){return t!=null}function XR(t){return Wi(t)?Pe(t):t}function eN(t){let e={};return t.forEach(n=>{e=n!=null?L(L({},e),n):e}),Object.keys(e).length===0?null:e}function tN(t,e){return e.map(n=>n(t))}function zq(t){return!t.validate}function nN(t){return t.map(e=>zq(e)?e:n=>e.validate(n))}function Wq(t){if(!t)return null;let e=t.filter(JR);return e.length==0?null:function(n){return eN(tN(n,e))}}function YI(t){return t!=null?Wq(nN(t)):null}function Gq(t){if(!t)return null;let e=t.filter(JR);return e.length==0?null:function(n){let r=tN(n,e).map(XR);return fg(r).pipe(q(eN))}}function ZI(t){return t!=null?Gq(nN(t)):null}function $R(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Kq(t){return t._rawValidators}function Qq(t){return t._rawAsyncValidators}function QI(t){return t?Array.isArray(t)?t:[t]:[]}function $p(t,e){return Array.isArray(t)?t.includes(e):t===e}function HR(t,e){let n=QI(e);return QI(t).forEach(i=>{$p(n,i)||n.push(i)}),n}function qR(t,e){return QI(e).filter(n=>!$p(t,n))}var Hp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ZI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},uc=class extends Hp{get formDirective(){return null}get path(){return null}},Cl=class extends Hp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},qp=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Yq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},oee=ae(L({},Yq),{"[class.ng-submitted]":"isSubmitted"}),vo=(()=>{class t extends qp{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(ye(Cl,2))}}static{this.\u0275dir=Ye({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&qi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[on]})}}return t})(),hc=(()=>{class t extends qp{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(ye(uc,10))}}static{this.\u0275dir=Ye({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&qi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[on]})}}return t})();var _l="VALID",Bp="INVALID",ac="PENDING",wl="DISABLED",lc=class{},zp=class extends lc{constructor(e,n){super(),this.value=e,this.source=n}},El=class extends lc{constructor(e,n){super(),this.pristine=e,this.source=n}},bl=class extends lc{constructor(e,n){super(),this.touched=e,this.source=n}},cc=class extends lc{constructor(e,n){super(),this.status=e,this.source=n}};function rN(t){return(Yp(t)?t.validators:t)||null}function Zq(t){return Array.isArray(t)?YI(t):t||null}function iN(t,e){return(Yp(e)?e.asyncValidators:t)||null}function Jq(t){return Array.isArray(t)?ZI(t):t||null}function Yp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Xq(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[n])throw new G(1001,"")}function ez(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new G(1002,"")})}var Wp=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Bn(()=>this.statusReactive()),this.statusReactive=yn(void 0),this._pristine=Bn(()=>this.pristineReactive()),this.pristineReactive=yn(!0),this._touched=Bn(()=>this.touchedReactive()),this.touchedReactive=yn(!1),this._events=new lt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return In(this.statusReactive)}set status(e){In(()=>this.statusReactive.set(e))}get valid(){return this.status===_l}get invalid(){return this.status===Bp}get pending(){return this.status==ac}get disabled(){return this.status===wl}get enabled(){return this.status!==wl}get pristine(){return In(this.pristineReactive)}set pristine(e){In(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return In(this.touchedReactive)}set touched(e){In(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(HR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(HR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(qR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(qR(e,this._rawAsyncValidators))}hasValidator(e){return $p(this._rawValidators,e)}hasAsyncValidator(e){return $p(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(L({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new bl(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new bl(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(L({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new El(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new El(!0,r))}markAsPending(e={}){this.status=ac;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new cc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(L({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=wl,this.errors=null,this._forEachChild(i=>{i.disable(ae(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zp(this.value,r)),this._events.next(new cc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(L({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=_l,this._forEachChild(r=>{r.enable(ae(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(L({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_l||this.status===ac)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zp(this.value,n)),this._events.next(new cc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(L({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wl:_l}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ac,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=XR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new cc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new pt,this.statusChanges=new pt}_calculateStatus(){return this._allControlsDisabled()?wl:this.errors?Bp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ac)?ac:this._anyControlsHaveStatus(Bp)?Bp:_l}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new El(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new bl(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Yp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Zq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Jq(this._rawAsyncValidators)}},Gp=class extends Wp{constructor(e,n,r){super(rN(n),iN(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){ez(this,!0,e),Object.keys(e).forEach(r=>{Xq(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var JI=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>XI}),XI="always";function tz(t,e){return[...e.path,t]}function oN(t,e,n=XI){sN(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),rz(t,e),oz(t,e),iz(t,e),nz(t,e)}function zR(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function nz(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function sN(t,e){let n=Kq(t);e.validator!==null?t.setValidators($R(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=Qq(t);e.asyncValidator!==null?t.setAsyncValidators($R(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();zR(e._rawValidators,i),zR(e._rawAsyncValidators,i)}function rz(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&aN(t,e)})}function iz(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&aN(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function aN(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function oz(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function sz(t,e){t==null,sN(t,e)}function az(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function cz(t){return Object.getPrototypeOf(t.constructor)===Kp}function uz(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function lz(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===qr?n=o:cz(o)?r=o:i=o}),i||r||n||null}var dz={provide:uc,useExisting:An(()=>ws)},Il=Promise.resolve(),ws=(()=>{class t extends uc{get submitted(){return In(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=Bn(()=>this.submittedReactive()),this.submittedReactive=yn(!1),this._directives=new Set,this.ngSubmit=new pt,this.form=new Gp({},YI(n),ZI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Il.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),oN(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Il.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Il.then(()=>{let r=this._findContainer(n.path),i=new Gp({});sz(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Il.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Il.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),uz(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||t)(ye(dc,10),ye(ZR,10),ye(JI,8))}}static{this.\u0275dir=Ye({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sr([dz]),on]})}}return t})();function WR(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function GR(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var hz=class extends Wp{constructor(e=null,n,r){super(rN(n),iN(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(GR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){WR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){WR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){GR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var fz={provide:Cl,useExisting:An(()=>Di)},KR=Promise.resolve(),Di=(()=>{class t extends Cl{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new hz,this._registered=!1,this.name="",this.update=new pt,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=lz(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),az(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){oN(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){KR.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&oi(r);KR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?tz(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(ye(uc,9),ye(dc,10),ye(ZR,10),ye(Dl,10),ye(ii,8),ye(JI,8))}}static{this.\u0275dir=Ye({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sr([fz]),on,$i]})}}return t})(),fc=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Ye({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})();var pz={provide:Dl,useExisting:An(()=>eE),multi:!0},eE=(()=>{class t extends Kp{writeValue(n){this.setProperty("value",parseFloat(n))}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})()}static{this.\u0275dir=Ye({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&Ae("change",function(s){return i.onChange(s.target.value)})("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[sr([pz]),on]})}}return t})();var mz={provide:Dl,useExisting:An(()=>Zp),multi:!0};function cN(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function gz(t){return t.split(":")[0]}var Zp=(()=>{class t extends Kp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r=this._getOptionId(n),i=cN(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=gz(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})()}static{this.\u0275dir=Ye({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ae("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[sr([mz]),on]})}}return t})(),Jp=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(cN(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(ye(or),ye(Tr),ye(Zp,9))}}static{this.\u0275dir=Ye({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})(),vz={provide:Dl,useExisting:An(()=>Xp),multi:!0};function QR(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function yz(t){return t.split(":")[0]}var Xp=(()=>{class t extends Kp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=yz(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})()}static{this.\u0275dir=Ye({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ae("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[sr([vz]),on]})}}return t})(),em=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(QR(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(QR(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(ye(or),ye(Tr),ye(Xp,9))}}static{this.\u0275dir=Ye({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})();function _z(t){return typeof t=="number"?t:parseInt(t,10)}var tm=(()=>{class t{constructor(){this._validator=KI}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):KI,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Ye({type:t,features:[$i]})}}return t})();var wz={provide:dc,useExisting:An(()=>Tl),multi:!0};var Tl=(()=>{class t extends tm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=oi,this.createValidator=n=>Bq}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})()}static{this.\u0275dir=Ye({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&qo("required",i._enabled?"":null)},inputs:{required:"required"},features:[sr([wz]),on]})}}return t})();var Iz={provide:dc,useExisting:An(()=>tE),multi:!0},tE=(()=>{class t extends tm{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=oi,this.createValidator=n=>$q}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})()}static{this.\u0275dir=Ye({type:t,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[sr([Iz]),on]})}}return t})(),Ez={provide:dc,useExisting:An(()=>nE),multi:!0},nE=(()=>{class t extends tm{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=n=>_z(n),this.createValidator=n=>Hq(n)}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})()}static{this.\u0275dir=Ye({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&qo("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[sr([Ez]),on]})}}return t})();var bz={provide:dc,useExisting:An(()=>rE),multi:!0},rE=(()=>{class t extends tm{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=n=>n,this.createValidator=n=>qq(n)}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})()}static{this.\u0275dir=Ye({type:t,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&qo("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},features:[sr([bz]),on]})}}return t})();var Cz=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Bo({type:t})}static{this.\u0275inj=jo({})}}return t})();var zr=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:JI,useValue:n.callSetDisabledState??XI}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Bo({type:t})}static{this.\u0275inj=jo({imports:[Cz]})}}return t})();var Dz=()=>["/create-user"];function Tz(t,e){if(t&1&&(_(0,"div",11),x(1),w()),t&2){let n=ne();T(),z(n.networkError)}}var rm=class t{userService=N(Je);router=N(Ot);emailError=null;passwordError=null;credentialError=null;networkError=null;model={email:"",password:""};onSubmit(){return I(this,null,function*(){this.emailError=null,this.credentialError=null,this.passwordError=null,this.networkError=null;try{yield this.userService.logAuthIn(this.model.email,this.model.password),yield this.router.navigate(["/dashboard"])}catch(e){switch(console.log("Login form :",e.message),e.code){case"auth/invalid-credential":this.credentialError=e.message;break;case"auth/missing-password":this.passwordError=e.message;break;case"auth/invalid-email":this.emailError=e.message;break;case"auth/network-request-failed":this.networkError=e.message;break}}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-login-form"]],standalone:!0,features:[X],decls:30,vars:14,consts:[["myForm","ngForm"],[1,"card","p-3","m-5","login-form","mx-auto","bg-body-tertiary",3,"ngClass"],[1,"text-center"],[3,"ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],[1,"invalid-feedback"],["for","password",1,"form-label"],["type","password","id","password","name","password",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary"],[1,"form-text","text-danger","m-3"],[1,"m-3","text-center"],["href","#",1,"icon-link","icon-link-hover",3,"routerLink"],[1,"bi","bi-arrow-right"]],template:function(n,r){if(n&1){let i=yt();_(0,"div",1)(1,"h3",2),x(2,"Login"),w(),_(3,"form",3,0),Ae("ngSubmit",function(){return Oe(i),Fe(r.onSubmit())}),_(5,"div",4)(6,"label",5),x(7,"Email"),w(),_(8,"input",6),qt("ngModelChange",function(s){return Oe(i),an(r.model.email,s)||(r.model.email=s),Fe(s)}),w(),_(9,"div",7),x(10),w(),_(11,"div",7),x(12),w()(),_(13,"div",4)(14,"label",8),x(15,"Password"),w(),_(16,"input",9),qt("ngModelChange",function(s){return Oe(i),an(r.model.password,s)||(r.model.password=s),Fe(s)}),w(),_(17,"div",7),x(18),w(),_(19,"div",7),x(20),w()(),_(21,"div",2)(22,"button",10),x(23,"Login"),w()(),Ee(24,Tz,2,1,"div",11),w(),_(25,"p",12),x(26,"Don't have account? "),_(27,"a",13),x(28," Create one "),Y(29,"i",14),w()()()}n&2&&(W("ngClass",r.networkError?"border-danger":""),T(8),sn(r.emailError!=null||r.credentialError!=null?"is-invalid":""),Ht("ngModel",r.model.email),T(2),z(r.emailError),T(2),z(r.credentialError),T(4),sn(r.passwordError!=null||r.credentialError!=null?"is-invalid":""),Ht("ngModel",r.model.password),T(2),z(r.passwordError),T(2),z(r.credentialError),T(4),he(r.networkError?24:-1),T(3),W("routerLink",ar(13,Dz)))},dependencies:[zr,fc,qr,vo,hc,Di,ws,xt,bn,Mr],styles:[".login-form[_ngcontent-%COMP%]{width:320px}"]})};var im=class t{ngOnInit(){}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["login-page"]],standalone:!0,features:[X],decls:2,vars:0,consts:[[1,"container"]],template:function(n,r){n&1&&(_(0,"div",0),Y(1,"app-login-form"),w())},dependencies:[rm]})};var pc=class t{today=new Date;dayOfWeek=this.today.getDay();tillWeekend(){let e=5-this.dayOfWeek,n;return e===1?n="Just one day away from the weekend.":e===0?n="Just few hours away from the weekend.":e===-1||e===5?n="It's weekend!!!":n="Just "+e+" days away from the weekend.",n}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-calendar-sheet"]],standalone:!0,features:[X],decls:24,vars:21,consts:[[1,"w-100"],[1,"card","mb-3","text-center"],[1,"card-header"],[1,"fs-5","fw-bold"],[1,"card-body","my-4"],[1,"card-title","display-1","fw-bold"],[1,"fw-bold","fs-5"],[1,"text-primary"],[1,"card-footer"],[1,"bg-white","border","border-dark-subtle","fs-4","align-middle","me-1","px-1"],[1,"align-middle"]],template:function(n,r){n&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),x(4),He(5,"date"),w()(),_(6,"div",4)(7,"h1",5),x(8),He(9,"date"),w(),_(10,"p",6),x(11),He(12,"date"),w(),_(13,"small",7),x(14),w()(),_(15,"div",8)(16,"span",9),x(17),He(18,"date"),w(),_(19,"small",10),x(20," week of "),w(),_(21,"span",10),x(22),He(23,"date"),w()()()()),n&2&&(T(4),z(zt(5,6,r.today,"MMMM")),T(4),z(zt(9,9,r.today,"d")),T(3),z(zt(12,12,r.today,"EEEE")),T(3),z(r.tillWeekend()),T(3),z(zt(18,15,r.today,"ww")),T(5),Re("",zt(23,18,r.today,"yyyy")," year."))},dependencies:[Hn]})};function Sz(t,e){t&1&&(_(0,"div",3)(1,"span",8),x(2),w()()),t&2&&(T(2),z(e))}function Az(t,e){if(t&1&&(_(0,"blockquote",9)(1,"p"),x(2),w()(),_(3,"figcaption",10)(4,"cite",11),x(5),w()()),t&2){let n=e;T(2),z(n.quote),T(3),z(n.author)}}var Mz=[{author:"Paul J. Meyer",quote:"Productivity is never an accident. It is always the result of a commitment to excellence, intelligent planning, and focused effort."},{author:"Bruce Lee",quote:"I fear not the man who has practiced 10,000 kicks once, but I fear the man who has practiced one kick 10,000 times."},{author:"BruceLee",quote:"If you spend too much time thinking about a thing, you'll never get it done."},{author:"Rosabeth Moss Kanter",quote:"I've found that small wins, small projects, small differences often make huge differences."},{author:"Sam Walton",quote:"Celebrate your successes. Find some humor in your failures."},{author:"Paulo Coelho",quote:"The great victory, which appears so simple today, was the result of a series of small victories that went unnoticed."},{author:"Tim Ferriss",quote:"Focus on being productive instead of busy."},{author:"Peter Drucker",quote:"What gets measured gets managed."},{author:"Stephen King",quote:"Amateurs sit and wait for inspiration, the rest of us just get up and go to work."}],om=class t{userService=N(Je);quotes=Mz;user$=this.userService.userSubject$.pipe(q(e=>e?.username));randomQuotes$=pg(1e4).pipe(Mo(Math.floor(Math.random()*this.quotes.length)),q(()=>this.quotes[Math.floor(Math.random()*this.quotes.length)]));constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["welcome-page"]],standalone:!0,features:[X],decls:15,vars:6,consts:[[1,"container","text-center"],[1,"my-5"],[1,"me-2","pacifico-regular","d-inline"],[1,"fs-1","h-1","d-inline"],[1,"fs-1","d-inline"],[1,"text-center"],[1,"w-100","d-flex","justify-content-center","p-5"],[1,"maxw-320"],[1,"text-bg-warning","fw-bold","p-1"],[1,"blockquote"],[1,"blockquote-footer"],["title","Source Title"]],template:function(n,r){if(n&1&&(_(0,"div",0)(1,"div",1)(2,"h2",2),x(3,"Hello"),w(),Ee(4,Sz,3,1,"div",3),He(5,"async"),_(6,"div",4)(7,"span"),x(8,"."),w()()(),_(9,"figure",5),Ee(10,Az,6,2),He(11,"async"),w(),_(12,"div",6)(13,"div",7),Y(14,"app-calendar-sheet"),w()()()),n&2){let i,o;T(4),he((i=wn(5,2,r.user$))?4:-1,i),T(6),he((o=wn(11,4,r.randomQuotes$))?10:-1,o)}},dependencies:[pc,Ki]})};var sm=(n=>(n.admin="admin",n.standard="standard",n))(sm||{});var uN=t=>({"is-invalid":t}),xz=()=>["0","1","2","3","4","5","6","7"];function Rz(t,e){t&1&&(_(0,"div",11),x(1,"Enter your username. Minimum 4 characters."),w())}function Nz(t,e){t&1&&(_(0,"div",11),x(1,"Enter valid email"),w())}function Pz(t,e){t&1&&(_(0,"div",11),x(1,"The password must be at least 8 characters, contain at least one capital letter, one lowercase letter, one digit and one special character"),w())}function kz(t,e){if(t&1){let n=yt();_(0,"app-avatar-image",27),Ae("click",function(){let i=Oe(n).$implicit,o=ne();return Fe(o.toggleSelect(i))}),w()}if(t&2){let n=e.$implicit,r=ne();W("id",n)("selected",n===r.model.selectedAvatar)("hoverable",!0)}}function Oz(t,e){if(t&1&&(_(0,"div",26),x(1),w()),t&2){let n=ne();T(),z(n.networkError)}}var am=class t{userService=N(Je);router=N(Ot);creatorRole;roles=sm;model={username:"",email:"",password:"",role:"standard",links:["login"],selectedAvatar:"0"};emailError=null;passwordError=null;credentialError=null;networkError=null;onSubmit(e){return I(this,null,function*(){this.emailError=null,this.credentialError=null,this.passwordError=null,this.networkError=null;try{console.log("try submit ",this.model),yield this.userService.createUser(this.model),this.router.navigate(["/user"]),console.log("Submitted")}catch(n){switch(console.log("Error in new user form"),console.log(n.code),n.code){case"auth/invalid-credential":this.credentialError=n.message;break;case"auth/missing-password":this.passwordError=n.message;break;case"auth/invalid-email":this.emailError=n.message;break;case"auth/network-request-failed":this.networkError=n.message;break;case"auth/email-already-in-use":this.emailError=n.message;break}console.log(n.message)}})}toggleSelect(e){this.model.selectedAvatar!==e&&(this.model.selectedAvatar=e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["newuser-form"]],inputs:{creatorRole:"creatorRole"},standalone:!0,features:[X],decls:51,vars:26,consts:[["myForm","ngForm"],["username","ngModel"],["emailInput","ngModel"],["password","ngModel"],[1,"card","p-3","m-5","w320","mx-auto","bg-body-tertiary",3,"ngClass"],[1,"text-center","m-3"],[1,"pb-3",3,"ngSubmit"],[1,"mb-3"],["for","username",1,"form-label"],["type","email","id","username","minlength","4","required","","name","username",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"invalid-feedback"],[1,"form-text","text-danger"],["for","email",1,"form-label"],["type","email","email","","id","email","required","","name","email",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","password",1,"form-label"],["type","password","id","password","required","","pattern","^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d)(?=.*[!@#$%^&*()]).{8,}$","name","password",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","role",1,"form-label"],["id","role","name","role",1,"form-select",3,"ngModelChange","ngModel"],["value","admin",3,"disabled"],["value","standard"],["for","avatar-img",1,"form-label"],["type","input","id","avatar-img",1,"card","p-3","mb-3"],[1,"d-flex","flex-wrap","justify-content-around"],[3,"id","selected","hoverable"],[1,"text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"form-text","text-danger","m-3"],[3,"click","id","selected","hoverable"]],template:function(n,r){if(n&1){let i=yt();_(0,"div",4)(1,"h3",5),x(2,"Create user account"),w(),_(3,"form",6,0),Ae("ngSubmit",function(){Oe(i);let s=jn(4);return Fe(r.onSubmit(s))}),_(5,"div",7)(6,"label",8),x(7,"User name"),w(),_(8,"input",9,1),qt("ngModelChange",function(s){return Oe(i),an(r.model.username,s)||(r.model.username=s),Fe(s)}),w(),_(10,"div",10),x(11),w(),Ee(12,Rz,2,0,"div",11),w(),_(13,"div",7)(14,"label",12),x(15,"Email"),w(),_(16,"input",13,2),qt("ngModelChange",function(s){return Oe(i),an(r.model.email,s)||(r.model.email=s),Fe(s)}),w(),_(18,"div",10),x(19),w(),_(20,"div",10),x(21),w(),Ee(22,Nz,2,0,"div",11),w(),_(23,"div",7)(24,"label",14),x(25,"Password"),w(),_(26,"input",15,3),qt("ngModelChange",function(s){return Oe(i),an(r.model.password,s)||(r.model.password=s),Fe(s)}),w(),_(28,"div",10),x(29),w(),_(30,"div",10),x(31),w(),Ee(32,Pz,2,0,"div",11),w(),_(33,"div",7)(34,"label",16),x(35,"Role"),w(),_(36,"select",17),qt("ngModelChange",function(s){return Oe(i),an(r.model.role,s)||(r.model.role=s),Fe(s)}),_(37,"option",18),x(38,"Admin"),w(),_(39,"option",19),x(40,"Standard"),w()()(),_(41,"label",20),x(42,"Select your avatar:"),w(),_(43,"div",21)(44,"div",22),ot(45,kz,1,3,"app-avatar-image",23,_n),w()(),_(47,"div",24)(48,"button",25),x(49,"Create"),w()(),Ee(50,Oz,2,1,"div",26),w()()}if(n&2){let i=jn(4),o=jn(9),s=jn(17),a=jn(27);W("ngClass",i.invalid&&i.touched?"border-danger":""),T(8),sn(r.credentialError!=null?"is-invalid":""),Ht("ngModel",r.model.username),W("ngClass",o.invalid&&o.touched?"is-invalid":""),T(3),z(r.credentialError),T(),he(o.invalid&&o.touched?12:-1),T(4),Ht("ngModel",r.model.email),W("ngClass",Ar(21,uN,s.invalid&&s.touched||r.emailError||r.credentialError)),T(3),z(r.emailError),T(2),z(r.credentialError),T(),he(s.invalid&&s.touched?22:-1),T(4),Ht("ngModel",r.model.password),W("ngClass",Ar(23,uN,r.passwordError||r.credentialError||a.invalid&&a.touched)),T(3),z(r.passwordError),T(2),z(r.credentialError),T(),he(a.invalid&&a.touched?32:-1),T(4),Ht("ngModel",r.model.role),T(),W("disabled",r.creatorRole!==r.roles.admin),T(8),st(ar(25,xz)),T(3),W("disabled",i.invalid),T(2),he(r.networkError?50:-1)}},dependencies:[zr,fc,Jp,em,qr,Zp,vo,hc,Tl,nE,rE,tE,Di,ws,xt,Mr,Hr],styles:[".w320[_ngcontent-%COMP%]{width:320px}"]})};function iE(t){t||(ha(iE),t=N(Cr));let e=new de(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(zc(e))}function Yn(t,e){!e?.injector&&ha(Yn);let n=e?.injector??N(mt),r=new $c(1),i=my(()=>{let o;try{o=t()}catch(s){In(()=>r.error(s));return}In(()=>r.next(o))},{injector:n,manualCleanup:!0});return n.get(Cr).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}function Pt(t,e){let n=!e?.manualCleanup;n&&!e?.injector&&ha(Pt);let r=n?e?.injector?.get(Cr)??N(Cr):null,i=Fz(e?.equal),o;e?.requireSync?o=yn({kind:0},{equal:i}):o=yn({kind:1,value:e?.initialValue},{equal:i});let s=t.subscribe({next:a=>o.set({kind:1,value:a}),error:a=>{if(e?.rejectErrors)throw a;o.set({kind:2,error:a})}});if(e?.requireSync&&o().kind===0)throw new G(601,!1);return r?.onDestroy(s.unsubscribe.bind(s)),Bn(()=>{let a=o();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new G(601,!1)}},{equal:e?.equal})}function Fz(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}var cm=class t{userService=N(Je);role="standard";loggedUser=this.userService.userSubject$.pipe(Ue(e=>{if(e)if(e?.role==="admin"){this.role="admin";return}else this.role=e.role}),iE()).subscribe();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["create-user-page"]],standalone:!0,features:[X],decls:1,vars:1,consts:[[3,"creatorRole"]],template:function(n,r){n&1&&Y(0,"newuser-form",0),n&2&&W("creatorRole",r.role)},dependencies:[am]})};var Lz=t=>[t];function Vz(t,e){if(t&1&&(_(0,"span",3),x(1),w()),t&2){let n=ne();T(),z(n.data.notifications)}}function Uz(t,e){if(t&1&&(_(0,"li",11),Y(1,"i",12),w(),_(2,"li",13)(3,"small",14),x(4),w()(),_(5,"li",15)(6,"small",14),x(7),w()()),t&2){let n=ne(3);T(3),W("title",n.data.tasks.activeTasks[0].name),T(),z(n.data.tasks.activeTasks[0].name),T(2),W("title",n.data.tasks.activeTasks[0].content.description),T(),z(n.data.tasks.activeTasks[0].content.description)}}function jz(t,e){t&1&&(_(0,"li",10)(1,"small"),Y(2,"i",16),w()())}function Bz(t,e){if(t&1&&(_(0,"ul",7),Ee(1,Uz,8,4)(2,jz,3,0,"li",10),w()),t&2){let n=e.$index;T(),he(n<2?1:-1),T(),he(n>=2?2:-1)}}function $z(t,e){if(t&1&&(_(0,"li",6)(1,"small"),x(2,"Active Tasks :"),w(),ot(3,Bz,3,2,"ul",7,ni),w()),t&2){let n=ne();T(3),st(n.data.tasks.activeTasks)}}function Hz(t,e){if(t&1&&(_(0,"ul",7)(1,"li",11),Y(2,"i",17),w(),_(3,"li",18)(4,"small"),x(5),w()(),_(6,"li",19)(7,"small"),x(8),He(9,"date"),w()()()),t&2){let n=e.$implicit;T(5),z(n.message),T(3),z(zt(9,2,n.createdAt,"HH:mm dd.MM.YY"))}}var um=class t{data={branchTitle:"",messages:{read:[],unread:[]},workers:null,notifications:0,lastnotification:0};data2=vt();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-card-widget"]],inputs:{data:"data",data2:[1,"data2"]},standalone:!0,features:[X],decls:16,vars:7,consts:[[1,"card","mw-120","btn","p-0","btn-light",3,"routerLink"],[1,"card-header","fw-bold","text-body","text-center","orange","text-capitalize"],[1,"fs-5","me-1"],[1,"badge","bg-success","align-top"],[1,"card-body","p-0"],[1,"list-group","list-group-flush"],[1,"list-group-item","text-start"],[1,"list-group","list-group-horizontal","lh-1"],[1,"card-footer"],[1,"text-body-secondary"],[1,"list-group-item","py-1","w-100","text-center"],[1,"list-group-item","p-1"],[1,"bi","bi-gear"],[1,"list-group-item","p-1","text-truncate"],[3,"title"],[1,"list-group-item","flex-grow-1","p-1","text-truncate"],[1,"bi","bi-three-dots"],[1,"bi","bi-envelope"],[1,"list-group-item","flex-grow-1","p-1","text-truncate","overflow-x-hidden"],[1,"list-group-item","text-end","p-1","text-truncate"]],template:function(n,r){n&1&&(_(0,"div",0)(1,"div",1)(2,"span",2),x(3),w(),Ee(4,Vz,2,1,"span",3),w(),_(5,"div",4)(6,"ul",5),Ee(7,$z,5,0,"li",6),_(8,"li",6)(9,"small"),x(10,"Messages :"),w(),ot(11,Hz,10,5,"ul",7,ni),w()(),_(13,"div",8)(14,"small",9),x(15),w()()()()),n&2&&(W("routerLink",Ar(5,Lz,"/"+r.data.branchTitle)),T(3),z(r.data.branchTitle),T(),he(r.data.notifications>0?4:-1),T(3),he(r.data.tasks&&r.data.tasks.activeTasks?7:-1),T(4),st(r.data.messages.unread),T(4),Re("New element ",r.data.lastnotification," mins ago"))},dependencies:[Hn,xt,bn]})};var mc=class t{branchDataMockup=[{branchTitle:"workshop",notifications:2,lastnotification:154,tasks:{activeTasks:[{name:"Build Logo",content:{description:"160 x 480 logo for Tesco",files:""},taskId:"000002",createdAt:"13-12-2024 10:11"},{name:"Build Logo",content:{description:"160 x 480 logo for Tesco",files:""},taskId:"000002",createdAt:"13-12-2024 10:11"},{name:"Build Logo",content:{description:"160 x 480 logo for Tesco",files:""},taskId:"000002",createdAt:"13-12-2024 10:11"}],activeTasksLength:1,pastTasks:[{name:"Banner preparation",content:{description:"240 x 240 banner for Nike",files:""},taskId:"000001",createdAt:"13-12-2024 09:05"}],pastTasksLength:1},workers:[{name:"mirek",uid:"123123",workingDay:8,hoursWorked:1,avatarID:"0"},{name:"staszek",uid:"123123",workingDay:8,hoursWorked:2,avatarID:"3"},{name:"janek",uid:"123123",workingDay:12,hoursWorked:6,avatarID:"4"},{name:"marek",uid:"123123",workingDay:8,hoursWorked:8,avatarID:"5"}],messages:{unread:[{author:"karol",message:"Welcome new employers",createdAt:"12-12-2024 13:43",read:!1,id:"1"},{author:"karol",message:"Welcome new employers",createdAt:"12-12-2024 13:44",read:!1,id:"1"},{author:"mirek",message:"Wrong parts",createdAt:"12-12-2024 13:43",read:!0,id:"2"},{author:"ania",message:"Where is projecgt of new part.",createdAt:"12-13-2024 10:43",read:!1,id:"3"}],read:[{author:"karol",message:"Welcome new employers",createdAt:"12-12-2024 13:43",read:!1,id:"1"},{author:"mirek",message:"Wrong parts",createdAt:"12-12-2024 13:43",read:!0,id:"2"},{author:"ania",message:"Where is projecgt of new part.",createdAt:"12-13-2024 10:43",read:!1,id:"3"}]}},{branchTitle:"warehouse",notifications:3,lastnotification:12,tasks:{activeTasks:[{name:"Order tape",content:{description:"50 pcs. of masking tape",files:""},taskId:"000020",createdAt:"13-12-2024 10:11"}],activeTasksLength:1,pastTasks:[{name:"Order metal",content:{description:"20x30 4m rectangle alu profiles 45 pcs.",files:""},taskId:"000010",createdAt:"13-12-2024 09:05"}],pastTasksLength:1},workers:null,messages:{unread:[{author:"karol",message:"new employee ...",createdAt:"07-22-2024 13:43",read:!1,id:"4"},{author:"ania",message:"invitation ...",createdAt:"07-22-2024 13:43",read:!0,id:"5"}],read:[]}},{branchTitle:"outside jobs",notifications:1,lastnotification:4,tasks:{activeTasks:[{name:"Logo montage",content:{description:"160 x 480 logo for Tesco",files:""},taskId:"000002",createdAt:"13-12-2024 10:11"}],activeTasksLength:1,pastTasks:[{name:"Demontage Montage preparation",content:{description:"240 x 240 banner for Nike",files:""},taskId:"000001",createdAt:"13-12-2024 09:05"}],pastTasksLength:1},workers:[{name:"mirek",uid:"123123",workingDay:8,hoursWorked:5,avatarID:"3"}],messages:{unread:[{author:"karol",message:"Welcome new employers",createdAt:"12-12-2024 13:43",read:!1,id:"6"},{author:"mirek",message:"Wrong parts",createdAt:"12-12-2024 13:43",read:!0,id:"7"},{author:"ania",message:"Where is projecgt of new part.",createdAt:"12-13-2024 10:43",read:!1,id:"8"}],read:[]}},{branchTitle:"hr",notifications:4,lastnotification:32,tasks:{activeTasks:[{name:"Prepare agreement",content:{description:"Agreement for new...",files:""},taskId:"000002",createdAt:"13-12-2024 10:11"}],activeTasksLength:1,pastTasks:[{name:"test job 1",content:{description:"New job task 1",files:""},taskId:"000001",createdAt:"13-12-2024 09:05"}],pastTasksLength:1},workers:null,messages:{unread:[],read:[{author:"karol",message:"Welcome new ...",createdAt:"12-25-2024 13:43",read:!0,id:"9"},{author:"ania",message:"Done new ...",createdAt:"12-26-2024 15:43",read:!1,id:"10"},{author:"mirek",message:"Send ...",createdAt:"12-27-2024 11:43",read:!0,id:"11"}]}},{branchTitle:"marketing",notifications:2,lastnotification:72,tasks:{activeTasks:[{name:"Make offer",content:{description:"Castorama logo",files:""},taskId:"000300",createdAt:"13-12-2024 10:11"}],activeTasksLength:1,pastTasks:[{name:"Send recipee",content:{description:"Nike logo",files:""},taskId:"000400",createdAt:"13-12-2024 09:05"}],pastTasksLength:1},workers:null,messages:{unread:[{author:"karol",message:"where can I find...",createdAt:"12-12-2024 13:43",read:!1,id:"12"}],read:[]}}];static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};function qz(t,e){if(t&1&&(_(0,"div",2),Y(1,"app-card-widget",3),w()),t&2){let n=e.$implicit;T(),W("data",n)}}var lm=class t{data=N(mc);branchData=this.data.branchDataMockup;widgetData;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-dashboard-page"]],standalone:!0,features:[X],decls:6,vars:0,consts:[[1,"container","py-5"],[1,"row","row-cols-sm-1","row-cols-md-2","row-cols-lg-3","row-cols-1","justify-content-start","g-3"],[1,"col","flex-shrink-1"],[3,"data"]],template:function(n,r){n&1&&(_(0,"div",0)(1,"div",1),ot(2,qz,2,1,"div",2,ni),_(4,"div",2),Y(5,"app-calendar-sheet"),w()()()),n&2&&(T(2),st(r.branchData))},dependencies:[um,pc]})};function zz(t,e){if(t&1&&(_(0,"div",19),x(1),w()),t&2){let n=ne().$implicit;T(),z(n[0])}}function Wz(t,e){if(t&1&&(_(0,"div",19),x(1),w()),t&2){let n=ne().$implicit;T(),z(n[0])}}function Gz(t,e){if(t&1&&(_(0,"div",14)(1,"div",15)(2,"div",16)(3,"span",17),x(4),w()()(),_(5,"div",18),Ee(6,zz,2,1,"div",19)(7,Wz,2,1,"div",19),w()()),t&2){let n=e.$implicit,r=e.$index;T(4),z(n[1]),T(2),he(r===4?6:7)}}var dm=class t{data=vt();readModel=vt(!1);checkHandler=ga();favouritesHandler=ga();deleteHandler=ga();dataKeys=Bn(()=>[[this.data()?.sender,"Author"],[this.data()?.departments,"Departments"],[this.data()?.recipients,"Recipients"],[this.data()?.title,"Title"],[this.data()?.message,"Message"],[this.data()?.timestamp.toDate().toISOString(),"Created"],[this.data()?.id,"Id"]]);toggleFavourites(){this.favouritesHandler.emit()}toggleRead(e){this.checkHandler.emit(e.checked)}deleteMessage(){this.deleteHandler.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-message-detail"]],inputs:{data:[1,"data"],readModel:[1,"readModel"]},outputs:{checkHandler:"checkHandler",favouritesHandler:"favouritesHandler",deleteHandler:"deleteHandler"},standalone:!0,features:[X],decls:16,vars:3,consts:[["check",""],[1,"container","col-lg-6","col-md-8","col-sm-11","col-12","mx-auto"],[1,"d-flex","mb-1"],[1,"input-group","input-group-sm"],[1,"input-group-text"],["title","read","type","checkbox","name","check","aria-label","Checkbox for following text input",1,"form-check-input","mt-0","fs-4",3,"change","checked"],["type","button","title","add to favourite",1,"btn","flex-grow-1","fs-4",3,"click"],[1,"bi","bi-star"],["type","button","title","reply",1,"btn","btn-outline-success","flex-grow-1","fs-4"],[1,"bi","bi-reply"],["type","button","title","forward",1,"btn","btn-outline-primary","flex-grow-1","fs-4"],[1,"bi","bi-fast-forward"],["type","button","title","to trash",1,"btn","btn-outline-danger","flex-grow-1","fs-4",3,"click"],[1,"bi","bi-trash"],[1,"row","g-0","mb-1","align-items-stretch"],[1,"col-sm-3","col-md-3","border-end","d-flex","align-items-center","border","rounded"],[1,"input-group","input-group-sm","h-100"],[1,"input-group-text","w-100","border-0","bg-light"],[1,"col-sm-9","col-md-9","border","rounded"],[1,"form-control","border-0"]],template:function(n,r){if(n&1){let i=yt();_(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"input",5,0),Ae("change",function(){Oe(i);let s=jn(5);return Fe(r.toggleRead(s))}),w()(),_(6,"button",6),Ae("click",function(){return Oe(i),Fe(r.toggleFavourites())}),Y(7,"i",7),w(),_(8,"button",8),Y(9,"i",9),w(),_(10,"button",10),Y(11,"i",11),w(),_(12,"button",12),Ae("click",function(){return Oe(i),Fe(r.deleteMessage())}),Y(13,"i",13),w()()(),ot(14,Gz,8,2,"div",14,_n),w()}if(n&2){let i;T(4),W("checked",r.readModel()),T(2),sn((i=r.data())!=null&&i.favourite?"btn-warning":"btn-outline-warning"),T(8),st(r.dataKeys())}},dependencies:[zr]})};var Wr=class t{firestore=N(ln);userService=N(Je);getMessagesForDepartment(e){if(!e)return U([]);let n=Yt(this.firestore,"messages"),r=pr(n,Ci("departments","array-contains",e),_s("timestamp"));return fr(r,{idField:"id"})}getMessagesForUser(e){if(!e)return U([]);let n=Yt(this.firestore,"messages"),r=pr(n,Ci("recipients","array-contains",e));return fr(r,{idField:"id"})}getMessageCountForDepartment(e){if(!e)return U(0);let n=Yt(this.firestore,"messages"),r=pr(n,Ci("departments","array-contains",e));return PR(r)}getOne(e){let n=Lt(this.firestore,"messages",e);return $r(n,{idField:"id"})}getAll(){let e=Yt(this.firestore,"messages");return fr(e,{idField:"id"})}sendMessage(e){return I(this,null,function*(){let n=Yt(this.firestore,"messages");try{let r=yield yl(n,e);return console.log("Message writen to database wit id: ",r.id),r}catch(r){throw console.log("Something went wrong",r.message),r}})}toggleFavourite(e,n){let r=Lt(this.firestore,"messages",e);sc(r,{favourite:n}).then(()=>console.log("Message updated")).catch(o=>console.log("Error has occurre :",o))}toggleRead(e,n){let r=this.userService.loggedFSUser.getValue()?.workerId;if(!r){console.log("No user ID");return}let i=Lt(this.firestore,"messages",e);n?sc(i,{readBy:OR(r)}).then(()=>console.log("Message marked as read")).catch(o=>console.log("Error updating messages",o)):sc(i,{readBy:kR(r)}).then(()=>console.log("Message marked as unread")).catch(o=>console.log("Error updating document",o))}isRead(e){let n=this.userService.loggedFSUser.getValue()?.workerId,r=Lt(this.firestore,"messages",e),i=$r(r,{idField:"id"});return n?i.pipe(q(o=>o?.readBy.includes(n))):U(void 0)}delete(e){let n=Lt(this.firestore,"messages",e);FR(n).then(()=>console.log("Message deleted")).catch(r=>console.log("Error has occurre durig deletion process :",r))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var hm=class t{router=N(Ot);id=vt();messageService=N(Wr);read=Pt(Yn(this.id).pipe(ke(e=>e?this.messageService.isRead(e):U(void 0))),{initialValue:void 0});data=Pt(Yn(this.id).pipe(ke(e=>e?this.messageService.getOne(e):U(void 0))),{initialValue:void 0});toggleFavourites(){let e=this.id();e&&(this.data()?.favourite?this.messageService.toggleFavourite(e,!1):this.messageService.toggleFavourite(e,!0))}toggleRead(e){let n=this.id();n&&this.messageService.toggleRead(n,e)}deleteMessage(){let e=this.id();e&&(this.messageService.delete(e),this.router.navigate(["/mailbox"]))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["ng-component"]],inputs:{id:[1,"id"]},standalone:!0,features:[X],decls:4,vars:2,consts:[[1,"container-fluid","mt-3"],[1,"text-center"],[3,"favouritesHandler","deleteHandler","checkHandler","data","readModel"]],template:function(n,r){n&1&&(_(0,"div",0)(1,"h4",1),x(2,"Message detail"),w(),_(3,"app-message-detail",2),Ae("favouritesHandler",function(){return r.toggleFavourites()})("deleteHandler",function(){return r.deleteMessage()})("checkHandler",function(o){return r.toggleRead(o)}),w()()),n&2&&(T(3),W("data",r.data())("readModel",r.read()))},dependencies:[xt,dm]})};var Kz=["*"],Qz=(t,e)=>({"bg-success":t,"bg-danger":e}),gc=class t{percent=0;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-progress-bar"]],inputs:{percent:"percent"},standalone:!0,features:[X],ngContentSelectors:Kz,decls:4,vars:6,consts:[["role","progressbar",1,"progress","text-dark"],[1,"progress-bar",3,"ngClass"]],template:function(n,r){n&1&&(zi(),_(0,"div",0),Y(1,"div",1),w(),_(2,"small"),Mn(3),w()),n&2&&(T(),XT("width: "+r.percent+"%"),W("ngClass",_a(3,Qz,r.percent===100,r.percent<=13)))},dependencies:[Mr]})};var fm=class t{percent=0;_user={name:"",id:"",workingDay:0,hoursWorked:8,avatarID:"0"};set user(e){this.percent=100*(e.hoursWorked/e.workingDay),this._user={hoursWorked:e.hoursWorked,name:e.name,id:e.id,workingDay:e.workingDay,avatarID:e.avatarID}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-medium-avatar"]],inputs:{user:"user"},standalone:!0,features:[X],decls:10,vars:6,consts:[[1,"card","w-128","text-center","m-1"],[1,"d-flex","justify-content-center","fill","mt-2"],["size","s",3,"id"],[1,"card-body"],[1,"card-title","text-capitalize"],[3,"percent"],[1,"card-text"]],template:function(n,r){n&1&&(_(0,"div",0)(1,"div",1),Y(2,"app-avatar-image",2),w(),_(3,"div",3)(4,"h5",4),x(5),w(),_(6,"app-progress-bar",5),x(7),w()(),_(8,"small",6),x(9),w()()),n&2&&(T(2),W("id",r._user.avatarID),T(3),z(r._user.name),T(),W("percent",r.percent),T(),fy(" ",r._user.hoursWorked,"/",r._user.workingDay," h "),T(2),Re("# ",r._user.id,""))},dependencies:[Hr,gc]})};var Yz=(t,e)=>[t,e];function Zz(t,e){t&1&&Y(0,"i",9)(1,"i",10)}function Jz(t,e){t&1&&Y(0,"i",4)}function Xz(t,e){if(t&1&&(_(0,"button",1)(1,"div",2)(2,"div",3),Ee(3,Zz,2,0)(4,Jz,1,0,"i",4),w(),_(5,"div",5)(6,"small"),x(7),w()(),_(8,"div",6)(9,"small"),x(10),w()(),_(11,"div",7)(12,"small"),x(13),He(14,"date"),w()(),_(15,"div",8),x(16),w()()()),t&2){let n,r,i=e.$implicit,o=ne().$implicit,s=ne();W("routerLink",_a(11,Yz,i.redirectTo,o.id)),T(),qi("fw-bold",((n=s.config())==null?null:n.type)==="unread"),T(2),he(((r=s.config())==null?null:r.type)==="unread"?3:4),T(4),z(o.sender),T(3),z(o.title),T(3),z(zt(14,8,o.timestamp.toDate().toISOString(),"HH:mm dd.MM.YY ")),T(3),Re(" ",i.label," ")}}function eW(t,e){if(t&1&&ot(0,Xz,17,14,"button",1,_n),t&2){let n,r=ne();st((n=r.config())==null?null:n.actions)}}var pm=class t{config=vt();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-message-list"]],inputs:{config:[1,"config"]},standalone:!0,features:[X],decls:3,vars:0,consts:[[1,"list-group"],["type","button",1,"list-group-item","list-group-item-action","mb-1",3,"routerLink"],[1,"row","parent"],[1,"col-1","ps-2","pe-0"],[1,"bi","bi-envelope-open"],[1,"col-2","text-truncate"],[1,"col","text-truncate"],[1,"col","text-end","ps-0","pe-2"],[1,"badge","text-bg-secondary","sibling","bg-opacity-50","align-middle","fs-5","lh-sm"],[1,"bi","bi-envelope","hideIcon"],[1,"bi","bi-envelope-open","showIcon"]],template:function(n,r){if(n&1&&(_(0,"div",0),ot(1,eW,2,0,null,null,ni),w()),n&2){let i;T(),st((i=r.config())==null?null:i.messages)}},dependencies:[Hn,xt,bn],styles:[".sibling[_ngcontent-%COMP%]{display:none;position:absolute;left:0;top:0;height:40px}.parent[_ngcontent-%COMP%]:hover   .sibling[_ngcontent-%COMP%]{display:inline-block;height:40px}.showIcon[_ngcontent-%COMP%], .parent[_ngcontent-%COMP%]:hover   .hideIcon[_ngcontent-%COMP%]{display:none}.parent[_ngcontent-%COMP%]:hover   .showIcon[_ngcontent-%COMP%]{display:inline-block}"]})};var vc=class t{messageService=N(Wr);userService=N(Je);department=vt();directUserId=vt();department$=Yn(this.department);user$=Yn(this.directUserId);currentUser=this.userService.loggedFSUser.getValue();combined$=Ao([this.department$,this.user$]).pipe(ke(([e,n])=>e?this.messageService.getMessagesForDepartment(e):n?this.messageService.getMessagesForUser(n):U([])));readMessages=Pt(this.combined$.pipe(q(e=>{let n=this.currentUser?.workerId;return n?e.filter(r=>r.readBy.length>0?r.readBy.includes(n):!1):[]})),{initialValue:[]});unreadMessages=Pt(this.combined$.pipe(q(e=>{let n=this.currentUser?.workerId;return n?e.filter(r=>r.readBy.length>0?!r.readBy.includes(n):!0):[]})),{initialValue:[]});configRead=Bn(()=>({actions:[{label:"Open message",redirectTo:"/message"}],type:"read",messages:this.readMessages()}));configUnread=Bn(()=>({actions:[{label:"Open message",redirectTo:"/message"}],type:"unread",messages:this.unreadMessages()}));static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-message-list-page"]],inputs:{department:[1,"department"],directUserId:[1,"directUserId"]},standalone:!0,features:[X],decls:3,vars:2,consts:[[1,"container-fluid","my-3"],[3,"config"]],template:function(n,r){n&1&&(_(0,"div",0),Y(1,"app-message-list",1)(2,"app-message-list",1),w()),n&2&&(T(),W("config",r.configUnread()),T(),W("config",r.configRead()))},dependencies:[pm]})};var mm=class t{messagesMocup={unread:[{author:"karol",message:"Welcome new employers",createdAt:"12-12-2024 13:43",read:!1,id:"1"},{author:"karol",message:"Welcome new employers",createdAt:"12-12-2024 13:44",read:!1,id:"1"},{author:"mirek",message:"Wrong parts",createdAt:"12-12-2024 13:43",read:!0,id:"2"},{author:"ania",message:"Where is projecgt of new part.",createdAt:"12-13-2024 10:43",read:!1,id:"3"}],read:[{author:"karol",message:"Welcome new employers",createdAt:"12-12-2024 13:43",read:!1,id:"1"},{author:"mirek",message:"Wrong parts",createdAt:"12-12-2024 13:43",read:!0,id:"2"},{author:"ania",message:"Where is projecgt of new part.",createdAt:"12-13-2024 10:43",read:!1,id:"3"}]};firestore=N(ln);actualTab=new ct("");getMessagesForWorkshop(){let n=Yt(this.firestore,"groups/5rGeu1EDa4xsBlsz616a/messages"),r=pr(n,_s("timestamp"));return fr(r,{idField:"id"})}getMessagesForDepartment(e){let n=e,r=Yt(this.firestore,`groups/${n}/messages`),i=pr(r,_s("timestamp"));return fr(i,{idField:"id"})}sendMessageToWorkshop(e,n){let i=Yt(this.firestore,"groups/5rGeu1EDa4xsBlsz616a/messages");yl(i,{message:e,timestamp:oc(),sender:n})}sendMessageToDepartment(e,n,r){let i=e,o=Yt(this.firestore,`groups/${i}/messages`);yl(o,{message:n,timestamp:oc(),sender:r})}getWorkshopDepartment(){let n=Lt(this.firestore,"groups/"+"5rGeu1EDa4xsBlsz616a");return $r(n).pipe(Ue(i=>console.log("group",i)))}getDepartment(e){e&&U(null);let n=Lt(this.firestore,"departments/"+e);return $r(n).pipe(ft(()=>U(null)))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var yo=class t{firestore=N(ln);getOne(e){if(!e)return U(void 0);let n=Lt(this.firestore,"workers",e);return Pe(VR(n)).pipe(q(r=>{if(r.exists())return L({id:r.id},r.data())}),ft(r=>(console.error("B\u0142\u0105d pobierania pracownika:",e,r),U(void 0))))}getMany(e){if(e.length===0)return U([]);let n=pr(Yt(this.firestore,"workers"),Ci(LR(),"in",e));return Pe(UR(n)).pipe(q(r=>{let i=[];return r.forEach(o=>{let s=o.data();s.id=o.id,i.push(s)}),i}),ft(r=>(console.error("B\u0142\u0105d pobierania wielu pracownik\xF3w:",r),U([]))))}getAll(){let e=Yt(this.firestore,"workers");return fr(e,{idField:"id"})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var _o=class t{firestore=N(ln);getActiveTasksForDepartment(e){let n=Yt(this.firestore,"tasks"),r=pr(n,Ci("department","==",e),Ci("active","==",!0),_s("priority"));return fr(r,{idField:"id"})}getOne(e){if(e){let n=Lt(this.firestore,"tasks/"+e);return $r(n,{idField:"id"})}return U(void 0)}updateStep(e,n){let r=Lt(this.firestore,"tasks",e),i=n[0],o=n[1],s={[`steps.${i}`]:o};sc(r,s).then(()=>console.log(`Step ${i} property updated`)).catch(a=>console.log("Error updating steps property ",a))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var gm=t=>{switch(t){case 0:return"text-bg-danger";case 1:return"text-bg-warning";case 2:return"text-bg-info";case 3:return"text-bg-secondary"}};var tW=()=>[],nW=t=>["/task",t],rW=t=>["/worker",t],iW=()=>["/mailbox"];function oW(t,e){if(t&1&&(_(0,"span",11),x(1),w()),t&2){ne(3);let n=ri(1);T(),Re(" ",n.length," ")}}function sW(t,e){if(t&1&&Ee(0,oW,2,1,"span",11),t&2){ne(2);let n=ri(1);he(n?0:-1)}}function aW(t,e){t&1&&(_(0,"span",11),x(1),w()),t&2&&(T(),Re(" ",e," "))}function cW(t,e){if(t&1&&(Ee(0,aW,2,1,"span",11),He(1,"async")),t&2){let n,r=ne(2);he((n=wn(1,1,r.messagesNumber$))?0:-1,n)}}function uW(t,e){if(t&1&&(_(0,"span",11),x(1),w()),t&2){let n=ne(3);T(),Re(" ",n.workers().length," ")}}function lW(t,e){if(t&1&&Ee(0,uW,2,1,"span",11),t&2){let n=ne(2);he(n.workers().length>0?0:-1)}}function dW(t,e){if(t&1){let n=yt();_(0,"li",9),Ae("click",function(){let i=Oe(n).$implicit,o=ne();return Fe(o.selectTab(i))}),_(1,"button",10),x(2),Ee(3,sW,1,1)(4,cW,2,3)(5,lW,1,1),w()()}if(t&2){let n=e.$implicit;ne();let r=ri(5);T(),qi("active",r===n),T(),Re("",n," "),T(),he(n==="Active Tasks"?3:-1),T(),he(n==="Messages"?4:-1),T(),he(n==="Workers"?5:-1)}}function hW(t,e){if(t&1&&(_(0,"tr")(1,"td",21)(2,"span",22),x(3),w()(),_(4,"td"),x(5),w(),_(6,"td",23),x(7),w(),_(8,"td",24),x(9),He(10,"date"),w(),_(11,"td",23),x(12),w(),_(13,"td"),Y(14,"app-progress-bar",25),w(),_(15,"td")(16,"button",26),x(17,"Open"),w()()()),t&2){let n=e.$implicit,r=ne(3);T(2),sn(r.setColor(n.priority)),T(),z(n.priority),T(2),z(n.name),T(2),z(n.description),T(2),Re(" ",zt(10,9,n.timestamp.toDate().toISOString(),"dd MMM yyyy, HH:mm")," "),T(3),z(n.contractorNames),T(2),W("percent",r.taskPercentOfCompletion(n)),T(2),W("routerLink",Ar(12,nW,n.id))}}function fW(t,e){if(t&1&&(_(0,"li",12)(1,"div",13)(2,"table",14)(3,"thead")(4,"tr")(5,"th",15),x(6,"Priority"),w(),_(7,"th",15),x(8,"Name"),w(),_(9,"th",16),x(10,"Info"),w(),_(11,"th",17),x(12,"Started"),w(),_(13,"th",16),x(14,"Contractors"),w(),_(15,"th",15),x(16,"Progress"),w(),_(17,"th",15),x(18,"Action"),w()()(),_(19,"tbody"),ot(20,hW,18,14,"tr",null,_n),w()()(),_(22,"div",18)(23,"button",19),Y(24,"i",20),x(25," History"),w()()()),t&2){ne(2);let n=ri(1);T(20),st(n)}}function pW(t,e){if(t&1&&Ee(0,fW,26,0,"li",12),t&2){ne();let n=ri(1);he(n.length>0?0:-1)}}function mW(t,e){if(t&1&&Y(0,"app-medium-avatar",28),t&2){let n=e.$implicit;W("user",n)("routerLink",Ar(2,rW,n.id))}}function gW(t,e){if(t&1&&(_(0,"li",12)(1,"div",27),ot(2,mW,1,4,"app-medium-avatar",28,_n),w()()),t&2){let n=ne(2);T(2),st(n.workers())}}function vW(t,e){if(t&1&&Ee(0,gW,4,0,"li",12),t&2){let n=ne();he(n.data.tasks&&n.data.tasks.activeTasks?0:-1)}}function yW(t,e){if(t&1&&(Y(0,"app-message-list-page",29),_(1,"div",30)(2,"button",31),Y(3,"i",32),x(4," Mail Box"),w()()),t&2){let n=ne();W("department",n.departmentName),T(2),W("routerLink",ar(2,iW))}}function _W(t,e){if(t&1&&(_(0,"span",33),x(1),w()),t&2){let n=e.$implicit,r=e.$index,i=e.$count;sn(r===i-1?"pe-3":""),T(),z(n)}}var vm=class t{setColor=gm;service=N(mc);userService=N(Je);workerService=N(yo);departmentName="workshop";data=this.service.branchDataMockup.filter(e=>e.branchTitle==="workshop")[0];notifications={activeTasks:this.data.tasks?.activeTasks?.length,messages:this.data.messages.unread.length,workers:this.data.workers?.length};departmentService=N(mm);taskService=N(_o);messageService=N(Wr);department$=this.departmentService.getDepartment(this.departmentName);actualTab$=this.departmentService.actualTab.asObservable();tabs=Pt(this.departmentService.getDepartment(this.departmentName).pipe(Ue(e=>{this.departmentService.actualTab.getValue()||(e?this.departmentService.actualTab.next(e?.tabs[0]):this.departmentService.actualTab.next("All"))}),q(e=>e?.tabs)),{initialValue:[]});workers=Pt(this.department$.pipe(ke(e=>e?this.workerService.getMany(e.members):U([]))),{initialValue:[]});messagesNumber$=this.messageService.getMessageCountForDepartment(this.departmentName);tasksWithContractors$=this.taskService.getActiveTasksForDepartment(this.departmentName).pipe(q(e=>e.map(n=>ae(L({},n),{started:new Date(n.timestamp.seconds*1e3).toISOString()}))),er(e=>Pe(e).pipe(er(n=>n.contractors&&n.contractors.length>0?this.workerService.getMany(n.contractors).pipe(q(r=>r.map(i=>i.name)),q(r=>ae(L({},n),{contractorNames:r})),ft(r=>U(ae(L({},n),{contractorNames:[]})))):U(ae(L({},n),{contractorNames:[]}))),mg())));open(){}taskPercentOfCompletion(e){let n=Object.keys(e.steps).length;return Object.values(e.steps).filter(o=>o===!0).length*100/n}selectTab(e){this.departmentService.actualTab.next(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-workshop-page"]],standalone:!0,features:[X],decls:20,vars:12,consts:[[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs"],[1,"nav-item"],[1,"card-body","p-0"],[1,"list-group","list-group-flush"],[1,"container-fill","overflow-hidden","text-end"],[1,"workshop","d-flex","justify-content-end"],[1,"display","display-1","z-1","text-end",3,"class"],[1,"nav-item",3,"click"],[1,"nav-link","text-reset"],[1,"badge","text-bg-danger"],[1,"list-group-item","py-3"],[1,"table-responsive-md","mx-3"],[1,"table","table-hover","table-borderless"],["scope","col"],["scope","col",1,"d-none","d-sm-table-cell"],["scope","col",1,"d-none","d-md-table-cell"],[1,"d-flex","justify-content-center"],[1,"btn","btn-outline-warning","fw-bold"],[1,"bi","bi-clock-history"],["scope","row"],[1,"badge","rounded-pill"],[1,"d-none","d-sm-table-cell"],[1,"d-none","d-md-table-cell"],[3,"percent"],["type","button",1,"btn","btn-sm","btn-primary","rounded-pill",3,"routerLink"],[1,"d-flex","justify-content-start","flex-wrap"],[1,"btn","p-0",3,"user","routerLink"],[3,"department"],[1,"d-flex","justify-content-center","mb-3"],[1,"btn","btn-outline-warning","fw-bold",3,"routerLink"],[1,"bi","bi-mailbox"],[1,"display","display-1","z-1","text-end"]],template:function(n,r){if(n&1&&(_(0,"div",0),zo(1),He(2,"async"),zo(3),He(4,"async"),zo(5),He(6,"async"),_(7,"div",1)(8,"ul",2),ot(9,dW,6,6,"li",3,_n),w()(),_(11,"div",4)(12,"ul",5),Ee(13,pW,1,1)(14,vW,1,1)(15,yW,5,3),w()()(),_(16,"div",6)(17,"div",7),ot(18,_W,2,3,"span",8,_n),w()()),n&2){let i;T(),ya((i=wn(2,3,r.tasksWithContractors$))!==null&&i!==void 0?i:ar(11,tW));let o=wn(4,6,r.department$);T(4);let s=ya(wn(6,8,r.actualTab$));T(4),st(r.tabs()),T(4),he(s==="Active Tasks"||s==="All"?13:-1),T(),he(s==="Workers"||s==="All"?14:-1),T(),he(s==="Messages"||s==="All"?15:-1),T(3),st(o==null?null:o.name)}},dependencies:[fm,vc,Ki,Hn,xt,bn,gc],styles:['@charset "UTF-8";.sibling[_ngcontent-%COMP%]{display:none;position:absolute;left:0;top:0;height:40px}.parent[_ngcontent-%COMP%]:hover   .sibling[_ngcontent-%COMP%]{display:inline-block;height:40px}.display[_ngcontent-%COMP%]{width:100%;font-size:5rem;font-weight:900;position:sticky;bottom:0;color:#0675177c;clip-path:polygon(0 0,100% 0,100% 54%,0% 54%,0% 60%,100% 60%,100% 100%,0% 100%)}.color-1[_ngcontent-%COMP%]{color:#5eadfc}.color-2[_ngcontent-%COMP%]{color:#2faf7e}.color-3[_ngcontent-%COMP%]{color:#00ff5c}.color-4[_ngcontent-%COMP%]{color:#0f0}.color-5[_ngcontent-%COMP%]{color:#5f0}.color-6[_ngcontent-%COMP%]{color:#af0}.color-7[_ngcontent-%COMP%]{color:#ff0}.color-8[_ngcontent-%COMP%]{color:#dcbb04}.color-9[_ngcontent-%COMP%]{color:#b97708}.color-10[_ngcontent-%COMP%]{color:#95340d}.color-11[_ngcontent-%COMP%]{color:#7a6f83}.color-12[_ngcontent-%COMP%]{color:#6790b7}.workshop[_ngcontent-%COMP%]{position:relative;font-size:140px;white-space:nowrap;display:block;height:inherit;height:96px}.workshop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{bottom:0;animation-name:_ngcontent-%COMP%_slide-in;animation-duration:.5s;animation-timing-function:ease-out;animation-fill-mode:forwards;translate:0 96px;width:fit-content}@keyframes _ngcontent-%COMP%_slide-in{0%{translate:0 100%}to{translate:0 0}}.workshop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:1.1s}.workshop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:1.2s}.workshop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:1.3s}.workshop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){animation-delay:1.4s}.workshop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){animation-delay:1.5s}.workshop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){animation-delay:1.6s}.workshop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(7){animation-delay:1.7s}.workshop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(8){animation-delay:1.8s}']})};var wW=[[["",8,"image"]],[["",8,"title"]],[["",8,"text"]],"*"],IW=[".image",".title",".text","*"],ym=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-horizontal-card"]],standalone:!0,features:[X],ngContentSelectors:IW,decls:9,vars:0,consts:[[1,"card","mb-3","p-3"],[1,"row","g-0"],[1,"col","d-flex","justify-content-center","my-auto"],[1,"col-sm-12","col-sm-12","col-md-8"],[1,"card-body"]],template:function(n,r){n&1&&(zi(wW),_(0,"div",0)(1,"div",1)(2,"div",2),Mn(3),w(),_(4,"div",3)(5,"div",4),Mn(6,1),Mn(7,2),Mn(8,3),w()()()())}})};var _m=class t{workerService=N(yo);taskService=N(_o);id=vt("");worker=Pt(Yn(this.id).pipe(ke(e=>this.workerService.getOne(e))),{initialValue:void 0});workingDayModel=yn(this.worker()?.workingDay);actualTask=Pt(Yn(this.worker).pipe(ke(e=>!e||!e.actualTask||!e.departmentId?U(void 0):this.taskService.getOne(e?.actualTask).pipe(ft(n=>(console.error("Error fetching task:",n),U(void 0))))),At(e=>e!==void 0)));static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-worker-page"]],inputs:{id:[1,"id"]},standalone:!0,features:[X],decls:21,vars:9,consts:[[1,"container","m-auto","mt-5"],["size","m",1,"image",3,"id"],[1,"card-title","title","text-capitalize","fw-bold"],[1,"card-text","text"],[1,"text-uppercase"],["for","customRange2",1,"form-label"],["type","range","min","0","max","8","id","customRange2","name","workingDay","disabled","",1,"form-range",3,"ngModelChange","value","ngModel"],[1,"card-text"],[1,"text-body-secondary"]],template:function(n,r){if(n&1&&(_(0,"div",0)(1,"app-horizontal-card"),Y(2,"app-avatar-image",1),_(3,"h5",2),x(4),w(),_(5,"p",3),x(6),w(),_(7,"p",3),x(8,"department : "),_(9,"span",4),x(10),w()(),_(11,"p"),x(12),w(),_(13,"label",5),x(14),w(),_(15,"input",6),qt("ngModelChange",function(o){return an(r.workingDayModel,o)||(r.workingDayModel=o),o}),w(),_(16,"p"),x(17),w(),_(18,"p",7)(19,"small",8),x(20,"Last updated 3 mins ago"),w()()()()),n&2){let i,o,s,a,u,l,h,p;T(2),W("id",(i=(i=r.worker())==null?null:i.avatarID)!==null&&i!==void 0?i:""),T(2),z((o=(o=r.worker())==null?null:o.name)!==null&&o!==void 0?o:"loading..."),T(2),Re("description : ",(s=r.worker())==null?null:s.description,"."),T(4),z((a=r.worker())==null?null:a.departmentId),T(2),Re("Actual task: ",(u=r.actualTask())==null?null:u.name,""),T(2),Re("Working Day : ",(l=r.workingDayModel())!==null&&l!==void 0?l:(l=r.worker())==null?null:l.workingDay,""),T(),W("value",(h=r.worker())==null?null:h.workingDay),Ht("ngModel",r.workingDayModel),T(2),Re("Actual month total hours : ",(p=r.worker())==null?null:p.actualMonthHours," h")}},dependencies:[Hr,ym,zr,qr,eE,vo,Di]})};function EW(t,e){if(t&1){let n=yt();_(0,"div",5)(1,"label",20),x(2,"Recipients names"),w(),_(3,"select",21),qt("ngModelChange",function(i){Oe(n);let o=ne(2);return an(o.model.recipients,i)||(o.model.recipients=i),Fe(i)}),_(4,"option",22),x(5,"Karol"),w(),_(6,"option",23),x(7,"Ania"),w(),_(8,"option",24),x(9,"James"),w(),_(10,"option",25),x(11,"Sara"),w(),_(12,"option",26),x(13,"Kris"),w(),_(14,"option",16),x(15,"All"),w()()()}if(t&2){let n=ne(2);T(3),Ht("ngModel",n.model.recipients)}}function bW(t,e){if(t&1){let n=yt();_(0,"div",2)(1,"h4",3),x(2,"New message"),w(),_(3,"form",4,0),Ae("ngSubmit",function(){Oe(n);let i=ne();return Fe(i.onSubmit())}),_(5,"div",5)(6,"label",6),x(7,"Title"),w(),_(8,"input",7),qt("ngModelChange",function(i){Oe(n);let o=ne();return an(o.model.title,i)||(o.model.title=i),Fe(i)}),w()(),_(9,"div",5)(10,"label",6),x(11,"Message"),w(),_(12,"textarea",8),qt("ngModelChange",function(i){Oe(n);let o=ne();return an(o.model.message,i)||(o.model.message=i),Fe(i)}),w()(),_(13,"div",5)(14,"label",9),x(15,"Select departments or personal"),w(),_(16,"select",10),qt("ngModelChange",function(i){Oe(n);let o=ne();return an(o.model.departments,i)||(o.model.departments=i),Fe(i)}),_(17,"option",11),x(18,"Workshop"),w(),_(19,"option",12),x(20,"Hr"),w(),_(21,"option",13),x(22,"Warehouse"),w(),_(23,"option",14),x(24,"Outside Jobs"),w(),_(25,"option",15),x(26,"Marketing"),w(),_(27,"option",16),x(28,"All"),w(),_(29,"option",17),x(30,"Personal"),w()()(),Ee(31,EW,16,1,"div",5),_(32,"div",18)(33,"button",19),x(34,"Send"),w()()()()}if(t&2){let n=jn(4),r=ne();W("ngClass",n.invalid&&n.touched?"border-danger":""),T(8),Ht("ngModel",r.model.title),T(4),Ht("ngModel",r.model.message),T(4),Ht("ngModel",r.model.departments),T(15),he(r.model.departments.includes("personal")?31:-1),T(2),W("disabled",n.invalid)}}function CW(t,e){if(t&1){let n=yt();_(0,"h4",27),x(1,"Mailbox "),_(2,"span")(3,"button",28),Ae("click",function(){Oe(n);let i=ne();return Fe(i.openModal())}),x(4,"New "),Y(5,"i",29),w()()(),_(6,"h5"),x(7,"To "),_(8,"span",30),x(9),w(),x(10," department."),w(),Y(11,"app-message-list-page",31),_(12,"h5"),x(13,"To "),_(14,"span",30),x(15,"all"),w(),x(16," departments :"),w(),Y(17,"app-message-list-page",31),_(18,"h5"),x(19,"Direct messages :"),w(),Y(20,"app-message-list-page",32)}if(t&2){let n,r=ne();T(9),z(r.department()),T(2),W("department",r.department()),T(6),W("department","all"),T(3),W("directUserId",(n=r.user())==null?null:n.workerId)}}var Sl=class t{model={message:"",departments:["all"],recipients:[],title:"",sender:"",senderId:"",readBy:[]};userService=N(Je);activeUser$=this.userService.loggedFSUser.asObservable();user=Pt(this.activeUser$,{initialValue:null});newMailModal=yn(!1);workerService=N(yo);messageSerevice=N(Wr);department=Pt(this.activeUser$.pipe(ke(e=>e?.workerId?this.workerService.getOne(e.workerId):U(void 0)),q(e=>e?.departmentId)),{initialValue:void 0});openModal(){this.newMailModal.set(!0)}closeModal(){this.newMailModal.set(!1)}onSubmit(){let e;this.model.departments?.includes("personal")?e={message:this.model.message,recipients:this.model.recipients,title:this.model.title,departments:[],sender:this.user()?.username??"",senderId:this.user()?.workerId??"",readBy:[],timestamp:oc()}:e={message:this.model.message,title:this.model.title,departments:this.model.departments,sender:this.user()?.username??"",senderId:this.user()?.workerId??"",readBy:[],timestamp:oc()},console.log("mail",e),this.messageSerevice.sendMessage(e).then(n=>{console.log("doc",n),this.closeModal()})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-mailbox-page"]],standalone:!0,features:[X],decls:3,vars:1,consts:[["myForm","ngForm"],[1,"container","p-3"],[1,"card","p-3","m-5","w320","mx-auto","bg-body-tertiary",3,"ngClass"],[1,"text-center","m-3"],[1,"pb-3",3,"ngSubmit"],[1,"mb-3"],["for","message",1,"form-label"],["type","text","id","title","required","","name","title","placeholder","Set title",1,"form-control",3,"ngModelChange","ngModel"],["required","","placeholder","Leave a message here","id","message","name","message",1,"form-control",3,"ngModelChange","ngModel"],["for","departments",1,"form-label"],["id","departments","name","departments","multiple","",1,"form-select",3,"ngModelChange","ngModel"],["value","workshop"],["value","hr"],["value","warehouse"],["value","outside-jobs"],["value","marketing"],["value","all"],["value","personal"],[1,"text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["for","user",1,"form-label"],["id","user","name","user","multiple","",1,"form-select",3,"ngModelChange","ngModel"],["value","ibo0ET21ZgQ8p9Alb7osL6sGqrJ2"],["value","OzeUlBIbH9gfM1ZII8aTg9Gv21I2"],["value","JbpKCW4mmKbQwt3aKUcFqPvQYu82"],["value","GU1O8CKxLscSSsaWdw7pganUZ943"],["value","worker-001"],[1,"fw-bold"],[1,"btn","btn-outline-warning","btn-sm","mx-2","p-1",3,"click"],[1,"bi","bi-envelope-plus"],[1,"text-success"],[3,"department"],[3,"directUserId"]],template:function(n,r){n&1&&(_(0,"div",1),Ee(1,bW,35,6,"div",2)(2,CW,21,4),w()),n&2&&(T(),he(r.newMailModal()?1:2))},dependencies:[vc,Mr,zr,fc,Jp,em,qr,Xp,vo,hc,Tl,Di,ws]})};var DW=["*"],wm=class t{label=vt();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-list-item"]],inputs:{label:[1,"label"]},standalone:!0,features:[X],ngContentSelectors:DW,decls:8,vars:1,consts:[[1,"row","g-0","mb-1","align-items-stretch"],[1,"col-sm-3","col-md-3","border-end","d-flex","align-items-center","border","rounded"],[1,"input-group","input-group-sm","h-100"],[1,"input-group-text","w-100","border-0","bg-light"],[1,"col-sm-9","col-md-9","border","rounded"],[1,"form-control","border-0"]],template:function(n,r){n&1&&(zi(),_(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),x(4),w()()(),_(5,"div",4)(6,"div",5),Mn(7),w()()()),n&2&&(T(4),z(r.label()))}})};var TW=()=>[],SW=t=>["/worker",t];function AW(t,e){t&1&&(_(0,"button",8),Y(1,"i",20),w())}function MW(t,e){if(t&1&&(_(0,"a",15),Y(1,"i",21),x(2),w()),t&2){let n=e.$implicit,r=e.$index;ne();let i=ri(3);W("routerLink",Ar(2,SW,i[r])),T(2),Re(" ",n," ")}}function xW(t,e){if(t&1){let n=yt();_(0,"li",18)(1,"input",22,0),Ae("change",function(){Oe(n);let i=jn(2),o=ne(),s=ri(1);return Fe(o.toggle(s,i))}),w(),_(3,"label",23),x(4),w()()}if(t&2){let n=e.$implicit,r=e.$index,i=ne();T(),xh("id",r),W("name",n[0])("checked",n[1])("disabled",!i.editMode()),T(2),xh("for",r),T(),z(n[0])}}var Im=class t{data=vt();checkHandler=ga();editMode=yn(!1);setColor=gm;toggle(e,n){e&&this.checkHandler.emit({id:e,data:[n.name,n.checked]})}delete(){console.log("DELETE")}toggleEdit(){this.editMode.update(e=>!e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-task-detail"]],inputs:{data:[1,"data"]},outputs:{checkHandler:"checkHandler"},standalone:!0,features:[X],decls:31,vars:14,consts:[["check",""],[1,"container","col-lg-6","col-md-8","col-sm-11","col-12","mx-auto"],[1,"d-flex","mb-1"],[1,"input-group","input-group-sm"],["type","button","title","edit",1,"btn","btn-outline-primary","flex-grow-1","fs-4",3,"click"],[1,"bi","bi-pencil-square"],["type","button","title","archive",1,"btn","btn-outline-success","flex-grow-1","fs-4"],[1,"bi","bi-archive"],["type","button","title","to trash",1,"btn","btn-outline-danger","flex-grow-1","fs-4"],["label","Priority"],[1,"badge","rounded-pill"],["label","Name"],["label","Info"],["label","Started"],["label","Contractors"],[1,"icon-link","icon-link-hover","me-2",2,"--bs-icon-link-transform","translate3d(0, -.125rem, 0)",3,"routerLink"],["label","Steps"],[1,"list-group","list-group-flush"],[1,"list-group-item"],["label","Task Id"],[1,"bi","bi-trash"],[1,"bi","bi-person-circle"],["type","checkbox",1,"form-check-input","me-1",3,"change","name","checked","disabled","id"],[1,"form-check-label",3,"for"]],template:function(n,r){if(n&1){let i=yt();_(0,"div",1),zo(1)(2)(3),_(4,"div",2)(5,"div",3)(6,"button",4),Ae("click",function(){return Oe(i),Fe(r.toggleEdit())}),Y(7,"i",5),w(),_(8,"button",6),Y(9,"i",7),w(),Ee(10,AW,2,0,"button",8),w()(),_(11,"app-list-item",9)(12,"span",10),x(13),w()(),_(14,"app-list-item",11),x(15),w(),_(16,"app-list-item",12),x(17),w(),_(18,"app-list-item",13),x(19),He(20,"date"),w(),_(21,"app-list-item",14)(22,"div"),ot(23,MW,3,4,"a",15,_n),w()(),_(25,"app-list-item",16)(26,"ul",17),ot(27,xW,5,6,"li",18,_n),w()(),_(29,"app-list-item",19),x(30),w()()}if(n&2){let i,o,s,a,u,l,h,p,g;T(),ya((i=r.data())==null?null:i.id);let v=(o=(o=r.data())==null?null:o.priority)!==null&&o!==void 0?o:0;T(2),ya((s=(s=r.data())==null?null:s.contractors)!==null&&s!==void 0?s:ar(13,TW)),T(7),he(r.editMode()?10:-1),T(2),sn(r.setColor(v)),T(),z(v),T(2),z((a=r.data())==null?null:a.name),T(2),z((u=r.data())==null?null:u.description),T(2),z(zt(20,10,(l=r.data())==null?null:l.timestamp.toDate().toISOString(),"HH:mm dd.MM.YY ")),T(4),st((h=r.data())==null?null:h.contractorsNames),T(4),st((p=r.data())==null?null:p.steps),T(3),z((g=r.data())==null?null:g.id)}},dependencies:[Hn,wm,xt,bn]})};var Em=class t{id=vt();taskService=N(_o);task=Pt(Yn(this.id).pipe(ke(e=>e?this.taskService.getOne(e).pipe(q(n=>{if(n){let r=n?.steps;return ae(L({},n),{steps:Object.entries(r)})}return n})):U(void 0))));toggleStep(e){this.taskService.updateStep(e.id,e.data)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-task-page"]],inputs:{id:[1,"id"]},standalone:!0,features:[X],decls:4,vars:1,consts:[[1,"container-fluid","my-3"],[1,"text-center"],[3,"checkHandler","data"]],template:function(n,r){n&1&&(_(0,"div",0)(1,"h4",1),x(2,"Task detail :"),w(),_(3,"app-task-detail",2),Ae("checkHandler",function(o){return r.toggleStep(o)}),w()()),n&2&&(T(3),W("data",r.task()))},dependencies:[Im]})};var lN=[{path:"",redirectTo:"welcome",pathMatch:"full"},{path:"login",component:im,title:"login"},{path:"welcome",component:om,title:"Welcome"},{path:"dashboard",component:lm,title:"Dashboard"},{path:"logout",redirectTo:"login"},{path:"user",component:jp},{path:"user/create",component:cm},{path:"workshop",component:vm},{path:"message/:id",component:hm,title:"Message"},{path:"worker/:id",component:_m},{path:"mailbox/:workerId",component:Sl},{path:"mailbox",component:Sl},{path:"task/:id",component:Em}];var dN={production:!1,firebaseConfig:{apiKey:"AIzaSyBzR2EbaT-ic9VxfXaY6-n4vs2FIBMqXqQ",authDomain:"factory-manager-c71f8.firebaseapp.com",projectId:"factory-manager-c71f8",storageBucket:"factory-manager-c71f8.firebasestorage.app",messagingSenderId:"119966284443",appId:"1:119966284443:web:f26c7c83d9c411cfdca43e"}};var hN={providers:[yS({eventCoalescing:!0}),kA(lN,__()),fM(()=>pM(dN.firebaseConfig)),NR(()=>jR()),fx(()=>gx())]};var RW=[[["",8,"brand-name"]],[["",8,"user-name"]],[["",8,"currentroute"]]],NW=[".brand-name",".user-name",".currentRoute"];function PW(t,e){if(t&1){let n=yt();_(0,"li",10)(1,"a",11),Ae("click",function(){let i=Oe(n).$implicit,o=ne();return Fe(o.routeTo(i))}),x(2),w()()}if(t&2){let n=e.$implicit;T(),W("routerLink",n),T(),z(n)}}var bm=class t{links=["login"];userService=N(Je);routeTo(e){return I(this,null,function*(){e==="logout"&&(yield this.userService.logAuthOut(),console.log("Logged Out from navbar"))})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-navbar"]],inputs:{links:"links"},standalone:!0,features:[X],ngContentSelectors:NW,decls:15,vars:0,consts:[[1,"navbar","navbar-expand-md","bg-body-tertiary"],[1,"container-fluid"],[1,"navbar-brand","mb-0","h1"],["routerLink","welcome",1,"text-decoration-none","text-reset","fs-4","me-2"],[1,"navbar-text","text-success","text-capitalize","fs-5","me-2"],[1,"navbar-text","fs-5","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"navbar-nav","d-flex","flex-row","flex-wrap","justify-content-between"],[1,"nav-item","m-1"],[1,"nav-link","link","text-center","text-decoration-underline","link-underline-dark","link-offset-1","link-offset-3-hover","link-underline-opacity-0","link-underline-opacity-100-hover",3,"click","routerLink"]],template:function(n,r){n&1&&(zi(RW),_(0,"nav",0)(1,"div",1)(2,"span",2)(3,"a",3),Mn(4),w()(),_(5,"span",4),Mn(6,1),w(),_(7,"span",5),Mn(8,2),w(),_(9,"button",6),Y(10,"span",7),w(),_(11,"div",8)(12,"ul",9),ot(13,PW,3,2,"li",10,ni),w()()()()),n&2&&(T(13),st(r.links))},dependencies:[bn],encapsulation:2})};var Cm=class t{router=N(Ot);route=N(Rr);constructor(){}currenttUrl$=this.router.events.pipe(At(e=>e instanceof zn),ke(()=>{let e=this.route.root;for(;e.firstChild;)e=e.firstChild;return U(e)}),q(e=>e.snapshot.routeConfig?.path||"/"),Td());static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};function kW(t,e){t&1&&x(0),t&2&&Re(" ",e.username," ")}function OW(t,e){t&1&&x(0),t&2&&Re(" on ",e," ")}var Dm=class t{links=["login"];userService=N(Je);routesServise=N(Cm);currentUrl$=this.routesServise.currenttUrl$;loggedUser$=this.userService.userSubject$.pipe(Ue(e=>{e?.role==="standard"?this.links=["user","mailbox","dashboard","logout"]:e?.role==="admin"?this.links=["user","mailbox","dashboard","settings","logout"]:e?.links?this.links=e?.links:this.links=["login"]}));static \u0275fac=function(n){return new(n||t)};static \u0275cmp=J({type:t,selectors:[["app-root"]],standalone:!0,features:[X],decls:10,vars:7,consts:[[3,"links"],[1,"brand-name"],[1,"user-name"],[1,"currentRoute"]],template:function(n,r){if(n&1&&(_(0,"app-navbar",0)(1,"span",1),x(2,"Factory Manager"),w(),_(3,"span",2),Ee(4,kW,1,1),He(5,"async"),w(),_(6,"span",3),Ee(7,OW,1,1),He(8,"async"),w()(),Y(9,"router-outlet")),n&2){let i,o;W("links",r.links),T(4),he((i=wn(5,3,r.loggedUser$))?4:-1,i),T(3),he((o=wn(8,5,r.currentUrl$))?7:-1,o)}},dependencies:[bm,xt,f_,Ki]})};qS(Dm,hN).catch(t=>console.error(t));
